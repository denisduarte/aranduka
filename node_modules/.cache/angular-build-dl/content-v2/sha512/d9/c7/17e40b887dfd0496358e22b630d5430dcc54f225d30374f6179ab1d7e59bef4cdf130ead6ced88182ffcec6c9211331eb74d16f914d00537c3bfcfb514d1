{"version":3,"sources":["webpack:///src/app/services/book.service.ts","webpack:///src/app/models/book.model.ts","webpack:///src/app/components/books/actions/actions.component.ts","webpack:///src/app/components/books/actions/actions.component.html","webpack:///src/app/components/landing/landing.component.ts","webpack:///src/app/components/landing/landing.component.html","webpack:///src/app/components/header/header.component.ts","webpack:///src/app/components/header/header.component.html","webpack:///src/app/components/user/lendings/user-lendings.component.ts","webpack:///src/app/components/user/lendings/user-lendings.component.html","webpack:///src/app/directives/image-preload.directive.ts","webpack:///src/app/components/signup/signup.component.ts","webpack:///src/app/components/signup/signup.component.html","webpack:///src/app/components/administration/profiles/list/profiles-list.component.ts","webpack:///src/app/components/administration/profiles/list/profiles-list.component.html","webpack:///src/app/services/admin.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/components/landing/gallery/gallery.component.ts","webpack:///src/app/components/landing/gallery/gallery.component.html","webpack:///src/app/components/user/user-data/user-data.component.ts","webpack:///src/app/components/user/user-data/user-data.component.html","webpack:///src/app/components/books/books.component.ts","webpack:///src/app/components/books/books.component.html","webpack:///src/app/components/administration/profiles/profiles.component.ts","webpack:///src/app/components/administration/profiles/profiles.component.html","webpack:///src/app/components/books/book-entry/comments/comments.component.ts","webpack:///src/app/components/books/book-entry/comments/comments.component.html","webpack:///src/app/services/navigate.service.ts","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/models/user.model.ts","webpack:///src/app/app.module.ts","webpack:///src/app/components/authentication/authentication.component.html","webpack:///src/app/components/authentication/authentication.component.ts","webpack:///src/app/components/pagenotfound/pagenotfound.component.ts","webpack:///src/app/components/pagenotfound/pagenotfound.component.html","webpack:///src/app/components/spinner/spinner.component.ts","webpack:///src/app/components/spinner/spinner.component.html","webpack:///src/app/components/user/list/user-list.component.ts","webpack:///src/app/components/user/list/user-list.component.html","webpack:///src/app/services/search.service.ts","webpack:///src/app/components/user/user-comments/user-comments.component.ts","webpack:///src/app/components/user/user-comments/user-comments.component.html","webpack:///src/app/components/administration/book-add/book-add.component.ts","webpack:///src/app/components/administration/book-add/book-add.component.html","webpack:///src/app/components/books/book-list/book-list.component.ts","webpack:///src/app/components/books/book-list/book-list.component.html","webpack:///src/app/components/administration/lendings/lendings.component.ts","webpack:///src/app/components/administration/lendings/lendings.component.html","webpack:///src/app/services/user.service.ts","webpack:///src/app/components/books/book-entry/book-entry.component.ts","webpack:///src/app/components/books/book-entry/book-entry.component.html","webpack:///src/app/components/administration/administration.component.ts","webpack:///src/app/components/administration/administration.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/pipes/shortname.pipe.ts","webpack:///src/app/components/user/user.component.ts","webpack:///src/app/components/user/user.component.html","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["httpOptions","params","headers","BookService","http","userService","urlList","urlAdd","urlFetch","urlUpdate","urlTags","urlAddComment","urlGetComment","urlDeleteComments","urlCheckAvailable","urlBorrowBook","urlReturnBook","urlRenewBook","urlAddToWishList","urlRemoveFromWishList","urlEnterWaitingList","urlLeaveWaitingList","totalBooks","bookList","book","error","ErrorEvent","console","message","status","res","body","search","tag","page","booksPerPage","appendResults","sortField","sortDirection","append","toString","JSON","stringify","get","subscribe","data","next","value","concat","books","total","count","err","log","searchInput","pipe","extractData","handleError","bookID","resData","post","user","_id","bookIDs","wishlist","map","entry","indexOf","comment","BookId","UserId","Comments","unshift","errorMessage","patch","commentsPerPage","userObs","docsPerPage","commentID","borrowing","providedIn","Comment","BookList","LendingEntry","id","createdAt","dueDate","lendingEntry","QueueEntry","waitingEntry","ListObj","name","Book","code","title","subtitle","description","press","year","collection","volume","edition","pages","ex","format","condition","isbn","coverURL","comments","total_comments","Authors","author","element","Organisers","organiser","Translators","translator","Locals","local","Tags","tags","queue","lending","Action","link","icon","text","colorClass","ActionsComponent","router","datePipe","bookService","bookActions","userSubscription","defineActions","option_BookAvailable","option_EnterWaitingList","onEnterWaitingList","bind","option_LeaveWaitingList","onLeaveWaitingList","option_Comments","onOpenComments","option_AddToWishlist","onAddToWishist","option_RemoveFromWishlist","onRemoveFromWishist","option_RenewLending","onRenewBook","option_Due","option_BorrowBook","onBorrowBook","option_ReturnBook","onReturnBook","option_CannotLendBookMax","option_CannotLendBookWait","option_BookUnavailableQueue","option_DueDate","option_BookUnavailableUntil","length","transform","Date","bookIsAvailable","isBookAvailable","userCanBorrow","canUserBorrow","userIsBorrowingBook","isUserBorrowingBook","userIsWaitingBook","isUserWaitingBook","bookIsInUserWishlist","isBookInUserWishlist","bookIsDue","isBookDue","anotherUserIsWaitingBook","isAnotherUserWaitingBook","waitingBookIds","waiting","wishlishBookIds","waitingUserIds","today","withoutTime","borrowBook","push","returnBook","index","findIndex","splice","renewBook","addBookToWishlist","wishlistEntry","removeBookFromWishlist","returnedBook","enterWaitingList","leaveWaitingList","navigate","queryParams","fragment","date","setHours","unsubscribe","selector","templateUrl","styleUrls","parentClass","LandingComponent","searchInputUpdated","emit","enter","HeaderComponent","route","isCollapsed","isAuthenticated","searchInputValue","window","onbeforeunload","ngOnDestroy","event","target","authObs","logout","onLogout","UserLendingsComponent","loadLendinglist","fetchBook","ImagePreloadDirective","src","className","host","SignupComponent","formUpdated","initForm","userForm","required","email","administrator","addUser","newuser","login","password","onSubmit","hideAlert","ProfilesListComponent","adminService","letter","users","routeSubscription","listUserByFirstLetter","listUsers","userID","setAdministrator","checked","AdminService","urlLendings","urlListUsers","urlSetAdmin","par","isAdmin","environment","production","imagesDir","imagesUrl","GalleryComponent","_lightbox","album","images","image","caption","split","thumb","photo","open","close","UserDataComponent","setValue","acceptMailling","updateUserData","BooksComponent","ProfilesComponent","alphabet","CommentsComponent","datepipe","commentPage","bookSubscription","commentForm","addComment","reset","commentDate","a","b","sort","descendingSort","getComments","NavigateService","navigateToPage","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","keys","webpackContextKeys","Object","resolve","module","exports","AppComponent","navigation","idle","keepalive","modalService","loadedFeature","idleState","lastPing","feature","onNavigate","setInterrupts","onIdleEnd","onTimeout","onIdleStart","childModal","show","onTimeoutWarning","countdown","interval","onPing","watch","hide","hideChildModal","stay","WishlistEntry","User","_token","AppModule","provide","useValue","forRoot","declarations","imports","providers","bootstrap","AuthenticationComponent","isLoginMode","isLoading","wait","ms","Promise","setTimeout","form","valid","PageNotFoundComponent","SpinnerComponent","UserListComponent","loadWishlist","sortWishlist","ascendingSort","SearchService","UserCommentsComponent","loadComments","removeComment","BookAddComponent","apiUrl","editMode","bookAuthors","bookCoverImg","nativeElement","control","bookForm","i","removeAt","controls","addBook","urlReg","authorControlList","organiserControlList","translatorControlList","localControlList","tagsControlList","pattern","min","max","getFullYear","onAddAuthor","onAddOrganiser","onAddTranslator","onAddLocal","onAddTag","authorList","BookListComponent","offset","has","lefts","filterTag","filterSearch","getScreenSize","getBooks","bookListSubscription","filterByTag","field","tagInput","getBookList","Ul","childNodes","item","getBoundingClientRect","left","calculateLefts","bookUl","win","d","document","documentElement","g","getElementsByTagName","w","innerWidth","h","innerHeight","screenHeight","screenWidth","bookDiv","bookDivs","toArray","container_div","closest","containerMargin","parseFloat","getComputedStyle","getPropertyValue","containerPadding","divWidth","offsetWidth","container_li","matrixValues","match","scale","myOriginalLeft","parentNode","style","setProperty","oneDay","lendingDate","days","Math","round","abs","sortOrder","onScroll","LendingsComponent","lendings","loadLendings","getLendings","URL_login","URL_logout","URL_updateUser","URL_getComments","URL_AddUser","UserService","response","token","setIdle","stop","errorRes","BookEntryComponent","snapshot","scrollToComments","ok","isBookInWishList","isBookBorrowed","getElementById","scrollIntoView","behavior","commentSection","AdministrationComponent","routes","path","component","children","redirectTo","AppRoutingModule","scrollPositionRestoration","ShortnamePipe","names","shortenedName","slice","UserComponent","bootstrapModule","webpackEmptyAsyncContext","then"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,c,CAYA;;;AACA,UAAMA,WAAW,GAAG;AAClBC,cAAM,EAAE,IADU;AAElBC,eAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,0BAAgB,kBAAlB;AACE,yCAA+B;AADjC,SAAhB;AAFS,OAApB;;UAUaC,W;AA4BX,6BAAoBC,IAApB,EACoBC,WADpB,EAC8C;AAAA;;AAD1B,eAAAD,IAAA,GAAAA,IAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AA3BpB,eAAAC,OAAA,GAAU,kCAAV;AACA,eAAAC,MAAA,GAAS,qCAAT;AACA,eAAAC,QAAA,GAAW,iCAAX;AACA,eAAAC,SAAA,GAAY,iCAAZ;AACA,eAAAC,OAAA,GAAU,iCAAV;AACA,eAAAC,aAAA,GAAgB,4CAAhB;AACA,eAAAC,aAAA,GAAgB,yCAAhB;AACA,eAAAC,iBAAA,GAAoB,gDAApB;AAEA,eAAAC,iBAAA,GAAoB,0CAApB;AAEA,eAAAC,aAAA,GAAgB,uCAAhB;AACA,eAAAC,aAAA,GAAgB,uCAAhB;AACA,eAAAC,YAAA,GAAe,sCAAf;AAEA,eAAAC,gBAAA,GAAmB,qCAAnB;AACA,eAAAC,qBAAA,GAAwB,uCAAxB;AAEA,eAAAC,mBAAA,GAAsB,qCAAtB;AACA,eAAAC,mBAAA,GAAsB,uCAAtB;AAGA,eAAAC,UAAA,GAAqB,CAArB;AACA,eAAAC,QAAA,GAAW,IAAI,oDAAJ,CAA4B,EAA5B,CAAX;AACA,eAAAC,IAAA,GAAO,IAAI,oDAAJ,CAA0B,IAA1B,CAAP;AAGgD;;;;sCAE5BC,K,EAA0B;AAC5C,gBAAIA,KAAK,CAACA,KAAN,YAAuBC,UAA3B,EAAuC;AACrC;AACAC,qBAAO,CAACF,KAAR,CAAc,oBAAd,EAAoCA,KAAK,CAACA,KAAN,CAAYG,OAAhD;AACD,aAHD,MAGO;AACL;AACAD,qBAAO,CAACF,KAAR,CACE,gCAAyBA,KAAK,CAACI,MAA/B,8BAAyDJ,KAAK,CAACA,KAA/D,CADF;AAGD;;AACD,mBAAO,wDAAWA,KAAX,CAAP;AACD;;;sCAEmBK,G,EAAe;AACjC,gBAAIC,IAAI,GAAGD,GAAX;AACA,mBAAOC,IAAI,IAAI,EAAf;AACD;;;sCAEkBC,M,EAAgBC,G,EACjBC,I,EAAcC,Y,EACdC,a,EAAuBC,S,EACvBC,a,EAAqB;AAAA;;AAGnB;AAElB,gBAAIrC,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,MAAd,EAAsBL,IAAI,CAACM,QAAL,EAAtB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,cAAd,EAA8BJ,YAAY,CAACK,QAAb,EAA9B,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,WAAd,EAA2BF,SAA3B,CAAT;AACApC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,eAAd,EAA+BD,aAAa,CAACE,QAAd,EAA/B,CAAT;AAEA,gBAAIR,MAAJ,EACE/B,MAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBP,MAAxB,CAAT;AACF,gBAAIC,GAAJ,EACEhC,MAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,KAAd,EAAqBE,IAAI,CAACC,SAAL,CAAeT,GAAf,CAArB,CAAT;AAEFjC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,iBAAKG,IAAL,CAAUuC,GAAV,CAAwB,KAAKrC,OAA7B,EAAsCN,WAAtC,EACU4C,SADV,CAEY,UAAAC,IAAI,EAAI;AACN,kBAAI,CAACT,aAAL,EACE,KAAI,CAACb,QAAL,CAAcuB,IAAd,CAAmB,EAAnB;;AAEF,mBAAI,CAACvB,QAAL,CAAcuB,IAAd,CAAmB,KAAI,CAACvB,QAAL,CAAcwB,KAAd,CAAoBC,MAApB,CAA2BH,IAAI,CAACI,KAAhC,CAAnB;;AACA,mBAAI,CAAC3B,UAAL,GAAkBuB,IAAI,CAACK,KAAL,CAAWC,KAA7B;AACD,aARb,EASY,UAAAC,GAAG,EAAI;AACLzB,qBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,aAXb;AAaD;;;2CAEuBE,W,EAAqBrB,G,EAAW;AACtD,mBAAO,KAAK7B,IAAL,CAAUuC,GAAV,CAAc,KAAKrC,OAAL,GAAegD,WAAf,GAA6B,GAA7B,GAAmCrB,GAAjD,EAAsDjC,WAAtD,EACUuD,IADV,CACe,2DAAI,KAAKC,WAAT,CADf,EAEe,kEAAW,KAAKC,WAAhB,CAFf,CAAP;AAID;;;oCAEgBC,M,EAAc;AAAA;;AAC3B,mBAAO,KAAKtD,IAAL,CAAUuC,GAAV,CAAoB,KAAKnC,QAAL,GAAgBkD,MAApC,EAA4C1D,WAA5C,EACUuD,IADV,CACe,kEAAW,KAAKE,WAAhB,CADf,EAEe,2DAAI,UAAAE,OAAO,EAAI;AACb,oBAAI,CAACnC,IAAL,CAAUsB,IAAV,CAAea,OAAf;AACD,aAFD,CAFf,CAAP;AAMH;;;kCAEcnC,I,EAAU;AAEvB,mBAAO,KAAKpB,IAAL,CAAUwD,IAAV,CAAqB,KAAKrD,MAA1B,EAAkCiB,IAAlC,EAAwCxB,WAAxC,EACUuD,IADV,CACe,kEAAW,KAAKE,WAAhB,CADf,CAAP;AAGD;;;uCAEgB;AACf,mBAAO,KAAKrD,IAAL,CAAUuC,GAAV,CAAc,KAAKjC,OAAnB,EAA4BV,WAA5B,EACUuD,IADV,CAEa,2DAAI,KAAKC,WAAT,CAFb,EAGa,kEAAW,KAAKC,WAAhB,CAHb,CAAP;AAKD;;;4CAEiBC,M,EAAc;AAC5B,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AACAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAKzB,gBAAzB,EAA2ClB,WAA3C,CAAP;AACH;;;iDAEsB0D,M,EAAc;AACjC,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AACAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAKxB,qBAAzB,EAAgDnB,WAAhD,CAAP;AACH;;;2CAEgB0D,M,EAAc;AAE7B,gBAAIK,OAAO,GAAG,KAAK1D,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BiB,QAA5B,CAAqCC,GAArC,CAAyC,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAA9C,CAAd,CAF6B,CAI7B;;AAEA,mBAAQC,OAAO,CAACI,OAAR,CAAgBT,MAAhB,IAA0B,CAAC,CAA5B,GAAiC,IAAjC,GAAwC,KAA/C;AACD;;;qCAEiBU,O,EAAkB;AAAA;;AAClCA,mBAAO,CAACC,MAAR,GAAiB,KAAK7C,IAAL,CAAUuB,KAAV,CAAgBe,GAAjC;AACAM,mBAAO,CAACE,MAAR,GAAiB,KAAKjE,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA7C;AAEC,iBAAK1D,IAAL,CACEwD,IADF,CACgB,KAAKjD,aADrB,EACoCyD,OADpC,EAC6CpE,WAD7C,EAEE4C,SAFF,CAEY,UAAAwB,OAAO,EAAI;AACJ,oBAAI,CAAC5C,IAAL,CAAUuB,KAAV,CAAgBwB,QAAhB,CAAyBC,OAAzB,CAAiCJ,OAAjC;;AACAzC,qBAAO,CAAC0B,GAAR,CAAY,KAAZ,EAAmB,MAAI,CAAC7B,IAAL,CAAUuB,KAAV,CAAgBwB,QAAnC;;AAEA,oBAAI,CAAC/C,IAAL,CAAUsB,IAAV,CAAe,MAAI,CAACtB,IAAL,CAAUuB,KAAzB;AACD,aAPlB,EAQiB,UAAA0B,YAAY,EAAI;AACd9C,qBAAO,CAAC0B,GAAR,CAAYoB,YAAZ;AACD,aAVlB;AAYF;;;2CAEwB;AACvB,mBAAO,KAAKrE,IAAL,CACJsE,KADI,CACQ,KAAKjE,SAAL,GAAiB,KAAKe,IAAL,CAAUuB,KAAV,CAAgBe,GADzC,EAC8C,KAAKtC,IAAL,CAAUuB,KADxD,EAC+D/C,WAD/D,EAEJuD,IAFI,CAGH,kEAAW,KAAKE,WAAhB,CAHG,EAIH,2DAAI,UAAAE,OAAO,EAAI;AACbhC,qBAAO,CAAC0B,GAAR,CAAYM,OAAZ;AACD,aAFD,CAJG,CAAP;AAQD;;;sCAEkBzB,I,EAAcyC,e,EAAyB;AAAA;;AAExD,gBAAIC,OAAJ;AAGAA,mBAAO,GAAG,KAAKxE,IAAL,CAAUwD,IAAV,CAAe,KAAKhD,aAApB,EACc;AAAE8C,oBAAM,EAAE,KAAKlC,IAAL,CAAUuB,KAAV,CAAgBe,GAA1B;AACE5B,kBAAI,EAAEA,IADR;AAEE2C,yBAAW,EAAEF;AAFf,aADd,EAKc3E,WALd,EAMSuD,IANT,CAOU,kEAAW,KAAKE,WAAhB,CAPV,EAQU,4DARV,CAAV;AAWAmB,mBAAO,CAAChC,SAAR,CACE,UAAAe,OAAO,EAAI;AACT,oBAAI,CAACnC,IAAL,CAAUuB,KAAV,CAAgBwB,QAAhB,GAA2B,MAAI,CAAC/C,IAAL,CAAUuB,KAAV,CAAgBwB,QAAhB,CAAyBvB,MAAzB,CAAgCW,OAAhC,CAA3B;AACD,aAHH,EAIE,UAAAc,YAAY,EAAI;AACd9C,qBAAO,CAAC0B,GAAR,CAAYoB,YAAZ;AACD,aANH;AASD;;;wCAEqBK,S,EAAgB;AACnCnD,mBAAO,CAAC0B,GAAR,CAAY,SAAZ;AAEA,mBAAO,KAAKjD,IAAL,WAAiB,KAAKS,iBAAL,GAAyBiE,SAA1C,EAAqD9E,WAArD,CAAP;AACF;;;qCAGiB0D,M,EAAc;AAElC/B,mBAAO,CAAC0B,GAAR,CAAY,QAAZ,EAAsBK,MAAtB;AACA/B,mBAAO,CAAC0B,GAAR,CAAY,6BAAZ,EAA2C,KAAKhD,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjE;AAGI,gBAAI9C,MAAM,GAAG,IAAI,+DAAJ,EAAb;AACAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAK5B,aAAzB,EAAwCf,WAAxC,EACUuD,IADV,CAEW,kEAAW,KAAKE,WAAhB,CAFX,EAGW,2DAAI,UAAAjC,IAAI,EAAI;AACV;;;;AAKD,aAND,CAHX,CAAP;AAWD;;;qCAEiBkC,M,EAAc;AAAA;;AAC9B,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,iBAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAK3B,aAAzB,EAAwChB,WAAxC,EACiBuD,IADjB,CAEkB,kEAAW,KAAKE,WAAhB,CAFlB,EAGkB,2DAAI,UAAAE,OAAO,EAAI;AAEb,kBAAIE,IAAI,GAAG,MAAI,CAACxD,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjC;AACD,aAHD,CAHlB,EAQiBH,SARjB;AAUA,mBAAO,IAAP;AACD;;;oCAEgBc,M,EAAc;AAC7B,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAc,KAAK1B,YAAnB,EAAiCjB,WAAjC,EACUuD,IADV,CAEW,kEAAW,KAAKE,WAAhB,CAFX,EAGW,2DAAI,UAAAE,OAAO,EAAI;AACb;;;;AAMD,aAPD,CAHX,CAAP;AAaD;;;2CAGuBD,M,EAAc;AACpC,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAKvB,mBAAzB,EAA8CpB,WAA9C,CAAP;AACD;;;2CAGyB0D,M,EAAc;AACpC,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAM,CAAClB,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB,KAAKlC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4Be,GAA5B,CAAgCtB,QAAhC,EAAxB,CAAT;AAEAxC,uBAAW,CAACC,MAAZ,GAAqBA,MAArB;AAEA,mBAAO,KAAKG,IAAL,CAAUuC,GAAV,CAAoB,KAAKtB,mBAAzB,EAA8CrB,WAA9C,CAAP;AACD;;;yCAEY0D,M,EAAc;AAC3B,gBAAIK,OAAO,GAAG,KAAK1D,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BgC,SAA5B,CAAsCd,GAAtC,CAA0C,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAA/C,CAAd;AAEA,mBAAQC,OAAO,CAACI,OAAR,CAAgBT,MAAhB,IAA0B,CAAC,CAA5B,GAAiC,IAAjC,GAAwC,KAA/C;AACD;;;;;;;yBAlTUvD,W,EAAW,uH,EAAA,iH;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBAHV;;;;;wEAGDA,W,EAAW;gBAJvB,wDAIuB;iBAJZ;AACV6E,sBAAU,EAAE;AADF,W;AAIY,U;;;;;;;;;;;;;;;;;;;;;;;;ACrBxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAAaC,O;;;;UAOAC,Q;;;;UAKAC,Y,GAMT,sBAAYC,EAAZ,EAAgBC,SAAhB,EAA2BC,OAA3B,EAAoC9D,IAApC,EAA2CqC,IAA3C,EAAkD;AAAA;;AAChD,aAAKC,GAAL,GAAWsB,EAAX;AACA,aAAKG,YAAL,GAAoB;AAAEF,mBAAS,EAAEA,SAAb;AAAwBC,iBAAO,EAAEA;AAAjC,SAApB;AACA,aAAK9D,IAAL,GAAYA,IAAZ;AACA,aAAKqC,IAAL,GAAYA,IAAZ;AACD,O;;UAGQ2B,U,GAMT,oBAAYJ,EAAZ,EAAgBC,SAAhB,EAA2BC,OAA3B,EAAoC9D,IAApC,EAA2CqC,IAA3C,EAAkD;AAAA;;AAChD,aAAKC,GAAL,GAAWsB,EAAX;AACA,aAAKK,YAAL,GAAoB;AAAEJ,mBAAS,EAAEA;AAAb,SAApB;AACA,aAAK7D,IAAL,GAAYA,IAAZ;AACA,aAAKqC,IAAL,GAAYA,IAAZ;AACD,O;;UAGC6B,O,GAGJ,iBAAYC,IAAZ,EAA0B;AAAA;;AACxB,aAAKA,IAAL,GAAYA,IAAZ;AACD,O;;UAGUC,I,GA6BX,cAAYpE,IAAZ,EAAmB;AAAA;;AACjB,YAAIA,IAAJ,EAAU;AACN,eAAKsC,GAAL,GAAWtC,IAAI,CAACsC,GAAhB;AACA,eAAK+B,IAAL,GAAYrE,IAAI,CAACqE,IAAjB;AACA,eAAKC,KAAL,GAAatE,IAAI,CAACsE,KAAlB;AACA,eAAKC,QAAL,GAAgBvE,IAAI,CAACuE,QAArB;AACA,eAAKC,WAAL,GAAmBxE,IAAI,CAACwE,WAAxB;AACA,eAAKC,KAAL,GAAazE,IAAI,CAACyE,KAAlB;AACA,eAAKC,IAAL,GAAY1E,IAAI,CAAC0E,IAAjB;AACA,eAAKC,UAAL,GAAkB3E,IAAI,CAAC2E,UAAvB;AACA,eAAKC,MAAL,GAAc5E,IAAI,CAAC4E,MAAnB;AACA,eAAKC,OAAL,GAAe7E,IAAI,CAAC6E,OAApB;AACA,eAAKC,KAAL,GAAa9E,IAAI,CAAC8E,KAAlB;AACA,eAAKC,EAAL,GAAU/E,IAAI,CAAC+E,EAAf;AACA,eAAKC,MAAL,GAAchF,IAAI,CAACgF,MAAnB;AACA,eAAK3E,MAAL,GAAcL,IAAI,CAACK,MAAnB;AACA,eAAK4E,SAAL,GAAiBjF,IAAI,CAACiF,SAAtB;AACA,eAAKC,IAAL,GAAYlF,IAAI,CAACkF,IAAjB;AACA,eAAKC,QAAL,GAAgBnF,IAAI,CAACmF,QAArB;AACA,eAAKpC,QAAL,GAAgB/C,IAAI,CAACoF,QAArB;AACA,eAAKC,cAAL,GAAsBrF,IAAI,CAACqF,cAA3B;AACA,eAAKxB,SAAL,GAAiB7D,IAAI,CAAC6D,SAAtB;AAEA,eAAKyB,OAAL,GAAetF,IAAI,CAACuF,MAAL,CAAY9C,GAAZ,CAAgB,UAAA+C,OAAO;AAAA,mBAAI,IAAItB,OAAJ,CAAYsB,OAAZ,CAAJ;AAAA,WAAvB,CAAf;AACA,eAAKC,UAAL,GAAkBzF,IAAI,CAAC0F,SAAL,CAAejD,GAAf,CAAmB,UAAA+C,OAAO;AAAA,mBAAI,IAAItB,OAAJ,CAAYsB,OAAZ,CAAJ;AAAA,WAA1B,CAAlB;AACA,eAAKG,WAAL,GAAmB3F,IAAI,CAAC4F,UAAL,CAAgBnD,GAAhB,CAAoB,UAAA+C,OAAO;AAAA,mBAAI,IAAItB,OAAJ,CAAYsB,OAAZ,CAAJ;AAAA,WAA3B,CAAnB;AACA,eAAKK,MAAL,GAAc7F,IAAI,CAAC8F,KAAL,CAAWrD,GAAX,CAAe,UAAA+C,OAAO;AAAA,mBAAI,IAAItB,OAAJ,CAAYsB,OAAZ,CAAJ;AAAA,WAAtB,CAAd;AACA,eAAKO,IAAL,GAAY/F,IAAI,CAACgG,IAAL,CAAUvD,GAAV,CAAc,UAAA+C,OAAO;AAAA,mBAAI,IAAItB,OAAJ,CAAYsB,OAAZ,CAAJ;AAAA,WAArB,CAAZ;AAEA,eAAKS,KAAL,GAAajG,IAAI,CAACiG,KAAlB;AACA,eAAKC,OAAL,GAAelG,IAAI,CAACkG,OAApB;AACH;AACF,O;;;;;;;;;;;;;;;;;AC/GH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACII;;AACE;;AACE;;AACA;;AACA;;AAAyB;;AAAe;;AAC1C;;AAEF;;;;;;AALmB;;AAAA;;AAEU;;AAAA;;;;;;;;AAK7B;;AACG;;AAAoB;AAAA;;AAAA;;AAAA;;AAAA,mBAAS,2BAAT;AAA0B,WAA1B;;AAClB;;AACA;;AACA;;AAAyB;;AAAe;;AAC1C;;AACH;;;;;;AAJoB;;AAAA;;AAEU;;AAAA;;;;;;AAfhC;;AAEE;;AASA;;AAQF;;;;;;AAjBO;;AAAA;;AASA;;AAAA;;;;;;;;;;AAbT;;AAEE;;AAoBF;;;;;;AAtBK;;AAEmB;;AAAA;;;;UDSlBC,M,GAMF,gBAAYC,IAAZ,EAAkBC,IAAlB,EAAwBC,IAAxB,EAA8BC,UAA9B,EAA0C;AAAA;;AACxC,aAAKH,IAAL,GAAYA,IAAZ;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,UAAL,GAAkBA,UAAlB;AACD,O;;UAQQC,gB;AASX,kCAAoBC,MAApB,EACoBC,QADpB,EAEoBC,WAFpB,EAGoB9H,WAHpB,EAG8C;AAAA;;AAH1B,eAAA4H,MAAA,GAAAA,MAAA;AACA,eAAAC,QAAA,GAAAA,QAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAA9H,WAAA,GAAAA,WAAA;AALpB,eAAA+H,WAAA,GAAc,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,CAAd;AAKiD;;;;qCAEzC;AAAA;;AAEN,iBAAKC,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC5D,kBAAIA,IAAJ,EAAU;AACR,sBAAI,CAACA,IAAL,GAAYA,IAAZ;;AACA,sBAAI,CAACyE,aAAL,CAAmB,MAAI,CAACzE,IAAxB,EAA8B,MAAI,CAACrC,IAAnC;AACD;AACF,aALqB,CAAxB;AAMD;;;wCAEqBqC,I,EAAYrC,I,EAAY;AAE5C,gBAAM+G,oBAAoB,GAAG,IAAIZ,MAAJ,CAAW,IAAX,EAAiB,iBAAjB,EAAoC,YAApC,EAAkD,YAAlD,CAA7B;AACA,gBAAMa,uBAAuB,GAAG,IAAIb,MAAJ,CAAW,KAAKc,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAAX,EAA+C,YAA/C,EAA6D,0BAA7D,EAAyF,EAAzF,CAAhC;AACA,gBAAMC,uBAAuB,GAAG,IAAIhB,MAAJ,CAAW,KAAKiB,kBAAL,CAAwBF,IAAxB,CAA6B,IAA7B,CAAX,EAA+C,YAA/C,EAA6D,wBAA7D,EAAuF,EAAvF,CAAhC;AACA,gBAAMG,eAAe,GAAG,IAAIlB,MAAJ,CAAW,KAAKmB,cAAL,CAAoBJ,IAApB,CAAyB,IAAzB,CAAX,EAA2C,aAA3C,EAA0D,aAA1D,EAAyE,EAAzE,CAAxB;AACA,gBAAMK,oBAAoB,GAAG,IAAIpB,MAAJ,CAAW,KAAKqB,cAAL,CAAoBN,IAApB,CAAyB,IAAzB,CAAX,EAA2C,mBAA3C,EAAgE,yBAAhE,EAA2F,EAA3F,CAA7B;AACA,gBAAMO,yBAAyB,GAAG,IAAItB,MAAJ,CAAW,KAAKuB,mBAAL,CAAyBR,IAAzB,CAA8B,IAA9B,CAAX,EAAgD,cAAhD,EAAgE,wBAAhE,EAA0F,EAA1F,CAAlC;AACA,gBAAMS,mBAAmB,GAAG,IAAIxB,MAAJ,CAAW,KAAKyB,WAAL,CAAiBV,IAAjB,CAAsB,IAAtB,CAAX,EAAwC,aAAxC,EAAuD,oBAAvD,EAA6E,EAA7E,CAA5B;AACA,gBAAMW,UAAU,GAAG,IAAI1B,MAAJ,CAAW,IAAX,EAAiB,yBAAjB,EAA4C,6BAA5C,EAA2E,UAA3E,CAAnB;AACA,gBAAM2B,iBAAiB,GAAG,IAAI3B,MAAJ,CAAW,KAAK4B,YAAL,CAAkBb,IAAlB,CAAuB,IAAvB,CAAX,EAAyC,SAAzC,EAAoD,sBAApD,EAA4E,EAA5E,CAA1B;AACA,gBAAMc,iBAAiB,GAAG,IAAI7B,MAAJ,CAAW,KAAK8B,YAAL,CAAkBf,IAAlB,CAAuB,IAAvB,CAAX,EAAyC,mBAAzC,EAA8D,gBAA9D,EAAgF,EAAhF,CAA1B;AACA,gBAAMgB,wBAAwB,GAAG,IAAI/B,MAAJ,CAAW,IAAX,EAAiB,UAAjB,EAA6B,gCAA7B,EAA+D,EAA/D,CAAjC;AACA,gBAAMgC,yBAAyB,GAAG,IAAIhC,MAAJ,CAAW,IAAX,EAAiB,UAAjB,EAA6B,+BAA7B,EAA8D,EAA9D,CAAlC;AACA,gBAAMiC,2BAA2B,GAAG,IAAIjC,MAAJ,CAAW,IAAX,EAAiB,iBAAjB,EAAoC,8CAApC,EAAoF,UAApF,CAApC;AAEA,gBAAMkC,cAAc,GAAG,IAAvB;AACA,gBAAMC,2BAA2B,GAAG,IAAInC,MAAJ,CAAW,IAAX,EAAiB,iBAAjB,EAAoC,eAApC,EAAqD,UAArD,CAApC;;AAEA,gBAAInG,IAAI,CAACkG,OAAL,CAAaqC,MAAb,GAAsB,CAA1B,EAA6B;AACzBD,yCAA2B,CAAChC,IAA5B,GAAmCgC,2BAA2B,CAAChC,IAA5B,CAAiC9E,MAAjC,CAAwC,UAAU,KAAKkF,QAAL,CAAc8B,SAAd,CAAwB,IAAIC,IAAJ,CAASzI,IAAI,CAACkG,OAAL,CAAa,CAAb,EAAgBnC,YAAhB,CAA6BD,OAAtC,CAAxB,EAAuE,YAAvE,CAAlD,CAAnC;AACAuE,4BAAc,GAAG,IAAIlC,MAAJ,CAAW,IAAX,EAAiB,iBAAjB,EAAoC,iBAAiB,KAAKO,QAAL,CAAc8B,SAAd,CAAwB,IAAIC,IAAJ,CAASzI,IAAI,CAACkG,OAAL,CAAa,CAAb,EAAgBnC,YAAhB,CAA6BD,OAAtC,CAAxB,EAAuE,YAAvE,CAArD,EAA2I,EAA3I,CAAjB;AACH;;AAED,gBAAM4E,eAAe,GAAG,KAAKC,eAAL,CAAqB3I,IAArB,CAAxB;AACA,gBAAM4I,aAAa,GAAG,KAAKC,aAAL,CAAmBxG,IAAnB,CAAtB;AACA,gBAAMyG,mBAAmB,GAAG,KAAKC,mBAAL,CAAyB/I,IAAzB,EAA+BqC,IAA/B,CAA5B;AACA,gBAAM2G,iBAAiB,GAAG,KAAKC,iBAAL,CAAuBjJ,IAAvB,EAA6BqC,IAA7B,CAA1B;AACA,gBAAM6G,oBAAoB,GAAG,KAAKC,oBAAL,CAA0BnJ,IAA1B,EAAgCqC,IAAhC,CAA7B;AACA,gBAAM+G,SAAS,GAAG,KAAKC,SAAL,CAAerJ,IAAf,CAAlB;AACA,gBAAMsJ,wBAAwB,GAAG,KAAKC,wBAAL,CAA8BvJ,IAA9B,EAAoCqC,IAApC,CAAjC;AAGA;;;;;;AASA;;AACA,gBAAIqG,eAAe,IAAI,CAACY,wBAAxB,EAAkD;AAChD,mBAAK1C,WAAL,CAAiB,CAAjB,IAAsBG,oBAAtB;AACD;;AAED,gBAAI2B,eAAe,IAAIY,wBAAvB,EAAiD;AAC/C,mBAAK1C,WAAL,CAAiB,CAAjB,IAAsBwB,2BAAtB;AACD;;AAED,gBAAI,CAACM,eAAD,IAAoB,CAACI,mBAAzB,EAA8C;AAE5C,mBAAKlC,WAAL,CAAiB,CAAjB,IAAsB0B,2BAAtB;AACD;;AAED,gBAAI,CAACI,eAAD,IAAoBI,mBAApB,IAA2C,CAACM,SAAhD,EAA2D;AACzD,mBAAKxC,WAAL,CAAiB,CAAjB,IAAsByB,cAAtB;AACD;;AAED,gBAAI,CAACK,eAAD,IAAoBI,mBAApB,IAA2CM,SAA3C,IAAwDE,wBAA5D,EAAsF;AACpF,mBAAK1C,WAAL,CAAiB,CAAjB,IAAsBiB,UAAtB;AACD;;AAED,gBAAI,CAACa,eAAD,IAAqBI,mBAArB,IAA4CM,SAA5C,IAAyD,CAACE,wBAA9D,EAAwF;AACtF,mBAAK1C,WAAL,CAAiB,CAAjB,IAAsBe,mBAAtB;AACD,aAlE2C,CAoE5C;;;AACA,gBAAIe,eAAe,IAAIE,aAAnB,IAAoC,CAACU,wBAAzC,EAAmE;AACjE,mBAAK1C,WAAL,CAAiB,CAAjB,IAAsBkB,iBAAtB;AACD;;AACD,gBAAIY,eAAe,IAAIE,aAAnB,IAAoCU,wBAApC,IAAgE,CAACN,iBAArE,EAAyF;AACvF;AACA,mBAAKpC,WAAL,CAAiB,CAAjB,IAAsBI,uBAAtB;AACD;;AACD,gBAAI0B,eAAe,IAAIE,aAAnB,IAAoCU,wBAApC,IAAgEN,iBAApE,EAAwF;AACtF;AACA,mBAAKpC,WAAL,CAAiB,CAAjB,IAAsBO,uBAAtB;AACD;;AACD,gBAAIuB,eAAe,IAAK,CAACE,aAAzB,EAAwC;AACtC,mBAAKhC,WAAL,CAAiB,CAAjB,IAAsBsB,wBAAtB;AACD;;AACD,gBAAI,CAACQ,eAAD,IAAqBI,mBAAzB,EAA+C;AAC7C,mBAAKlC,WAAL,CAAiB,CAAjB,IAAsBoB,iBAAtB;AACD;;AACD,gBAAI,CAACU,eAAD,IAAqB,CAACI,mBAAtB,IAA6C,CAACE,iBAAlD,EAAqE;AACnE,mBAAKpC,WAAL,CAAiB,CAAjB,IAAsBI,uBAAtB;AACD;;AACD,gBAAI,CAAC0B,eAAD,IAAqB,CAACI,mBAAtB,IAA6CE,iBAAjD,EAAoE;AAClE,mBAAKpC,WAAL,CAAiB,CAAjB,IAAsBO,uBAAtB;AACD,aA3F2C,CA6F5C;;;AACA,gBAAI+B,oBAAJ,EAA0B;AACxB,mBAAKtC,WAAL,CAAiB,CAAjB,IAAsBa,yBAAtB;AACD;;AACD,gBAAI,CAACyB,oBAAL,EAA2B;AACzB,mBAAKtC,WAAL,CAAiB,CAAjB,IAAsBW,oBAAtB;AACD,aAnG2C,CAqG5C;;;AACA,iBAAKX,WAAL,CAAiB,CAAjB,IAAsBS,eAAtB;AAGD;;;0CAGuBrH,I,EAAU;AAChC,mBAAOA,IAAI,CAACkG,OAAL,CAAaqC,MAAb,GAAsB,KAAtB,GAA8B,IAArC;AACD;;;wCAEqBlG,I,EAAU;AAC9B,mBAAOA,IAAI,CAACkB,SAAL,CAAegF,MAAf,GAAwB,CAA/B;AACD;;;8CAE2BvI,I,EAAYqC,I,EAAU;AAChD,gBAAIrC,IAAI,CAACkG,OAAL,CAAaqC,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,qBAAO,KAAP;AACD,aAFD,MAEO;AACL,qBAAOvI,IAAI,CAACkG,OAAL,CAAa,CAAb,EAAgB5D,GAAhB,KAAwBD,IAAI,CAACC,GAApC;AACD;AACF;;;4CAEyBtC,I,EAAYqC,I,EAAU;AAC9C,gBAAImH,cAAc,GAAGnH,IAAI,CAACoH,OAAL,CAAahH,GAAb,CAAiB,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAAtB,CAArB;AACA,mBAAQkH,cAAc,CAAC7G,OAAf,CAAuB3C,IAAI,CAACsC,GAA5B,IAAmC,CAAC,CAArC,GAA0C,IAA1C,GAAiD,KAAxD;AACD;;;+CAE4BtC,I,EAAYqC,I,EAAU;AACjD,gBAAIqH,eAAe,GAAGrH,IAAI,CAACG,QAAL,CAAcC,GAAd,CAAkB,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAAvB,CAAtB;AACA,mBAAQoH,eAAe,CAAC/G,OAAhB,CAAwB3C,IAAI,CAACsC,GAA7B,IAAoC,CAAC,CAAtC,GAA2C,IAA3C,GAAkD,KAAzD;AACD;;;mDAEgCtC,I,EAAYqC,I,EAAU;AACrD,gBAAIsH,cAAc,GAAG3J,IAAI,CAACiG,KAAL,CAAWxD,GAAX,CAAe,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAApB,CAArB;;AAEA,gBAAItC,IAAI,CAACiG,KAAL,CAAWsC,MAAX,IAAqB,CAAzB,EAA4B;AAC1B,qBAAO,KAAP;AACD,aAFD,MAEO;AACL,kBAAIvI,IAAI,CAACiG,KAAL,CAAW,CAAX,EAAc3D,GAAd,IAAqBD,IAAI,CAACC,GAA9B,EACE,OAAO,IAAP;AACH;;AACD,mBAAO,KAAP;AACD;;;oCAEiBtC,I,EAAU;AAE1B,gBAAIA,IAAI,CAACkG,OAAL,CAAaqC,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,qBAAO,KAAP;AACD,aAFD,MAEO;AAEL,kBAAMqB,KAAK,GAAG,KAAKC,WAAL,CAAiB,IAAIpB,IAAJ,EAAjB,CAAd;AACA,kBAAM3E,OAAO,GAAG,KAAK+F,WAAL,CAAiB,IAAIpB,IAAJ,CAASzI,IAAI,CAACkG,OAAL,CAAa,CAAb,EAAgBnC,YAAhB,CAA6BD,OAAtC,CAAjB,CAAhB;AAEA,qBAAOA,OAAO,GAAG8F,KAAjB;AACD;AACF,W,CAID;;;;uCAEa5J,I,EAAU;AAAA;;AAErB,gBAAIkG,OAAO,GAAG,KAAKS,WAAL,CAAiBmD,UAAjB,CAA4B9J,IAAI,CAACsC,GAAjC,EACPlB,SADO,CACG,UAAA8E,OAAO,EAAI;AACnBlG,kBAAI,CAACkG,OAAL,CAAa6D,IAAb,CAAkB7D,OAAO,CAAC7D,IAAR,CAAa,CAAb,CAAlB;;AACA,oBAAI,CAACA,IAAL,CAAUkB,SAAV,CAAoBwG,IAApB,CAAyB7D,OAAO,CAAClG,IAAR,CAAa,CAAb,CAAzB;;AAEA,oBAAI,CAACnB,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BgC,SAA5B,GAAwC,MAAI,CAAClB,IAAL,CAAUkB,SAAlD;;AACA,oBAAI,CAAC1E,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2B,MAAI,CAACzC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjD;AAED,aARM,CAAd;AASA,mBAAO,IAAP;AACD;;;uCAEYvB,I,EAAU;AAAA;;AACrB,iBAAK2G,WAAL,CAAiBqD,UAAjB,CAA4BhK,IAAI,CAACsC,GAAjC;AAEA,gBAAI2H,KAAK,GAAG,KAAK5H,IAAL,CAAUkB,SAAV,CAAoB2G,SAApB,CAA8B,UAAAhE,OAAO;AAAA,qBAAIA,OAAO,CAAC5D,GAAR,IAAetC,IAAI,CAACsC,GAAxB;AAAA,aAArC,CAAZ;;AACA,gBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,mBAAK5H,IAAL,CAAUkB,SAAV,CAAoB4G,MAApB,CAA2BF,KAA3B,EAAkC,CAAlC;AACF;;AAEDA,iBAAK,GAAGjK,IAAI,CAACkG,OAAL,CAAagE,SAAb,CAAuB,UAAAhE,OAAO;AAAA,qBAAIA,OAAO,CAAC5D,GAAR,IAAe,MAAI,CAACD,IAAL,CAAUC,GAA7B;AAAA,aAA9B,CAAR;;AACA,gBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACbjK,kBAAI,CAACkG,OAAL,CAAaiE,MAAb,CAAoBF,KAApB,EAA2B,CAA3B;AACF;;AAED,iBAAKpL,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BgC,SAA5B,GAAwC,KAAKlB,IAAL,CAAUkB,SAAlD;AACA,iBAAK1E,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2B,KAAKzC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjD;AAEA,mBAAO,IAAP;AACD;;;sCAEWvB,I,EAAU;AAAA;;AACpB,iBAAK2G,WAAL,CAAiByD,SAAjB,CAA2BpK,IAAI,CAACsC,GAAhC,EACOlB,SADP,CACiB,UAAA8E,OAAO,EAAI;AAElBlG,kBAAI,CAACkG,OAAL,CAAa,CAAb,EAAgBnC,YAAhB,CAA6BD,OAA7B,GAAuCoC,OAAO,CAACpC,OAA/C;;AAEA,oBAAI,CAACgD,aAAL,CAAmB,MAAI,CAACzE,IAAxB,EAA8BrC,IAA9B;AACF,aANR;AAQA,mBAAO,IAAP;AACD;;;yCAEcA,I,EAAU;AAAA;;AACvB,iBAAK2G,WAAL,CAAiB0D,iBAAjB,CAAmCrK,IAAI,CAACsC,GAAxC,EACKlB,SADL,CACe,UAAAoB,QAAQ,EAAI;AACnB,kBAAM8H,aAAa,GAAG,IAAI,gEAAJ,CAAkB9H,QAAQ,CAAC,CAAD,CAAR,CAAYK,MAA9B,EAAsCL,QAAQ,CAAC,CAAD,CAAR,CAAYqB,SAAlD,CAAtB;;AAEA,qBAAI,CAACxB,IAAL,CAAUG,QAAV,CAAmBuH,IAAnB,CAAwBO,aAAxB;;AACA,qBAAI,CAACxD,aAAL,CAAmB,OAAI,CAACzE,IAAxB,EAA8BrC,IAA9B;AACF,aANN;AAQA,mBAAO,IAAP;AACD;;;8CAEmBA,I,EAAU;AAAA;;AAC5B,iBAAK2G,WAAL,CAAiB4D,sBAAjB,CAAwCvK,IAAI,CAACsC,GAA7C,EACKlB,SADL,CACe,UAAAoJ,YAAY,EAAI;AACvB,kBAAIP,KAAK,GAAG,OAAI,CAAC5H,IAAL,CAAUG,QAAV,CAAmB0H,SAAnB,CAA6B,UAAAxH,KAAK;AAAA,uBAAIA,KAAK,CAACJ,GAAN,IAAakI,YAAY,CAAClI,GAA9B;AAAA,eAAlC,CAAZ;;AACA,kBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,uBAAI,CAAC5H,IAAL,CAAUG,QAAV,CAAmB2H,MAAnB,CAA0BF,KAA1B,EAAiC,CAAjC;AACF;;AACD,qBAAI,CAACnD,aAAL,CAAmB,OAAI,CAACzE,IAAxB,EAA8BrC,IAA9B;AACF,aAPN;AASA,mBAAO,IAAP;AACD;;;6CAEkBA,I,EAAU;AAAA;;AAC3B,iBAAK2G,WAAL,CAAiB8D,gBAAjB,CAAkCzK,IAAI,CAACsC,GAAvC,EACKlB,SADL,CACe,UAAAqI,OAAO,EAAI;AAEpB,qBAAI,CAACpH,IAAL,CAAUoH,OAAV,CAAkBM,IAAlB,CAAuBN,OAAO,CAACzJ,IAAR,CAAa,CAAb,CAAvB;;AACAA,kBAAI,CAACiG,KAAL,CAAW8D,IAAX,CAAgBN,OAAO,CAACpH,IAAR,CAAa,CAAb,CAAhB;;AAEA,qBAAI,CAACyE,aAAL,CAAmB,OAAI,CAACzE,IAAxB,EAA8BrC,IAA9B;AACA,aAPN;AAQA,mBAAO,IAAP;AACD;;;6CACkBA,I,EAAU;AAAA;;AAC3B,iBAAK2G,WAAL,CAAiB+D,gBAAjB,CAAkC1K,IAAI,CAACsC,GAAvC,EACKlB,SADL,CACe,UAAAoJ,YAAY,EAAI;AACvB,kBAAIP,KAAK,GAAG,OAAI,CAAC5H,IAAL,CAAUoH,OAAV,CAAkBS,SAAlB,CAA4B,UAAAxH,KAAK;AAAA,uBAAIA,KAAK,CAACJ,GAAN,IAAakI,YAAY,CAAClI,GAA9B;AAAA,eAAjC,CAAZ;;AACA,kBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,uBAAI,CAAC5H,IAAL,CAAUoH,OAAV,CAAkBU,MAAlB,CAAyBF,KAAzB,EAAgC,CAAhC;AACF;;AAEDA,mBAAK,GAAGjK,IAAI,CAACiG,KAAL,CAAWiE,SAAX,CAAqB,UAAAxH,KAAK;AAAA,uBAAIA,KAAK,CAACJ,GAAN,IAAa,OAAI,CAACD,IAAL,CAAUC,GAA3B;AAAA,eAA1B,CAAR;;AACA,kBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,uBAAI,CAAC5H,IAAL,CAAUoH,OAAV,CAAkBU,MAAlB,CAAyBF,KAAzB,EAAgC,CAAhC;AACF;;AAED,qBAAI,CAACnD,aAAL,CAAmB,OAAI,CAACzE,IAAxB,EAA8BrC,IAA9B;AACF,aAbN;AAeE,mBAAO,IAAP;AACH;;;yCAEcA,I,EAAYqC,I,EAAYsE,W,EAAwB;AAC7D,iBAAKF,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,OAAD,EAAU,OAAV,CAArB,EAAyC;AAAEC,yBAAW,EAAE;AAAEhH,kBAAE,EAAE5D,IAAI,CAACsC;AAAX,eAAf;AAAiCuI,sBAAQ,EAAE;AAA3C,aAAzC;AACA,mBAAO,IAAP;AACD;;;sCAEWC,I,EAAU;AACpB,mBAAOA,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAP;AACD;;;wCAEa;AACZ,iBAAKlE,gBAAL,CAAsBmE,WAAtB;AACD;;;;;;;yBA1SUxE,gB,EAAgB,uH,EAAA,yH,EAAA,mI,EAAA,mI;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA;AAAA;AAAA;AAAA,S;AAAA,gB;AAAA,e;AAAA,kO;AAAA;AAAA;AC9B7B;;;;AAAoD;;;;;;;;;wED8BvCA,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTyE,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKkB,U;;;;;;;;;;;AAElBnL,cAAI;kBAAZ;AAAY,Y;AACJoL,qBAAW;kBAAnB;AAAmB;;;;;;;;;;;;;;;;;;;AEjCtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUaC,gB;AAEX,kCAAoB5E,MAApB,EACoBjG,MADpB,EACyC;AAAA;;AADrB,eAAAiG,MAAA,GAAAA,MAAA;AACA,eAAAjG,MAAA,GAAAA,MAAA;AACnB;;;;qCAEO;AACN,iBAAKA,MAAL,CAAY8K,kBAAZ,CAA+BC,IAA/B,CAAoC,EAApC;AACD;;;kCAEO;AACN,iBAAK9E,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD;;;;;;;yBAZUU,gB,EAAgB,uH,EAAA,uI;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA,iB;AAAA,e;AAAA,gS;AAAA;AAAA;ACV7B;;AAEE;;AAEE;;AACE;;AACF;;AAEA;;AAA0B;;AAAQ;;AAClC;;AACA;;AACA;;AAEA;;AAEA;;AAA0B;;AAAoB;;AAE9C;;AAA0B;;AAAc;;AACxC;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AAGA;;AAA0B;;AAAqB;;AAC/C;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AAA8F;;AAA4D;;AAAoB;;AAAI;;AACpL;;AACA;;AACE;;AACF;;AAEA;;AAA0B;;AAA0B;;AACpD;;AACE;;AACF;;AAEA;;AAA0B;;AAAuB;;AACjD;;AACE;;AACF;;AAGA;;AAA0B;;AAA4B;;AACtD;;AACE;;AAAI;;AAAgC;;AACpC;;AAAI;;AAAwH;;AAC5H;;AAAI;;AAAiB;;AACrB;;AAAI;;AAAsC;;AAC5C;;AAEA;;AAA0B;;AAAS;;AACnC;;AACE;;AAA2B;;AAA4D;;AAAoB;;AAAI;;AAC/G;;AAA8C;;AAC9C;;AACF;;AAEA;;AACQ;AAAA,qBAAS,IAAAG,KAAA,EAAT;AAAgB,aAAhB;;AAAmB;;AAA2B;;AACxD;;AAEF;;;;;;;;;wED3EaH,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTJ,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKkB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEV7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;AC8BI;;AACE;;AACE;AAAA;;AAAA;;AAAA;AAAA;;AADF;;AAEF;;;;;;AAGE;;AACE;;AAAqD;;AAAM;;AAC7D;;;;;;;;;;AAcI;;AACE;;AACA;;AAA4E;;AAAM;;AACpF;;;;AADyC;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AAf7C;;AAEE;;AACE;;;;AACF;;AACA;;AACE;;AAAuE;;AAAU;;AACjF;;AAAuE;;AAAW;;AAClF;;AAA2E;;AAAgB;;AAC3F;;AAA2E;;AAAgB;;AAC3F;;AACA;;AAAuC;AAAA;;AAAA;;AAAA;AAAA;;AAAqB;;AAAM;;AAElE;;AAIF;;AACF;;;;;;AAfI;;AAAA;;AAGuC;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAIlC;;AAAA;;;;;;AAjBX;;AACE;;AAGA;;AAmBF;;;;;;AAtB6B;;AAAA;;AAGI;;AAAA;;;;;;AAtCrC;;AACE;;AACI;;AACJ;;AACA;;AAME;;AACF;;AACA;;AACE;;AAEE;;AACE;;AAA2D;;AAAW;;AACxE;;AACA;;AACE;;AAAqD;;AAAM;;AAAsB;;AAAS;;AAAO;;AACnG;;AACA;;AACE;;AAA0D;;AAAU;;AACtE;;AACA;;AACE;;AAAwD;;AAAQ;;AAClE;;AACF;;AAEA;;AAKA;;AAwBF;;AACF;;;;;;AA9B2C;;AAAA;;AAKc;;AAAA;;;;UDnB5CM,e;AAWX,iCAAoBjL,MAApB,EACmBiG,MADnB,EAEoBiF,KAFpB,EAGoB7M,WAHpB,EAIoB8H,WAJpB,EAI8C;AAAA;;AAJ1B,eAAAnG,MAAA,GAAAA,MAAA;AACD,eAAAiG,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAA7M,WAAA,GAAAA,WAAA;AACA,eAAA8H,WAAA,GAAAA,WAAA;AAbpB,eAAAgF,WAAA,GAAc,IAAd;AACA,eAAA7J,WAAA,GAAc,EAAd;AACA,eAAA/B,QAAA,GAAW,EAAX;AACA,eAAA6L,eAAA,GAAkB,KAAlB;AACA,eAAA3L,KAAA,GAAQ,EAAR;AAUC;;;;qCAEO;AAAA;;AACN,iBAAK4G,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,qBAAI,CAACuJ,eAAL,GAAuB,CAAC,CAACvJ,IAAzB;AACA,qBAAI,CAACA,IAAL,GAAYA,IAAZ;AACD,aAHuB,CAAxB,CADM,CAMN;;AAEA,iBAAK7B,MAAL,CAAY8K,kBAAZ,CAA+BlK,SAA/B,CAAyC,UAAAyK,gBAAgB,EAAI;AAC3D,qBAAI,CAAC/J,WAAL,GAAmB+J,gBAAnB;AACA,qBAAI,CAACrL,MAAL,CAAYqL,gBAAZ,GAA+BA,gBAA/B;AACD,aAHD;;AAKAC,kBAAM,CAACC,cAAP,GAAwB;AAAA,qBAAM,OAAI,CAACC,WAAL,EAAN;AAAA,aAAxB;AAED;;;8CAEmBC,K,EAAc;AAChC9L,mBAAO,CAAC0B,GAAR,CAAY,OAAZ,EAAqBoK,KAArB;AAEA,iBAAKnK,WAAL,GAAsCmK,KAAK,CAACC,MAAN,CAAc3K,KAApD;AAEA,iBAAKf,MAAL,CAAY8K,kBAAZ,CAA+BC,IAA/B,CAAoC,KAAKzJ,WAAzC;AACA,iBAAK2E,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,OAAD,CAArB;AACD;;;qCAEU;AAAA;;AACT,gBAAIwB,OAAJ;AAEAA,mBAAO,GAAG,KAAKtN,WAAL,CAAiBuN,MAAjB,EAAV;AAEAD,mBAAO,CAAC/K,SAAR,CACE,UAAAe,OAAO,EAAI;AACT,qBAAI,CAACyJ,eAAL,GAAuB,KAAvB;;AACA,qBAAI,CAACnF,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,GAAD,CAArB;AACD,aAJH,EAKE,UAAA1H,YAAY,EAAI;AACd,qBAAI,CAAChD,KAAL,GAAagD,YAAb;AACD,aAPH;AASD;;;wCAEa;AACZ,iBAAK4D,gBAAL,CAAsBmE,WAAtB;AACA,iBAAKxK,MAAL,CAAY8K,kBAAZ,CAA+BN,WAA/B;AACA,iBAAKqB,QAAL;AACD;;;;;;;yBAhEUZ,e,EAAe,uI,EAAA,uH,EAAA,+H,EAAA,mI,EAAA,mI;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA,gB;AAAA,e;AAAA,82D;AAAA;AAAA;ACf5B;;;;AAAiD;;;;;;;;;;wEDepCA,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACTR,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,wBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEhB5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACoBc;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAQ;;AACpC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;AAQN;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAY;;AACxC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;AAQN;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAS;;AACrC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;;;;;;;;;AAlClB;;AAEE;;AACE;;AAAsB;;AAAM;;AAC5B;;AAAqC;;AAA4B;;AAAa;;AAAQ;;;;AAAkD;;AAC1I;;AACA;;AACE;;AACE;;AACF;;AACA;;AACI;;AAAwB;;AAAoB;;AAC5C;;AAA2B;;AAAuB;;AAClD;;AAEA;;AAQA;;AAQA;;AAQA;;AACE;;AACE;;AAA4B;;AAAQ;;AACpC;;AACA;;AAA4B;;AAAI;;AAChC;;AACF;;AACF;;AACA;;AACE;;AACI;;AACyC;;AAAS;;AACtD;;AACA;;AAA8B;;AAAC;;AAC/B;;AACE;;AACE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAuC;;AAAc;;AACzD;;AACF;;AACJ;;AACF;;AACF;;;;;;AAxD0F;;AAAA;;AAI/E;;AAAA;;AAGqB;;AAAA;;AACG;;AAAA;;AAGtB;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAWD;;AAAA;;AAEA;;AAAA;;AAMM;;AAAA;;;;;;AAnDpB;;AACE;;AA6DF;;;;;;AA7DO;;AAAA;;;;UDaMmB,qB;AAMX,uCAAoBzN,WAApB,EACoB8H,WADpB,EAC8C;AAAA;;AAD1B,eAAA9H,WAAA,GAAAA,WAAA;AACA,eAAA8H,WAAA,GAAAA,WAAA;AAHb,eAAApD,SAAA,GAA4B,EAA5B;AAG0C;;;;qCAEzC;AAAA;;AAEN,iBAAKsD,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAACA,IAAL,GAAYA,IAAZ;;AACA,uBAAI,CAACkK,eAAL;AACD;AACF,aALuB,CAAxB;AAMD;;;4CAEiB;AAAA;;AAChB,iBAAKhJ,SAAL,GAAiB,EAAjB;;AADgB,uDAES,KAAKlB,IAAL,CAAUkB,SAFnB;AAAA;;AAAA;AAAA;AAAA,oBAEPQ,YAFO;;AAGd,uBAAI,CAAC4C,WAAL,CAAiB6F,SAAjB,CAA2BzI,YAAY,CAACzB,GAAxC,EACiBlB,SADjB,CAEoB,UAAApB,IAAI,EAAI;AACN+D,8BAAY,CAAC/D,IAAb,GAAoBA,IAApB;;AAEA,yBAAI,CAACuD,SAAL,CAAewG,IAAf,CAAoBhG,YAApB;AACD,iBANrB,EAOoB,UAAAnC,GAAG,EAAI;AACLzB,yBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,iBATrB;AAHc;;AAEhB,kEAA8C;AAAA;AAY7C;AAde;AAAA;AAAA;AAAA;AAAA;AAejB;;;uCAEYM,M,EAAc;AAEzB,iBAAKyE,WAAL,CAAiBqD,UAAjB,CAA4B9H,MAA5B;AAEA,gBAAM+H,KAAK,GAAG,KAAK1G,SAAL,CAAe2G,SAAf,CAAyB,UAAAxH,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAN,IAAaJ,MAAjB;AAAA,aAA9B,CAAd;;AACA,gBAAI+H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,mBAAK1G,SAAL,CAAe4G,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACF;;AAED,iBAAKpL,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BgC,SAA5B,CAAsC2G,SAAtC,CAAgD,UAAAxH,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAN,IAAaJ,MAAjB;AAAA,aAArD;;AACA,gBAAI+H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,mBAAKpL,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BgC,SAA5B,CAAsC4G,MAAtC,CAA6CF,KAA7C,EAAoD,CAApD;AACF;;AACD,iBAAKpL,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2B,KAAKzC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjD;AAEA,mBAAO,IAAP;AACD;;;;;;;yBApDU+K,qB,EAAqB,mI,EAAA,mI;AAAA,O;;;cAArBA,qB;AAAqB,qC;AAAA,gB;AAAA,e;AAAA,skB;AAAA;AAAA;ACdlC;;;;AAAK;;;;;;;;;;wEDcQA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTrB,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;;;;;AEflC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAUcsB,qB;;;;;;;sCAKE;AACV,iBAAKC,GAAL,GAAW,eAAX;AACD;;;iCACG;AACF,iBAAKC,SAAL,GAAiB,cAAjB;AACD;;;;;;;yBAVSF,qB;AAAqB,O;;;cAArBA,qB;AAAqB,2C;AAAA,mB;AAAA;AAAA;;qBAArB,e;AAAW,a,EAAA,M,EAAA;AAAA,qBAAX,UAAW;AAAL,a;;;;;;;;;;;;;;;;;wEAANA,qB,EAAqB;gBATlC,uDASkC;iBATxB;AACPxB,oBAAQ,EAAE,cADH;AAEP2B,gBAAI,EAAE;AACJ,yBAAU,aADN;AAEJ,wBAAU,QAFN;AAGJ,uBAAQ;AAHJ;AAFC,W;AASwB,U;AACtBF,aAAG;kBAAX;AAAW,Y;AACH,qBAAO;kBAAf;AAAe,Y;AACMC,mBAAS;kBAA9B,yDAA8B;mBAAlB,O;AAAkB;;;;;;;;;;;;;;;;;;;ACbnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACKM;;AACE;;AAAG;;AAAW;;AAChB;;;;;;AADK;;AAAA;;;;;;AASH;;AAEM;;AACN;;;;;;AAYE;;AAAuE;;AAA0B;;;;;;AACjG;;AAA0E;;AAAwB;;;;;;AAHpG;;AAEE;;AACA;;AAEF;;;;;;AAH2B;;AAAA;;AACA;;AAAA;;;;;;AAW3B;;AAEM;;AACN;;;;;;AAwBJ;;AACE;;AACF;;;;UD3DSE,e;AAMX,iCAAoBhO,WAApB,EACmB4H,MADnB,EAEoBiF,KAFpB,EAE2C;AAAA;;AAFvB,eAAA7M,WAAA,GAAAA,WAAA;AACD,eAAA4H,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AALb,eAAAoB,WAAA,GAAuB,KAAvB;AACP,eAAA7M,KAAA,GAAgB,IAAhB;AAI8C;;;;qCAEtC;AACN,iBAAK8M,QAAL;AACD;;;qCAGkB;AACjB,iBAAKC,QAAL,GAAgB,IAAI,wDAAJ,CAAc;AAC5B,sBAAQ,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWC,QAAjC,CADoB;AAE5B,uBAAS,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWA,QAAZ,EAAsB,0DAAWC,KAAjC,CAAtB,CAFmB;AAG5B,0BAAY,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWD,QAAZ,CAAtB,CAHgB;AAI5B,gCAAkB,IAAI,0DAAJ,CAAgB,IAAhB;AAJU,aAAd,CAAhB;AAOD;;;qCAEU;AAAA;;AAET,gBAAM5K,IAAI,GAAG,IAAI,uDAAJ,CAAS,KAAK2K,QAAL,CAAczL,KAAvB,CAAb;AACAc,gBAAI,CAAC8K,aAAL,GAAqB,KAArB;AAEA,iBAAKtO,WAAL,CACGuO,OADH,CACW/K,IADX,EAEGjB,SAFH,CAEa,UAAAiM,OAAO,EAAI;AAChB,qBAAI,CAACxO,WAAL,CAAiByO,KAAjB,CAAuBjL,IAAI,CAAC6K,KAA5B,EAAmC,OAAI,CAACF,QAAL,CAAczL,KAAd,CAAoBgM,QAAvD,EACiBnM,SADjB,CAEoB,UAAAe,OAAO,EAAI;AACT,uBAAI,CAACsE,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,QAAD,CAArB;AACD,eAJrB,EAKoB,UAAA1H,YAAY,EAAI;AACd,uBAAI,CAAChD,KAAL,GAAagD,YAAb;AACD,eAPrB;AAQD,aAXP,EAYM,UAAAA,YAAY,EAAI;AACd9C,qBAAO,CAAC0B,GAAR,CAAYoB,YAAZ;AAEA,qBAAI,CAAChD,KAAL,GAAagD,YAAb;AACD,aAhBP;AAkBD;;;sCAEW;AACV,iBAAK6J,WAAL,GAAmB,KAAnB;AACD;;;;;;;yBApDUD,e,EAAe,mI,EAAA,uH,EAAA,+H;AAAA,O;;;cAAfA,e;AAAe,mC;AAAA,iB;AAAA,e;AAAA,ojC;AAAA;AAAA;ACX5B;;AAEI;;AAAsC;AAAA,qBAAY,IAAAW,QAAA,EAAZ;AAAsB,aAAtB;;AAEpC;;AAIA;;AACE;;AAAuC;;AAAI;;AAC3C;;AAEQ;AAAA,qBAAS,IAAAC,SAAA,EAAT;AAAoB,aAApB;;AAFR;;AAIA;;AAIF;;AAEA;;AACE;;AAAwC;;AAAK;;AAC7C;;AAGQ;AAAA,qBAAS,IAAAA,SAAA,EAAT;AAAoB,aAApB;;AAHR;;AAKA;;AAMF;;AAEA;;AACE;;AAA2C;;AAAK;;AAChD;;AAEQ;AAAA,qBAAS,IAAAA,SAAA,EAAT;AAAoB,aAApB;;AAFR;;AAIA;;AAIF;;AAEA;;AACE;;AAAwC;;AAAgC;;AAExE;;AACE;;AAEQ;AAAA,qBAAS,IAAAA,SAAA,EAAT;AAAoB,aAApB;;AAFR;;AAIF;;AACF;;AAGA;;AACE;;AAEU;;AACV;;AACF;;AAEF;;AAEA;;AAMJ;;;;AAxEmB;;AAAA;;AAEmB;;AAAA;;AAWxB;;AAAA;;AAaJ;;AAAA;;AAcI;;AAAA;;AAmBE;;AAAA;;AAOgC;;AAAA;;;;;;;;;wEDzDnCZ,e,EAAe;gBAL3B,uDAK2B;iBALjB;AACT5B,oBAAQ,EAAE,YADD;AAETC,uBAAW,EAAE,yBAFJ;AAGTC,qBAAS,EAAE,CAAC,wBAAD;AAHF,W;AAKiB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEZ5B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACUE;;AACE;;AAAI;;AAAY;;AAChB;;AAAI;;AAAa;;AACjB;;AAAI;;AAAc;;AAClB;;AACE;;AACqC;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AADrC;;AAEF;;AACF;;;;;;AAPM;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAGI;;AAAA;;;;UDJCuC,qB;AAOX,uCAAmBjH,MAAnB,EACoBiF,KADpB,EAEoBiC,YAFpB,EAEgD;AAAA;;AAF7B,eAAAlH,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAAiC,YAAA,GAAAA,YAAA;AANpB,eAAAC,MAAA,GAAgB,EAAhB;AACA,eAAAC,KAAA,GAAe,EAAf;AAKmD;;;;qCAE3C;AAAA;;AACN,iBAAKC,iBAAL,GAAyB,KAAKpC,KAAL,CAAWd,WAAX,CAAuBxJ,SAAvB,CACjB,UAAC3C,MAAD,EAAoB;AAClB,qBAAI,CAACsP,qBAAL,CAA2BtP,MAAM,CAACmP,MAAlC;AACD,aAHgB,CAAzB;AAKD;;;gDAE6BA,M,EAAgB;AAAA;;AAC1C,iBAAKD,YAAL,CAAkBK,SAAlB,CAA4BJ,MAA5B,EACkBxM,SADlB,CAC4B,UAAAyM,KAAK,EAAI;AACjB,qBAAI,CAACA,KAAL,GAAaA,KAAb;AACD,aAHnB;AAIH;;;2CAEwBI,M,EAAgBhC,K,EAAO;AAC9C,iBAAK0B,YAAL,CAAkBO,gBAAlB,CAAmCD,MAAnC,EAA2ChC,KAAK,CAACC,MAAN,CAAaiC,OAAxD,EACkB/M,SADlB;AAED;;;wCAEU;AACL,iBAAK0M,iBAAL,CAAuB9C,WAAvB;AACL;;;;;;;yBAjCU0C,qB,EAAqB,uH,EAAA,+H,EAAA,qI;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA,iB;AAAA,e;AAAA,yI;AAAA;AAAA;ACXlC;;AAEE;;AACE;;AAAI;;AAAM;;AACV;;AAAI;;AAAI;;AACR;;AAAI;;AAAM;;AACV;;AAAI;;AAAuB;;AAC7B;;AAEA;;AAUF;;;;AAVM;;AAAA;;;;;;;;;wEDEOA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTzC,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;;;;;;;AEZlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,c,CAUA;;;AACA,UAAM3M,WAAW,GAAG;AAClBE,eAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,0BAAgB,kBAAlB;AACE,yCAA+B;AADjC,SAAhB;AADS,OAApB;;UASa0P,Y;AAOX,8BAAoBxP,IAApB,EACoBC,WADpB,EAC8C;AAAA;;AAD1B,eAAAD,IAAA,GAAAA,IAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AANpB,eAAAwP,WAAA,GAAc,0CAAd;AACA,eAAA7O,aAAA,GAAgB,wCAAhB;AACA,eAAA8O,YAAA,GAAe,uCAAf;AACA,eAAAC,WAAA,GAAc,qCAAd;AAGiD;;;;sCAE7BjO,G,EAAe;AACjC,gBAAIC,IAAI,GAAGD,GAAX;AACA,mBAAOC,IAAI,IAAI,EAAf;AACD;;;wCAEiB;AAChB,mBAAO,KAAK3B,IAAL,CAAUuC,GAAV,CAAc,KAAKkN,WAAnB,EACUtM,IADV,CACe,2DAAI,KAAKC,WAAT,CADf,CAAP;AAGD;;;qCAGiBE,M,EAAc;AAAA;;AAC9B,gBAAIzD,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBmB,MAAxB,CAAT;AAEA,gBAAMsM,GAAG,GAAG;AACV/P,oBAAM,EAAEA,MADE;AAEVC,qBAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,gCAAgB,kBAAlB;AACE,+CAA+B;AADjC,eAAhB;AAFC,aAAZ;AAMA,iBAAKE,IAAL,CAAUuC,GAAV,CAAoB,KAAK3B,aAAzB,EAAwCgP,GAAxC,EACUpN,SADV,CACoB,UAAAe,OAAO,EAAI;AAEpB,kBAAIE,IAAI,GAAG,OAAI,CAACxD,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjC;AAEA,kBAAM0I,KAAK,GAAG5H,IAAI,CAACkB,SAAL,CAAe2G,SAAf,CAAyB,UAAAlK,IAAI;AAAA,uBAAIA,IAAI,CAACsC,GAAL,IAAYH,OAAO,CAACG,GAAxB;AAAA,eAA7B,CAAd;;AAEA,kBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb5H,oBAAI,CAACkB,SAAL,CAAe4G,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACF;;AAED,qBAAI,CAACpL,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2Be,IAA3B;AACD,aAZV;AAcA,mBAAO,IAAP;AACD;;;oCAIkBuL,M,EAAc;AAC7B,gBAAInP,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEA,gBAAImP,MAAJ,EACEnP,MAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwB6M,MAAxB,CAAT;AAEF,gBAAMY,GAAG,GAAG;AACV/P,oBAAM,EAAEA,MADE;AAEVC,qBAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,gCAAgB,kBAAlB;AACE,+CAA+B;AADjC,eAAhB;AAFC,aAAZ;AAMA,mBAAO,KAAKE,IAAL,CAAUuC,GAAV,CAAsB,KAAKmN,YAA3B,EAAyCE,GAAzC,CAAP;AACD;;;2CAEuBP,M,EAAgBQ,O,EAAkB;AAExD,gBAAIhQ,MAAM,GAAG,IAAI,+DAAJ,EAAb;AAEAA,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,QAAd,EAAwBkN,MAAM,CAACjN,QAAP,EAAxB,CAAT;AACAvC,kBAAM,GAAGA,MAAM,CAACsC,MAAP,CAAc,SAAd,EAAyB0N,OAAO,CAACzN,QAAR,EAAzB,CAAT;AAEA,gBAAMwN,GAAG,GAAG;AACV/P,oBAAM,EAAEA,MADE;AAEVC,qBAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,gCAAgB,kBAAlB;AACE,+CAA+B;AADjC,eAAhB;AAFC,aAAZ;AAMA,mBAAO,KAAKE,IAAL,CAAUuC,GAAV,CAAuB,KAAKoN,WAA5B,EAAyCC,GAAzC,CAAP;AACD;;;;;;;yBAjFQJ,Y,EAAY,uH,EAAA,iH;AAAA,O;;;eAAZA,Y;AAAY,iBAAZA,YAAY,K;AAAA,oBAFX;;;;;wEAEDA,Y,EAAY;gBAHxB,wDAGwB;iBAHb;AACV5K,sBAAU,EAAE;AADF,W;AAGa,U;;;;;;;;;;;;;;;;;;;;;;;;ACpBzB;AAAA;;;AAAA;AAAA;AAAA,S,CAAA;AACA;AACA;;;AAEO,UAAMkL,WAAW,GAAG;AACzBC,kBAAU,EAAE;AADa,OAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACCE;;AACE;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAzB;;AACF;;;;;;AADO;;AAAA;;;;ADET,UAAMnQ,WAAW,GAAG;AAClBC,cAAM,EAAE,IADU;AAElBC,eAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,0BAAgB,kBAAlB;AACE,yCAA+B;AADjC,SAAhB;AAFS,OAApB;AAWC;AAED,UAAMkQ,SAAS,GAAG,mBAAlB;AACA,UAAMC,SAAS,GAAG,wCAAlB;;UAQaC,gB;AAIX,kCAAoBlQ,IAApB,EACoBmQ,SADpB,EACyC;AAAA;;AADrB,eAAAnQ,IAAA,GAAAA,IAAA;AACA,eAAAmQ,SAAA,GAAAA,SAAA;AAHb,eAAAC,KAAA,GAAsB,EAAtB;AAGqC;;;;qCAEpC;AAAA;;AAEN,iBAAKpQ,IAAL,CAAUuC,GAAV,CAAwB0N,SAAxB,EAAmCrQ,WAAnC,EACU4C,SADV,CACoB,UAAA6N,MAAM,EAAI;AAAA,0DACGA,MADH;AAAA;;AAAA;AACf,uEAA0B;AAAA,sBAAjBC,KAAiB;AACxB,sBAAMxC,GAAG,GAAGkC,SAAS,GAAGM,KAAxB;AACA,sBAAMC,OAAO,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAhB;AACA,sBAAMC,KAAK,GAAGT,SAAS,GAAGM,KAA1B;AAEA,sBAAMI,KAAK,GAAG;AAAE5C,uBAAG,EAAEA,GAAP;AAAYyC,2BAAO,EAAEA,OAArB;AAA8BE,yBAAK,EAAEA;AAArC,mBAAd;;AAEA,yBAAI,CAACL,KAAL,CAAWjF,IAAX,CAAgBuF,KAAhB;AACD;AATc;AAAA;AAAA;AAAA;AAAA;AAUlB,aAXZ;AAYD;;;+BAEIrF,K,EAAa;AAChB,iBAAK8E,SAAL,CAAeQ,IAAf,CAAoB,KAAKP,KAAzB,EAAgC/E,KAAhC;AACD;;;kCAEI;AACH,iBAAK8E,SAAL,CAAeS,KAAf;AACD;;;;;;;yBA7BUV,gB,EAAgB,gI,EAAA,sH;AAAA,O;;;cAAhBA,gB;AAAgB,oC;AAAA,gB;AAAA,e;AAAA,0I;AAAA;AAAA;AC1B7B;;AACE;;AAGF;;;;AAH8B;;AAAA;;;;;;;;;wEDyBjBA,gB,EAAgB;gBAN5B,uDAM4B;iBANlB;AACT7D,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAMkB,U;;;;;;;;;;;;;;;;;;;;;;;;AE1B7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACWQ;;AAEM;;AACN;;;;;;AAYE;;AAAoD;;AAA0B;;;;;;AAC9E;;AAAuD;;AAAwB;;;;;;AAHjF;;AAEE;;AACA;;AAEF;;;;;;AAHQ;;AAAA;;AACA;;AAAA;;;;;;AA0BZ;;AACE;;AACF;;;;;;;;AAtDJ;;AAEI;;AAAsC;AAAA;;AAAA;;AAAA;AAAA;;AAEpC;;AACE;;AAAwC;;AAAI;;AAC5C;;AAEQ;AAAA;;AAAA;;AAAA;AAAA;;AAFR;;AAIA;;AAIF;;AAEA;;AACE;;AAAwC;;AAAK;;AAC7C;;AAGQ;AAAA;;AAAA;;AAAA;AAAA;;AAHR;;AAKA;;AAMF;;AAEA;;AACE;;AAAwC;;AAAgC;;AAExE;;AACE;;AAEQ;AAAA;;AAAA;;AAAA;AAAA;;AAFR;;AAIF;;AACF;;AAGA;;AACE;;AAEU;;AACV;;AACF;;AAEF;;AAEA;;AAMJ;;;;;;AAxDmB;;AAAA;;AASL;;AAAA;;AAaJ;;AAAA;;AAqBM;;AAAA;;AAOgC;;AAAA;;;;UDxCnCsE,iB;AAOX,mCAAoB5Q,WAApB,EAA8C;AAAA;;AAA1B,eAAAA,WAAA,GAAAA,WAAA;AAHb,eAAAwD,IAAA,GAAa,IAAb;AACA,eAAAyK,WAAA,GAAuB,KAAvB;AAE0C;;;;qCAEzC;AAAA;;AAEN,iBAAKC,QAAL;AAEA,iBAAKlG,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAACA,IAAL,GAAYA,IAAZ;;AACA,uBAAI,CAAC2K,QAAL,CAAc0C,QAAd,CAAuB;AACrBvL,sBAAI,EAAE9B,IAAI,CAAC8B,IADU;AAErB+I,uBAAK,EAAE7K,IAAI,CAAC6K,KAFS;AAGrByC,gCAAc,EAAEtN,IAAI,CAACsN;AAHA,iBAAvB;AAKD;AACF,aATuB,CAAxB;AAYD;;;qCAEkB;AACjB,iBAAK3C,QAAL,GAAgB,IAAI,wDAAJ,CAAc;AAC5B,sBAAQ,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWC,QAAjC,CADoB;AAE5B,uBAAS,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,CAAC,0DAAWA,QAAZ,EAAsB,0DAAWC,KAAjC,CAAtB,CAFmB;AAG5B,gCAAkB,IAAI,0DAAJ,CAAgB,IAAhB;AAHU,aAAd,CAAhB;AAMD;;;qCAEY;AAAA;;AAET,iBAAKrO,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4B4C,IAA5B,GAAmC,KAAK6I,QAAL,CAAczL,KAAd,CAAoB4C,IAAvD;AACA,iBAAKtF,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4B2L,KAA5B,GAAoC,KAAKF,QAAL,CAAczL,KAAd,CAAoB2L,KAAxD;AACA,iBAAKrO,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BoO,cAA5B,GAA6C,KAAK3C,QAAL,CAAczL,KAAd,CAAoBoO,cAAjE;AAEA,iBAAK9Q,WAAL,CACK+Q,cADL,GAEKxO,SAFL,CAGM,UAAAC,IAAI,EAAI;AACN,qBAAI,CAACyL,WAAL,GAAmB,IAAnB;AACD,aALP,EAMM,UAAAlL,GAAG,EAAI;AACLzB,qBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,aARP;AAUD;;;sCAEW;AACV,iBAAKkL,WAAL,GAAmB,KAAnB;AACD;;;;;;;yBAxDQ2C,iB,EAAiB,mI;AAAA,O;;;cAAjBA,iB;AAAiB,sC;AAAA,gB;AAAA,e;AAAA,26B;AAAA;AAAA;ACZ9B;;;;AAAsB;;;;;;;;;wEDYTA,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACTxE,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;;;;;;;;;;AEb9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOa0E,c;AAEX,kCAAc;AAAA;AACb;;;;qCAEO,CACP;;;;;;;yBANUA,c;AAAc,O;;;cAAdA,c;AAAc,kC;AAAA,gB;AAAA,e;AAAA,iI;AAAA;AAAA;ACP3B;;AACE;;AACE;;AAA6B;;AAAM;;AACrC;;AAEA;;AACF;;;;;;;;;wEDCaA,c,EAAc;gBAL1B,uDAK0B;iBALhB;AACT5E,oBAAQ,EAAE,WADD;AAETC,uBAAW,EAAE,wBAFJ;AAGTC,qBAAS,EAAE,CAAC,uBAAD;AAHF,W;AAKgB,U;;;;;;;;;;;;;;;;;;;;AEP3B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACEI;;AACE;;AAG8B;;;;AAAsB;;AACtD;;;;;;AAHM;;AAAA,wJAA6C,aAA7C,EAA6C,gFAA7C;;AAE0B;;AAAA;;;;UDCvB2E,iB;AAOX,qCAAc;AAAA;;AALd,eAAAC,QAAA,GAAW,6BAA6BX,KAA7B,CAAmC,EAAnC,CAAX;AAKiB;;;;qCAET,CAEP;;;;;;;yBAXUU,iB;AAAiB,O;;;cAAjBA,iB;AAAiB,qC;AAAA,gB;AAAA,e;AAAA,kM;AAAA;AAAA;ACP9B;;AACE;;AACE;;AAMA;;AACE;;AAE8B;;AAAU;;AAC1C;;AACF;;AACF;;AAEA;;AACE;;AACF;;;;AAhBQ;;AAAA;;AAQE;;AAAA;;;;;;;;;;wEDHGA,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACT7E,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;;;;;;;;AEP9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACgBI;;AAEI;;AACE;;AAA2B;;AAAqB;;AAChD;;AACF;;AACA;;AAAuC;;;;AAAuC;;AAClF;;;;;;AAJiC;;AAAA;;AAC3B;;AAAA;;AAEqC;;AAAA;;;;;;;;AAK7C;;AACE;;AAAG;AAAA;;AAAA;;AAAA;AAAA;;AAA8B;;AAA4B;;AAC/D;;;;UDhBW6E,iB;AAWX,mCAAoBrJ,WAApB,EACmBsJ,QADnB,EACuC;AAAA;;AADnB,eAAAtJ,WAAA,GAAAA,WAAA;AACD,eAAAsJ,QAAA,GAAAA,QAAA;AANZ,eAAA7K,QAAA,GAAW,EAAX;AAEP,eAAA8K,WAAA,GAAsB,CAAtB;AACA,eAAA/M,eAAA,GAA0B,EAA1B;AAG0C;;;;qCAElC;AAAA;;AACN,iBAAK4J,QAAL;AAEA,iBAAKoD,gBAAL,GAAwB,KAAKxJ,WAAL,CAAiB3G,IAAjB,CAAsBoB,SAAtB,CAAgC,UAAApB,IAAI,EAAI;AAC9D,qBAAI,CAACA,IAAL,GAAYA,IAAZ;AACA,qBAAI,CAACoF,QAAL,GAAgBpF,IAAI,CAAC+C,QAArB;AACD,aAHuB,CAAxB;AAKD;;;qCAGkB;AACjB,iBAAKqN,WAAL,GAAmB,IAAI,wDAAJ,CAAc;AAC/B,yBAAW,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWnD,QAAjC;AADoB,aAAd,CAAnB;AAGD;;;qCAGU;AACT9M,mBAAO,CAAC0B,GAAR,CAAY,UAAZ,EAAwB,KAAK8E,WAAL,CAAiB3G,IAAjB,CAAsBuB,KAA9C;AACApB,mBAAO,CAAC0B,GAAR,CAAY,UAAZ,EAAwB,KAAK8E,WAAL,CAAiB3G,IAAjB,CAAsBuB,KAAtB,CAA4BwB,QAApD;AACA,iBAAK4D,WAAL,CAAiB0J,UAAjB,CAA4B,KAAKD,WAAL,CAAiB7O,KAA7C;AAEA,iBAAK6O,WAAL,CAAiBE,KAAjB;AAED;;;4CAEiBC,W,EAAa;AAC7B,gBAAIzF,IAAI,GAAG,IAAIrC,IAAJ,CAAS8H,WAAT,CAAX;AAEA,mBAAO,KAAKN,QAAL,CAAczH,SAAd,CAAwBsC,IAAxB,EAA8B,qCAA9B,CAAP;AACD;;;yCAGe0F,C,EAAGC,C,EAAC;AAClB,gBAAKD,CAAC,CAAC1F,IAAF,GAAS2F,CAAC,CAAC3F,IAAhB,EAAsB;AACpB,qBAAO,CAAP;AACD;;AACD,gBAAK0F,CAAC,CAAC1F,IAAF,GAAS2F,CAAC,CAAC3F,IAAhB,EAAsB;AACpB,qBAAO,CAAC,CAAR;AACD;;AACD,mBAAO,CAAP;AACD;;;yCAEc1F,Q,EAAoB;AAEjC,gBAAIA,QAAJ,EACE,OAAOA,QAAQ,CAACsL,IAAT,CAAc,KAAKC,cAAnB,CAAP;AAEF,mBAAO,EAAP;AACD;;;6CAEkB;AAEjB,gBAAIvL,QAAQ,GAAG,KAAKuB,WAAL,CAAiBiK,WAAjB,CAA6B,KAAKV,WAAlC,EAA+C,KAAK/M,eAApD,CAAf;AACA,iBAAK+M,WAAL;AACD;;;;;;;yBAtEUF,iB,EAAiB,mI,EAAA,yH;AAAA,O;;;cAAjBA,iB;AAAiB,qC;AAAA,iB;AAAA,e;AAAA,0kB;AAAA;AAAA;ACb9B;;AACE;;AAAI;;AAAW;;AAEf;;AAAgC;AAAA,qBAAY,IAAAxC,QAAA,EAAZ;AAAsB,aAAtB;;AAC9B;;AAIA;;AAAA;;AACA;;AAEU;;AACV;;AACF;;AAEA;;AACE;;AASF;;AAEA;;AAGF;;;;AA3BQ;;AAAA;;AAOI;;AAAA;;AAMmB;;AAAA;;AAWuB;;AAAA;;;;;;;;;;wEDdzCwC,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACT/E,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;;;;;;;;;;;;AEb9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKa0F,e,GAIX,2BAAc;AAAA;;AAFd,aAAAC,cAAA,GAAiB,IAAI,0DAAJ,EAAjB;AAEiB,O;;;yBAJND,e;AAAe,O;;;eAAfA,e;AAAe,iBAAfA,eAAe,K;AAAA,oBAFd;;;;;wEAEDA,e,EAAe;gBAH3B,wDAG2B;iBAHhB;AACVrN,sBAAU,EAAE;AADF,W;AAGgB,U;;;;;;;;;;;;;;;;;;ACL5B,UAAIf,GAAG,GAAG;AACT,gBAAQ,MADC;AAET,mBAAW,MAFF;AAGT,gBAAQ,MAHC;AAIT,mBAAW,MAJF;AAKT,sBAAc,MALL;AAMT,mBAAW,MANF;AAOT,sBAAc,MAPL;AAQT,mBAAW,MARF;AAST,sBAAc,MATL;AAUT,mBAAW,MAVF;AAWT,sBAAc,MAXL;AAYT,mBAAW,MAZF;AAaT,sBAAc,MAbL;AAcT,mBAAW,MAdF;AAeT,sBAAc,MAfL;AAgBT,mBAAW,MAhBF;AAiBT,gBAAQ,MAjBC;AAkBT,mBAAW,MAlBF;AAmBT,gBAAQ,MAnBC;AAoBT,mBAAW,MApBF;AAqBT,gBAAQ,MArBC;AAsBT,mBAAW,MAtBF;AAuBT,gBAAQ,MAvBC;AAwBT,mBAAW,MAxBF;AAyBT,gBAAQ,MAzBC;AA0BT,mBAAW,MA1BF;AA2BT,sBAAc,MA3BL;AA4BT,mBAAW,MA5BF;AA6BT,gBAAQ,MA7BC;AA8BT,mBAAW,MA9BF;AA+BT,gBAAQ,MA/BC;AAgCT,mBAAW,MAhCF;AAiCT,gBAAQ,MAjCC;AAkCT,mBAAW,MAlCF;AAmCT,gBAAQ,MAnCC;AAoCT,mBAAW,MApCF;AAqCT,gBAAQ,MArCC;AAsCT,mBAAW,MAtCF;AAuCT,gBAAQ,MAvCC;AAwCT,mBAAW,MAxCF;AAyCT,gBAAQ,MAzCC;AA0CT,mBAAW,MA1CF;AA2CT,gBAAQ,MA3CC;AA4CT,mBAAW,MA5CF;AA6CT,gBAAQ,MA7CC;AA8CT,mBAAW,MA9CF;AA+CT,sBAAc,MA/CL;AAgDT,mBAAW,MAhDF;AAiDT,sBAAc,MAjDL;AAkDT,mBAAW,MAlDF;AAmDT,gBAAQ,MAnDC;AAoDT,mBAAW,MApDF;AAqDT,gBAAQ,MArDC;AAsDT,mBAAW,MAtDF;AAuDT,mBAAW,MAvDF;AAwDT,sBAAc,MAxDL;AAyDT,mBAAW,MAzDF;AA0DT,sBAAc,MA1DL;AA2DT,mBAAW,MA3DF;AA4DT,sBAAc,MA5DL;AA6DT,mBAAW,MA7DF;AA8DT,sBAAc,MA9DL;AA+DT,mBAAW,MA/DF;AAgET,sBAAc,MAhEL;AAiET,mBAAW,MAjEF;AAkET,sBAAc,MAlEL;AAmET,mBAAW,MAnEF;AAoET,sBAAc,MApEL;AAqET,mBAAW,MArEF;AAsET,sBAAc,MAtEL;AAuET,gBAAQ,MAvEC;AAwET,mBAAW,MAxEF;AAyET,gBAAQ,MAzEC;AA0ET,mBAAW,MA1EF;AA2ET,sBAAc,MA3EL;AA4ET,mBAAW,MA5EF;AA6ET,sBAAc,MA7EL;AA8ET,mBAAW,MA9EF;AA+ET,sBAAc,MA/EL;AAgFT,mBAAW,MAhFF;AAiFT,gBAAQ,MAjFC;AAkFT,mBAAW,MAlFF;AAmFT,gBAAQ,MAnFC;AAoFT,mBAAW,MApFF;AAqFT,gBAAQ,MArFC;AAsFT,mBAAW,MAtFF;AAuFT,gBAAQ,MAvFC;AAwFT,mBAAW,MAxFF;AAyFT,iBAAS,MAzFA;AA0FT,oBAAY,MA1FH;AA2FT,gBAAQ,MA3FC;AA4FT,mBAAW,MA5FF;AA6FT,gBAAQ,MA7FC;AA8FT,mBAAW,MA9FF;AA+FT,sBAAc,MA/FL;AAgGT,mBAAW,MAhGF;AAiGT,sBAAc,MAjGL;AAkGT,mBAAW,MAlGF;AAmGT,gBAAQ,MAnGC;AAoGT,mBAAW,MApGF;AAqGT,gBAAQ,MArGC;AAsGT,mBAAW,MAtGF;AAuGT,gBAAQ,MAvGC;AAwGT,mBAAW,MAxGF;AAyGT,gBAAQ,MAzGC;AA0GT,mBAAW,MA1GF;AA2GT,sBAAc,MA3GL;AA4GT,yBAAiB,MA5GR;AA6GT,sBAAc,MA7GL;AA8GT,yBAAiB,MA9GR;AA+GT,gBAAQ,MA/GC;AAgHT,mBAAW,MAhHF;AAiHT,gBAAQ,MAjHC;AAkHT,mBAAW,MAlHF;AAmHT,gBAAQ,MAnHC;AAoHT,mBAAW,MApHF;AAqHT,gBAAQ,MArHC;AAsHT,mBAAW,MAtHF;AAuHT,gBAAQ,MAvHC;AAwHT,mBAAW,MAxHF;AAyHT,mBAAW,MAzHF;AA0HT,sBAAc,MA1HL;AA2HT,gBAAQ,MA3HC;AA4HT,mBAAW,MA5HF;AA6HT,gBAAQ,MA7HC;AA8HT,mBAAW,MA9HF;AA+HT,gBAAQ,MA/HC;AAgIT,mBAAW,MAhIF;AAiIT,sBAAc,MAjIL;AAkIT,mBAAW,MAlIF;AAmIT,gBAAQ,MAnIC;AAoIT,mBAAW,MApIF;AAqIT,gBAAQ,MArIC;AAsIT,mBAAW,MAtIF;AAuIT,gBAAQ,MAvIC;AAwIT,mBAAW,MAxIF;AAyIT,gBAAQ,MAzIC;AA0IT,mBAAW,MA1IF;AA2IT,gBAAQ,MA3IC;AA4IT,mBAAW,MA5IF;AA6IT,gBAAQ,MA7IC;AA8IT,mBAAW,MA9IF;AA+IT,gBAAQ,MA/IC;AAgJT,mBAAW,MAhJF;AAiJT,gBAAQ,MAjJC;AAkJT,mBAAW,MAlJF;AAmJT,gBAAQ,MAnJC;AAoJT,mBAAW,MApJF;AAqJT,gBAAQ,MArJC;AAsJT,mBAAW,MAtJF;AAuJT,gBAAQ,MAvJC;AAwJT,mBAAW,MAxJF;AAyJT,gBAAQ,MAzJC;AA0JT,mBAAW,MA1JF;AA2JT,gBAAQ,MA3JC;AA4JT,mBAAW,MA5JF;AA6JT,gBAAQ,MA7JC;AA8JT,mBAAW,MA9JF;AA+JT,gBAAQ,MA/JC;AAgKT,mBAAW,MAhKF;AAiKT,gBAAQ,MAjKC;AAkKT,mBAAW,MAlKF;AAmKT,gBAAQ,MAnKC;AAoKT,mBAAW,MApKF;AAqKT,gBAAQ,MArKC;AAsKT,mBAAW,MAtKF;AAuKT,gBAAQ,MAvKC;AAwKT,mBAAW,MAxKF;AAyKT,gBAAQ,MAzKC;AA0KT,mBAAW,MA1KF;AA2KT,sBAAc,MA3KL;AA4KT,mBAAW,MA5KF;AA6KT,gBAAQ,MA7KC;AA8KT,mBAAW,MA9KF;AA+KT,gBAAQ,MA/KC;AAgLT,mBAAW,MAhLF;AAiLT,gBAAQ,MAjLC;AAkLT,mBAAW,MAlLF;AAmLT,gBAAQ,MAnLC;AAoLT,mBAAW,MApLF;AAqLT,gBAAQ,MArLC;AAsLT,mBAAW,MAtLF;AAuLT,sBAAc,MAvLL;AAwLT,mBAAW,MAxLF;AAyLT,gBAAQ,MAzLC;AA0LT,mBAAW,MA1LF;AA2LT,oBAAY,MA3LH;AA4LT,uBAAe,MA5LN;AA6LT,mBAAW,MA7LF;AA8LT,sBAAc,MA9LL;AA+LT,gBAAQ,MA/LC;AAgMT,mBAAW,MAhMF;AAiMT,gBAAQ,MAjMC;AAkMT,mBAAW,MAlMF;AAmMT,sBAAc,MAnML;AAoMT,mBAAW,MApMF;AAqMT,gBAAQ,MArMC;AAsMT,mBAAW,MAtMF;AAuMT,gBAAQ,MAvMC;AAwMT,mBAAW,MAxMF;AAyMT,gBAAQ,MAzMC;AA0MT,mBAAW,MA1MF;AA2MT,gBAAQ,MA3MC;AA4MT,mBAAW,MA5MF;AA6MT,gBAAQ,MA7MC;AA8MT,mBAAW,MA9MF;AA+MT,gBAAQ,MA/MC;AAgNT,mBAAW,MAhNF;AAiNT,gBAAQ,MAjNC;AAkNT,mBAAW,MAlNF;AAmNT,gBAAQ,MAnNC;AAoNT,mBAAW,MApNF;AAqNT,gBAAQ,MArNC;AAsNT,qBAAa,MAtNJ;AAuNT,wBAAgB,MAvNP;AAwNT,mBAAW,MAxNF;AAyNT,gBAAQ,MAzNC;AA0NT,mBAAW,MA1NF;AA2NT,gBAAQ,MA3NC;AA4NT,mBAAW,MA5NF;AA6NT,gBAAQ,MA7NC;AA8NT,mBAAW,MA9NF;AA+NT,gBAAQ,MA/NC;AAgOT,mBAAW,MAhOF;AAiOT,gBAAQ,MAjOC;AAkOT,mBAAW,MAlOF;AAmOT,iBAAS,MAnOA;AAoOT,oBAAY,MApOH;AAqOT,gBAAQ,MArOC;AAsOT,mBAAW,MAtOF;AAuOT,gBAAQ,MAvOC;AAwOT,mBAAW,MAxOF;AAyOT,gBAAQ,MAzOC;AA0OT,mBAAW,MA1OF;AA2OT,mBAAW,MA3OF;AA4OT,sBAAc,MA5OL;AA6OT,iBAAS,MA7OA;AA8OT,oBAAY,MA9OH;AA+OT,gBAAQ,MA/OC;AAgPT,mBAAW,MAhPF;AAiPT,iBAAS,MAjPA;AAkPT,oBAAY,MAlPH;AAmPT,iBAAS,MAnPA;AAoPT,sBAAc,MApPL;AAqPT,yBAAiB,MArPR;AAsPT,oBAAY,MAtPH;AAuPT,mBAAW,MAvPF;AAwPT,sBAAc,MAxPL;AAyPT,gBAAQ,MAzPC;AA0PT,mBAAW,MA1PF;AA2PT,gBAAQ,MA3PC;AA4PT,mBAAW,MA5PF;AA6PT,gBAAQ,MA7PC;AA8PT,qBAAa,MA9PJ;AA+PT,wBAAgB,MA/PP;AAgQT,mBAAW,MAhQF;AAiQT,gBAAQ,MAjQC;AAkQT,mBAAW,MAlQF;AAmQT,sBAAc,MAnQL;AAoQT,yBAAiB,MApQR;AAqQT,gBAAQ,MArQC;AAsQT,mBAAW,MAtQF;AAuQT,mBAAW,MAvQF;AAwQT,sBAAc,MAxQL;AAyQT,mBAAW,MAzQF;AA0QT,sBAAc,MA1QL;AA2QT,mBAAW,MA3QF;AA4QT,sBAAc,MA5QL;AA6QT,mBAAW,MA7QF;AA8QT,sBAAc;AA9QL,OAAV;;AAkRA,eAASsO,cAAT,CAAwBC,GAAxB,EAA6B;AAC5B,YAAIpN,EAAE,GAAGqN,qBAAqB,CAACD,GAAD,CAA9B;AACA,eAAOE,mBAAmB,CAACtN,EAAD,CAA1B;AACA;;AACD,eAASqN,qBAAT,CAA+BD,GAA/B,EAAoC;AACnC,YAAG,CAACE,mBAAmB,CAACC,CAApB,CAAsB1O,GAAtB,EAA2BuO,GAA3B,CAAJ,EAAqC;AACpC,cAAII,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,WAAC,CAAC/M,IAAF,GAAS,kBAAT;AACA,gBAAM+M,CAAN;AACA;;AACD,eAAO3O,GAAG,CAACuO,GAAD,CAAV;AACA;;AACDD,oBAAc,CAACO,IAAf,GAAsB,SAASC,kBAAT,GAA8B;AACnD,eAAOC,MAAM,CAACF,IAAP,CAAY7O,GAAZ,CAAP;AACA,OAFD;;AAGAsO,oBAAc,CAACU,OAAf,GAAyBR,qBAAzB;AACAS,YAAM,CAACC,OAAP,GAAiBZ,cAAjB;AACAA,oBAAc,CAACnN,EAAf,GAAoB,MAApB;;;;;;;;;;;;;;;;ACnSA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;UAmBagO,Y;AAWX,8BAAoBC,UAApB,EACoBpL,MADpB,EAEoBiF,KAFpB,EAGoBoG,IAHpB,EAIoBC,SAJpB,EAKoBC,YALpB,EAMoBnT,WANpB,EAM8C;AAAA;;AAAA;;AAN1B,eAAAgT,UAAA,GAAAA,UAAA;AACA,eAAApL,MAAA,GAAAA,MAAA;AACA,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAAoG,IAAA,GAAAA,IAAA;AACA,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AACA,eAAAnT,WAAA,GAAAA,WAAA;AAhBpB,eAAAoT,aAAA,GAAgB,aAAhB;AAEA,eAAAC,SAAA,GAAY,cAAZ;AACA,eAAAC,QAAA,GAAkB,IAAlB;AACA,eAAA7N,KAAA,GAAQ,sBAAR;AAcI,eAAKuN,UAAL,CAAgBf,cAAhB,CAA+B1P,SAA/B,CAA0C,UAACgR,OAAD;AAAA,mBAAa,OAAI,CAACC,UAAL,CAAgBD,OAAhB,CAAb;AAAA,WAA1C,EAF0C,CAI5C;AACA;;AAEAN,cAAI,CAACQ,aAAL,CAAmB,sEAAnB;AAEAR,cAAI,CAACS,SAAL,CAAenR,SAAf,CAAyB,YAAM;AAC7B,mBAAI,CAACkP,KAAL;AACD,WAFD;AAIAwB,cAAI,CAACU,SAAL,CAAepR,SAAf,CAAyB,YAAM;AAC7B,mBAAI,CAACgL,MAAL;AACD,WAFD;AAIA0F,cAAI,CAACW,WAAL,CAAiBrR,SAAjB,CAA2B,YAAM;AAC/B,mBAAI,CAACsR,UAAL,CAAgBC,IAAhB;AACD,WAFD;AAIAb,cAAI,CAACc,gBAAL,CAAsBxR,SAAtB,CAAgC,UAACyR,SAAD,EAAe;AAC7C,mBAAI,CAACX,SAAL,GAAiB,+BAA+BW,SAA/B,GAA2C,gGAA5D;AACD,WAFD;AAIAd,mBAAS,CAACe,QAAV,CAAmB,EAAnB;AACAf,mBAAS,CAACgB,MAAV,CAAiB3R,SAAjB,CAA2B;AAAA,mBAAM,OAAI,CAAC+Q,QAAL,GAAgB,IAAI1J,IAAJ,EAAtB;AAAA,WAA3B;AAEA,eAAK6H,KAAL;AACD;;;;kCAEO;AACN,iBAAKwB,IAAL,CAAUkB,KAAV;AACD;;;2CAEa;AACZ,iBAAKN,UAAL,CAAgBO,IAAhB;AACD;;;iCAEM;AACL,iBAAKP,UAAL,CAAgBO,IAAhB;AACA,iBAAK3C,KAAL;AACD;;;mCAEQ;AACR,iBAAKoC,UAAL,CAAgBO,IAAhB;AAEA,iBAAKpU,WAAL,CAAiBuN,MAAjB;AACA,iBAAK3F,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,GAAD,CAArB;AACD;;;qCAEWyH,O,EAAiB;AAC1B,iBAAKH,aAAL,GAAqBG,OAArB;AACD;;;;;;;yBAtEUR,Y,EAAY,2I,EAAA,uH,EAAA,+H,EAAA,mH,EAAA,6H,EAAA,mI,EAAA,mI;AAAA,O;;;cAAZA,Y;AAAY,iC;AAAA;AAAA;;;;;;;;;;;;;;;ACnBzB;;AAAY;AAAA,qBAAkB,IAAAS,UAAA,QAAlB;AAAoC,aAApC;;AAAsC;;AAElD;;AAEA;;AAEE;;AACE;;AACE;;AACE;;AAAyD;;AAAoB;;AAC7E;;AAAkE;AAAA,qBAAS,IAAAa,cAAA,EAAT;AAAyB,aAAzB;;AAChE;;AAAyB;;AAAO;;AAClC;;AACF;;AACA;;AACG;;AACD;;AACE;;AACI;;AAAsB;AAAA,qBAAS,IAAA9G,MAAA,EAAT;AAAiB,aAAjB;;AAA0C;;AAAI;;AACxE;;AACA;;AACI;;AAAsB;AAAA,qBAAS,IAAA+G,IAAA,EAAT;AAAe,aAAf;;AAAyC;;AAAS;;AAC5E;;AACF;;AACF;;AACF;;AACF;;AACF;;;;AAZS;;AAAA;;;;;;;;;wEDIIvB,Y,EAAY;gBALxB,uDAKwB;iBALd;AACT3G,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,sBAFJ;AAGTC,qBAAS,EAAE,CAAC,qBAAD;AAHF,W;AAKc,U;;;;;;;;;;;;;;;;;AASqBuH,oBAAU,EAAE,CAAF;kBAArD,uDAAqD;mBAA3C,Y,EAAc;AAAE,wBAAQ;AAAV,a;AAA6B,WAAE;;;;;;;;;;;;;;;;;;;AE1B1D;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAAaU,a,GAKT,uBAAYxP,EAAZ,EAAgBC,SAAhB,EAA2B7D,IAA3B,EAAkC;AAAA;;AAChC,aAAKsC,GAAL,GAAWsB,EAAX;AACA,aAAK0G,aAAL,GAAqB;AAAEzG,mBAAS,EAAEA;AAAb,SAArB;AACA,aAAK7D,IAAL,GAAYA,IAAZ;AACD,O;;UAGQqT,I;AAYX,sBAAYhR,IAAZ,EAAmB;AAAA;;AACjB,cAAIA,IAAJ,EAAU;AACR,iBAAKC,GAAL,GAAWD,IAAI,CAACC,GAAhB;AACA,iBAAK4K,KAAL,GAAa7K,IAAI,CAAC6K,KAAlB;AACA,iBAAK/I,IAAL,GAAY9B,IAAI,CAAC8B,IAAjB;AACA,iBAAKwL,cAAL,GAAsBtN,IAAI,CAACsN,cAA3B;AACA,iBAAKxC,aAAL,GAAqB9K,IAAI,CAAC8K,aAA1B;AACA,iBAAK3K,QAAL,GAAgBH,IAAI,CAACG,QAArB;AACA,iBAAKe,SAAL,GAAiBlB,IAAI,CAACkB,SAAtB;AACA,iBAAKkG,OAAL,GAAepH,IAAI,CAACoH,OAApB;AACA,iBAAK6J,MAAL,GAAcjR,IAAI,CAACiR,MAAnB;AACA,iBAAK/F,QAAL,GAAgBlL,IAAI,CAACkL,QAArB;AACD;AACF;;;;8BAEW;AACV,mBAAO,KAAK+F,MAAZ;AACD;;;;;;;;;;;;;;;;;;;;;AC3CH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWA,iFAAmB,oEAAnB;;UAuFaC,S;;;;;cAAAA,S;AAAS,oBAHR,4DAGQ;;;;2BAATA,S;AAAS,S;AAAA,mBALT,CAAC;AAAEC,iBAAO,EAAE,uDAAX;AAAsBC,kBAAQ,EAAE;AAAhC,SAAD,EACC,wDADD,C;AACU,kBAfZ,CACP,uEADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,qEAJO,EAKP,oEALO,EAMP,oEANO,EAOP,4FAPO,EAQP,wEARO,EASP,4DATO,EAUP,0EAAsBC,OAAtB,EAVO,EAWP,6DAXO,EAYP,iEAAYA,OAAZ,EAZO,CAeY;;;;4HAIVH,S,EAAS;AAAA,yBA7ClB,4DA6CkB,EA5ClB,kGA4CkB,EA3ClB,oFA2CkB,EA1ClB,sGA0CkB,EAzClB,iFAyCkB,EAxClB,uFAwCkB,EAvClB,uFAuCkB,EAtClB,4GAsCkB,EArClB,qGAqCkB,EApClB,2GAoCkB,EAnClB,8EAmCkB,EAlClB,4FAkCkB,EAjClB,iGAiCkB,EAhClB,6GAgCkB,EA/BlB,oEA+BkB,EA9BlB,wGA8BkB,EA7BlB,4GA6BkB,EA5BlB,wGA4BkB,EA3BlB,yGA2BkB,EA1BlB,0FA0BkB,EAzBlB,yGAyBkB,EAxBlB,uHAwBkB,EAvBlB,6FAuBkB,EAtBlB,+FAsBkB,EArBlB,oFAqBkB;AArBH,oBAGf,uEAHe,EAIf,0DAJe,EAKf,kEALe,EAMf,qEANe,EAOf,oEAPe,EAQf,oEARe,EASf,4FATe,EAUf,wEAVe,EAWf,4DAXe,EAWD,yEAXC,EAaf,6DAbe,EAaH,gEAbG;AAqBG,S;AARN,O;;;;;wEAQHA,S,EAAS;gBA/CrB,sDA+CqB;iBA/CZ;AACRI,wBAAY,EAAE,CACZ,4DADY,EAEZ,kGAFY,EAGZ,oFAHY,EAIZ,sGAJY,EAKZ,iFALY,EAMZ,uFANY,EAOZ,uFAPY,EAQZ,4GARY,EASZ,qGATY,EAUZ,2GAVY,EAWZ,8EAXY,EAYZ,4FAZY,EAaZ,iGAbY,EAcZ,6GAdY,EAeZ,oEAfY,EAgBZ,wGAhBY,EAiBZ,4GAjBY,EAkBZ,wGAlBY,EAmBZ,yGAnBY,EAoBZ,0FApBY,EAqBZ,yGArBY,EAsBZ,uHAtBY,EAuBZ,6FAvBY,EAwBZ,+FAxBY,EAyBZ,oFAzBY,CADN;AA4BRC,mBAAO,EAAE,CACP,uEADO,EAEP,0DAFO,EAGP,kEAHO,EAIP,qEAJO,EAKP,oEALO,EAMP,oEANO,EAOP,4FAPO,EAQP,wEARO,EASP,4DATO,EAUP,0EAAsBF,OAAtB,EAVO,EAWP,6DAXO,EAYP,iEAAYA,OAAZ,EAZO,CA5BD;AA0CRG,qBAAS,EAAE,CAAC;AAAEL,qBAAO,EAAE,uDAAX;AAAsBC,sBAAQ,EAAE;AAAhC,aAAD,EACC,wDADD,CA1CH;AA4CRK,qBAAS,EAAE,CAAC,4DAAD;AA5CH,W;AA+CY,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FlB;;AACE;;AAAG;;AAAW;;AAChB;;;;;;AADK;;AAAA;;;;;;AAEL;;AACE;;AACF;;;;;;;;AACA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACvB;;AACE;;AAAwC;;AAAM;;AAC9C;;AAIF;;AACA;;AACE;;AAA2C;;AAAK;;AAChD;;AAQF;;AACA;;AACE;;AAIE;;AACF;;AACF;;AAEA;;AAEA;;AACE;;AAA8C;;AAAU;;AAAK;;AAC/D;;AAEF;;;;;;AAXM;;AAAA;;;;UCjBGC,uB;AAOX,yCAAoBlV,WAApB,EACmB4H,MADnB,EAEoBiF,KAFpB,EAE2C;AAAA;;AAFvB,eAAA7M,WAAA,GAAAA,WAAA;AACD,eAAA4H,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AAPpB,eAAAsI,WAAA,GAAc,IAAd;AACA,eAAAC,SAAA,GAAY,KAAZ;AACA,eAAAhU,KAAA,GAAgB,IAAhB;;AACA,eAAAiU,IAAA,GAAO,UAAAC,EAAE;AAAA,mBAAI,IAAIC,OAAJ,CAAY,UAAA9T,GAAG;AAAA,qBAAI+T,UAAU,CAAC/T,GAAD,EAAM6T,EAAN,CAAd;AAAA,aAAf,CAAJ;AAAA,WAAT;AAI6C;;;;yCAE9B;AACb,iBAAKH,WAAL,GAAmB,CAAC,KAAKA,WAAzB;AACD;;;mCAEcM,I,EAAc;;;;;;;;;0BAEtBA,IAAI,CAACC,K;;;;;;;;AAGJrH,2B,GAAQoH,IAAI,CAAC/S,KAAL,CAAW2L,K;AACnBK,8B,GAAW+G,IAAI,CAAC/S,KAAL,CAAWgM,Q;AAI5B,2BAAK0G,SAAL,GAAiB,IAAjB;;AAEA,6BAAM,KAAKC,IAAL,CAAU,IAAV,CAAN;;;AAGA,2BAAKrV,WAAL,CAAiByO,KAAjB,CAAuBJ,KAAvB,EAA8BK,QAA9B,EACiBnM,SADjB,CAEoB,UAAAe,OAAO,EAAI;AACT,+BAAI,CAAC8R,SAAL,GAAiB,KAAjB;;AACA,+BAAI,CAACxN,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,QAAD,CAArB;AACD,uBALrB,EAMoB,UAAA1H,YAAY,EAAI;AACd9C,+BAAO,CAAC0B,GAAR,CAAYoB,YAAZ;AACA,+BAAI,CAAChD,KAAL,GAAagD,YAAb;AACA,+BAAI,CAACgR,SAAL,GAAiB,KAAjB;AACD,uBAVrB;AAYAK,0BAAI,CAAChE,KAAL;;;;;;;;;AAED;;;;;;;yBA5CUyD,uB,EAAuB,mI,EAAA,uH,EAAA,+H;AAAA,O;;;cAAvBA,uB;AAAuB,2C;AAAA,gB;AAAA,e;AAAA,02B;AAAA;AAAA;ADdpC;;AACE;;AACE;;AAGA;;AAGA;;AAmCF;;AACF;;;;AA1CoC;;AAAA;;AAG3B;;AAAA;;AAGoD;;AAAA;;;;;;;;;wECMhDA,uB,EAAuB;gBANnC,uDAMmC;iBANzB;AACT9I,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAMyB,U;;;;;;;;;;;;;;;;;;;;;;;;;;ACfpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOaqJ,qB;AAEX,yCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,qB;AAAqB,O;;;cAArBA,qB;AAAqB,yC;AAAA,gB;AAAA,e;AAAA;AAAA;ACPlC;;AAAG;;AAAmB;;;;;;;;wEDOTA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACTvJ,oBAAQ,EAAE,kBADD;AAETC,uBAAW,EAAE,+BAFJ;AAGTC,qBAAS,EAAE,CAAC,8BAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;AEPlC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAOasJ,gB;AAEX,oCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,gB;AAAgB,O;;;cAAhBA,gB;AAAgB,oC;AAAA,gB;AAAA,e;AAAA,sC;AAAA;AAAA;ACP7B;;;;;;;;wEDOaA,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTxJ,oBAAQ,EAAE,aADD;AAETC,uBAAW,EAAE,0BAFJ;AAGTC,qBAAS,EAAE,CAAC,yBAAD;AAHF,W;AAKkB,U;;;;;;;;;;;;;;;;;;;;AEP7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACmBc;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAQ;;AACpC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;AAQN;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAY;;AACxC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;AAQN;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJN;;AACE;;AACE;;AAA4B;;AAAS;;AACrC;;AAGF;;AACF;;;;;;AAJU;;AAAA;;;;;;;;;;;;;;AAjClB;;AACE;;AACE;;AAAsB;;AAAM;;AAC5B;;AAAqC;;AAA4B;;AAAqB;;AAAQ;;;;AAA0C;;AAC1I;;AACA;;AACE;;AACE;;AACF;;AACA;;AACI;;AAAwB;;AAAoB;;AAC5C;;AAA2B;;AAAuB;;AAClD;;AAEA;;AAQA;;AAQA;;AAQA;;AACE;;AACE;;AAA4B;;AAAQ;;AACpC;;AACA;;AAA4B;;AAAI;;AAChC;;AACF;;AACF;;AACA;;AACE;;AACI;;AACyC;;AAAS;;AACtD;;AACA;;AAA8B;;AAAC;;AAC/B;;AACE;;AACE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA8C;;AAAsB;;AACxE;;AACF;;AACJ;;AACF;;AACF;;;;;;AAxDkG;;AAAA;;AAIvF;;AAAA;;AAGqB;;AAAA;;AACG;;AAAA;;AAGtB;;AAAA;;AAQA;;AAAA;;AAQA;;AAAA;;AAWD;;AAAA;;AAEA;;AAAA;;AAMM;;AAAA;;;;;;AAlDpB;;AACE;;AA4DF;;;;;;AA5DO;;AAAA;;;;UDYMuJ,iB;AAMX,mCAAoB7V,WAApB,EACoB8H,WADpB,EAC8C;AAAA;;AAD1B,eAAA9H,WAAA,GAAAA,WAAA;AACA,eAAA8H,WAAA,GAAAA,WAAA;AAHb,eAAAnE,QAAA,GAA4B,EAA5B;AAG0C;;;;qCAEzC;AAAA;;AACN,iBAAKqE,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAACA,IAAL,GAAYA,IAAZ;;AACA,uBAAI,CAACsS,YAAL;AACD;AACF,aALuB,CAAxB;AAMD;;;yCAEc;AAAA;;AACb,iBAAKnS,QAAL,GAAgB,EAAhB;;AADa,wDAEa,KAAKH,IAAL,CAAUG,QAFvB;AAAA;;AAAA;AAAA;AAAA,oBAEJ8H,aAFI;;AAGX,uBAAI,CAAC3D,WAAL,CAAiB6F,SAAjB,CAA2BlC,aAAa,CAAChI,GAAzC,EACiBlB,SADjB,CAEoB,UAAApB,IAAI,EAAI;AACNsK,+BAAa,CAACtK,IAAd,GAAqBA,IAArB;;AAEA,yBAAI,CAACwC,QAAL,CAAcuH,IAAd,CAAmBO,aAAnB;;AACA,yBAAI,CAACsK,YAAL,CAAkB,OAAI,CAACpS,QAAvB;;AAEA,yBAAI,CAAC3D,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BiB,QAA5B,GAAuC,OAAI,CAACA,QAA5C;AACD,iBATrB,EAUoB,UAAAZ,GAAG,EAAI;AACLzB,yBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,iBAZrB;AAHW;;AAEb,qEAA8C;AAAA;AAe7C;AAjBY;AAAA;AAAA;AAAA;AAAA;AAkBd;;;8CAEmBM,M,EAAgB;AAAA;;AAClC,iBAAKyE,WAAL,CACG4D,sBADH,CAC0BrI,MAD1B,EAEGd,SAFH,CAEa,UAAAoJ,YAAY,EAAI;AACzB,kBAAIP,KAAK,GAAG,OAAI,CAACzH,QAAL,CAAc0H,SAAd,CAAwB,UAAAxH,KAAK;AAAA,uBAAIA,KAAK,CAACJ,GAAN,IAAakI,YAAY,CAAClI,GAA9B;AAAA,eAA7B,CAAZ;;AACA,kBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,uBAAI,CAACzH,QAAL,CAAc2H,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;;AAEA,uBAAI,CAACpL,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BiB,QAA5B,CAAqC0H,SAArC,CAA+C,UAAAxH,KAAK;AAAA,yBAAIA,KAAK,CAACJ,GAAN,IAAakI,YAAY,CAAClI,GAA9B;AAAA,iBAApD;;AACA,oBAAI2H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,yBAAI,CAACpL,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAtB,CAA4BiB,QAA5B,CAAqC2H,MAArC,CAA4CF,KAA5C,EAAmD,CAAnD;AACF;;AACD,uBAAI,CAACpL,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2B,OAAI,CAACzC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjD;AACF;AACH,aAbF;AAcC,mBAAO,IAAP;AACF;;;wCAEciP,C,EAAGC,C,EAAC;AACjB,gBAAKD,CAAC,CAAClG,aAAF,CAAgBzG,SAAhB,GAA4B4M,CAAC,CAACnG,aAAF,CAAgBzG,SAAjD,EAA4D;AAC1D,qBAAO,CAAP;AACD;;AACD,gBAAK2M,CAAC,CAAClG,aAAF,CAAgBzG,SAAhB,GAA4B4M,CAAC,CAACnG,aAAF,CAAgBzG,SAAjD,EAA4D;AAC1D,qBAAO,CAAC,CAAR;AACD;;AACD,mBAAO,CAAP;AACD;;;uCAEYrB,Q,EAA0B;AACrC,mBAAOA,QAAQ,CAACkO,IAAT,CAAc,KAAKmE,aAAnB,CAAP;AACD;;;;;;;yBApEUH,iB,EAAiB,mI,EAAA,mI;AAAA,O;;;cAAjBA,iB;AAAiB,sC;AAAA,gB;AAAA,e;AAAA,skB;AAAA;AAAA;ACb9B;;;;AAAK;;;;;;;;;;wEDaQA,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACTzJ,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;;;;;;;;;;;;AEd9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKa2J,a,GAKX,yBAAc;AAAA;;AAHd,aAAAjJ,gBAAA,GAA2B,EAA3B;AACA,aAAAP,kBAAA,GAAqB,IAAI,0DAAJ,EAArB;AAEiB,O;;;yBALNwJ,a;AAAa,O;;;eAAbA,a;AAAa,iBAAbA,aAAa,K;AAAA,oBAFZ;;;;;wEAEDA,a,EAAa;gBAHzB,wDAGyB;iBAHd;AACVtR,sBAAU,EAAE;AADF,W;AAGc,U;;;;;;;;;;;;;;;;;;;;ACL1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;ACCE;;AACE;;AACE;;AAAsB;;AAAM;;AAC5B;;AAAqC;;AAA4B;;AAAmB;;AACpF;;;;;;AAAoF;;AACtF;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;AAAuC;;AAAmB;;AAE1D;;AACE;;AACE;;AAGI;;AAA4B;;AAAe;;AAC/C;;AACD;;AACA;;AACE;;AAAmB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACf;;AAA4B;;AAAkB;;AAClD;;AACD;;AACN;;AACA;;AACF;;AAEF;;;;;;AA1BI;;AAAA;;AAIO;;AAAA;;AAGkC;;AAAA;;AAK/B;;AAAA,+KAAsC,UAAtC,EAAsC,UAAtC;;;;;;AAjBhB;;AACE;;AAgCF;;;;;;AAhC8B;;AAAA;;;;UDcjBuR,qB;AAMX,uCAAoBlW,WAApB,EACoB8H,WADpB,EAC8C;AAAA;;AAD1B,eAAA9H,WAAA,GAAAA,WAAA;AACA,eAAA8H,WAAA,GAAAA,WAAA;AALZ,eAAAE,gBAAA,GAAmB,IAAI,iDAAJ,EAAnB;AAED,eAAAzB,QAAA,GAAW,EAAX;AAG0C;;;;qCAEzC;AAAA;;AACN,iBAAKyB,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,kBAAIA,IAAJ,EAAU;AACR,uBAAI,CAAC2S,YAAL;AACD;AACF,aAJuB,CAAxB;AAMA,iBAAKnW,WAAL,CAAiBwD,IAAjB,CAAsBf,IAAtB,CAA2B,KAAKzC,WAAL,CAAiBwD,IAAjB,CAAsBd,KAAjD;AACD;;;yCAEsB;AAAA;;AACrB,iBAAK1C,WAAL,CAAiB+R,WAAjB,GACiBxP,SADjB,CAEoB,UAAAgE,QAAQ,EAAI;AACV,qBAAI,CAACA,QAAL,GAAgBA,QAAhB;AACD,aAJrB,EAKoB,UAAAnC,YAAY,EAAI;AACd9C,qBAAO,CAAC0B,GAAR,CAAYoB,YAAZ;AACD,aAPrB;AASD;;;wCAEqBK,S,EAAW;AAAA;;AAC/B,iBAAKqD,WAAL,CAAiBsO,aAAjB,CAA+B3R,SAA/B,EACiBlC,SADjB,CAC4B,UAAAkC,SAAS,EAAI;AACvB,kBAAM2G,KAAK,GAAG,OAAI,CAAC7E,QAAL,CAAc8E,SAAd,CAAwB,UAAAtH,OAAO;AAAA,uBAAIA,OAAO,CAACN,GAAR,IAAegB,SAAnB;AAAA,eAA/B,CAAd;;AAEA,kBAAI2G,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,uBAAI,CAAC7E,QAAL,CAAc+E,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACF;AACF,aAPjB;AAQD;;;wCAEU;AACT,iBAAKpD,gBAAL,CAAsBmE,WAAtB;AACD;;;;;;;yBA5CU+J,qB,EAAqB,mI,EAAA,mI;AAAA,O;;;cAArBA,qB;AAAqB,0C;AAAA,gB;AAAA,e;AAAA,0d;AAAA;AAAA;ACflC;;;;AAAK;;;;;;;;;;wEDeQA,qB,EAAqB;gBALjC,uDAKiC;iBALvB;AACT9J,oBAAQ,EAAE,mBADD;AAETC,uBAAW,EAAE,gCAFJ;AAGTC,qBAAS,EAAE,CAAC,+BAAD;AAHF,W;AAKuB,U;;;;;;;;;;;;;;;;;;;;;;;;AEflC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACUQ;;AAEM;;AACN;;;;;;AASA;;AAEM;;AACN;;;;;;AA6BE;;AAEM;;AACN;;;;;;;;AAPF;;AACE;;AAEA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA4B;;AAAO;;AAC5D;;AAIF;;;;;;;;AANU;;AAAA;;AAGF;;AAAA;;;;;;AAgBN;;AAEM;;AACN;;;;;;;;AAPF;;AACE;;AAEA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA+B;;AAAO;;AAC/D;;AAIF;;;;;;;;AANU;;AAAA;;AAGF;;AAAA;;;;;;AAgBN;;AAEM;;AACN;;;;;;;;AAPF;;AACE;;AAEA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAgC;;AAAO;;AAChE;;AAIF;;;;;;;;AANU;;AAAA;;AAGF;;AAAA;;;;;;AAcN;;AAEM;;AACN;;;;;;AAWM;;AAAsD;;AAAwB;;;;;;AAC9E;;AAEqD;;AAAmB;;;;;;AAL9E;;AAEM;;AACA;;AAGN;;;;;;AAJY;;AAAA;;AACA;;AAAA;;;;;;AA0CN;;AAAuD;;AAA4B;;;;;;AAFzF;;AAEM;;AACN;;;;;;AADY;;AAAA;;;;;;AA8BZ;;AAEM;;AACN;;;;;;;;AAUF;;AACE;;AAEA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAA2B;;AAAO;;AAC7D;;;;;;AAFU;;AAAA;;;;;;;;AAwBV;;AACE;;AAEA;;AAAyB;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAyB;;AAAO;;AAC3D;;;;;;AAFU;;AAAA;;;;UD1NL+J,gB;AAcX,kCAAmBzO,MAAnB,EACoBiF,KADpB,EAEoB/E,WAFpB,EAE8C;AAAA;;AAF3B,eAAAF,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAA/E,WAAA,GAAAA,WAAA;AAdpB,eAAAwO,MAAA,GAAS,iCAAT;AAEA,eAAAC,QAAA,GAAW,KAAX;AAOA,eAAAC,WAAA,GAAwB,EAAxB;AACA,eAAArV,IAAA,GAAa,IAAI,uDAAJ,EAAb;AAIiD;;;;qCAEzC;AAAA;;AAEN,iBAAK8N,iBAAL,GAAyB,KAAKpC,KAAL,CAAWd,WAAX,CAAuBxJ,SAAvB,CACjB,UAAC3C,MAAD,EAAoB;AAChB,kBAAIA,MAAM,CAACmF,EAAX,EACE,OAAI,CAAC+C,WAAL,CACG6F,SADH,CACa/N,MAAM,CAACmF,EADpB,EAEGxC,SAFH,CAGI,UAAApB,IAAI,EAAI;AACN,uBAAI,CAACA,IAAL,GAAYA,IAAZ;;AACA,uBAAI,CAAC+M,QAAL;AACD,eANL,EAOI,UAAAnL,GAAG,EAAI;AACLzB,uBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,eATL;AAUE;AACP,aAdgB,CAAzB;AAiBA,iBAAKmL,QAAL;AACD;;;oCAESd,K,EAAO;AACf,iBAAKqJ,YAAL,CAAkBC,aAAlB,CAAgC7I,GAAhC,GAAsCT,KAAK,CAACC,MAAN,CAAa3K,KAAnD;AACD;;;wCAEa;AACZ,gBAAMiU,OAAO,GAAG,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWvI,QAAjC,CAAhB;AACY,iBAAKwI,QAAL,CAActU,GAAd,CAAkB,QAAlB,EAA6B4I,IAA7B,CAAkCyL,OAAlC;AACb;;;yCACcE,C,EAAW;AACZ,iBAAKD,QAAL,CAActU,GAAd,CAAkB,QAAlB,EAA6BwU,QAA7B,CAAsCD,CAAtC;AACb;;;8CACmB;AAClB,mBAAmB,KAAKD,QAAL,CAActU,GAAd,CAAkB,QAAlB,EAA6ByU,QAAhD;AACD;;;2CAEgB;AACf,gBAAMJ,OAAO,GAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAAhB;AACY,iBAAKC,QAAL,CAActU,GAAd,CAAkB,WAAlB,EAAgC4I,IAAhC,CAAqCyL,OAArC;AACb;;;4CACiBE,C,EAAW;AACf,iBAAKD,QAAL,CAActU,GAAd,CAAkB,WAAlB,EAAgCwU,QAAhC,CAAyCD,CAAzC;AACb;;;iDACsB;AACrB,mBAAmB,KAAKD,QAAL,CAActU,GAAd,CAAkB,WAAlB,EAAgCyU,QAAnD;AACD;;;4CAEiB;AAChB,gBAAMJ,OAAO,GAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAAhB;AACY,iBAAKC,QAAL,CAActU,GAAd,CAAkB,YAAlB,EAAiC4I,IAAjC,CAAsCyL,OAAtC;AACb;;;6CACkBE,C,EAAW;AAChB,iBAAKD,QAAL,CAActU,GAAd,CAAkB,YAAlB,EAAiCwU,QAAjC,CAA0CD,CAA1C;AACb;;;kDACuB;AACtB,mBAAmB,KAAKD,QAAL,CAActU,GAAd,CAAkB,YAAlB,EAAiCyU,QAApD;AACD;;;uCAEY;AACX,gBAAMJ,OAAO,GAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAAhB;AACY,iBAAKC,QAAL,CAActU,GAAd,CAAkB,OAAlB,EAA4B4I,IAA5B,CAAiCyL,OAAjC;AACb;;;wCACaE,C,EAAW;AACX,iBAAKD,QAAL,CAActU,GAAd,CAAkB,OAAlB,EAA4BwU,QAA5B,CAAqCD,CAArC;AACb;;;6CACkB;AACjB,mBAAmB,KAAKD,QAAL,CAActU,GAAd,CAAkB,OAAlB,EAA4ByU,QAA/C;AACD;;;qCAEU;AACT,gBAAMJ,OAAO,GAAG,IAAI,0DAAJ,CAAgB,IAAhB,CAAhB;AACY,iBAAKC,QAAL,CAActU,GAAd,CAAkB,MAAlB,EAA2B4I,IAA3B,CAAgCyL,OAAhC;AACb;;;sCACWE,C,EAAW;AACT,iBAAKD,QAAL,CAActU,GAAd,CAAkB,MAAlB,EAA2BwU,QAA3B,CAAoCD,CAApC;AACb;;;4CACiB;AAChB,mBAAmB,KAAKD,QAAL,CAActU,GAAd,CAAkB,MAAlB,EAA2ByU,QAA9C;AACD;;;qCAEU;AAAA;;AAET,gBAAM5V,IAAI,GAAG,IAAI,uDAAJ,CAAS,KAAKyV,QAAL,CAAclU,KAAvB,CAAb;AAEA,iBAAKoF,WAAL,CACGkP,OADH,CACW7V,IADX,EAEGoB,SAFH,CAGI,UAAApB,IAAI,EAAI;AACNG,qBAAO,CAAC0B,GAAR,CAAY,MAAZ,EAAoB7B,IAApB;;AAEA,qBAAI,CAACyG,MAAL,CAAYkE,QAAZ,CAAqB,CAAC,OAAD,EAAU,OAAV,CAArB,EAAyC;AAAEC,2BAAW,EAAE;AAAEhH,oBAAE,EAAE5D,IAAI,CAACsC;AAAX;AAAf,eAAzC;AACD,aAPL,EAQI,UAAAV,GAAG,EAAI;AACLzB,qBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,aAVL,EAJS,CAiBT;AAED,W,CACD;AACE;AACF;;;;qCAEmB;AACjB,gBAAIkU,MAAM,GAAG,0DAAb;AAEA3V,mBAAO,CAAC0B,GAAR,CAAY,YAAZ,EAA0B,KAAK7B,IAA/B;AAGA,gBAAI+V,iBAAiB,GAAG,EAAxB;;AACA,gBAAI,KAAK/V,IAAL,CAAUsF,OAAd,EAAuB;AAAA,0DACF,KAAKtF,IAAL,CAAUsF,OADR;AAAA;;AAAA;AACrB,uEAAsC;AAAA,sBAA7BC,MAA6B;AACpCwQ,mCAAiB,CAAChM,IAAlB,CAAuB,IAAI,0DAAJ,CAAgBxE,MAAM,CAACpB,IAAvB,EAA6B,0DAAW8I,QAAxC,CAAvB;AACD;AAHoB;AAAA;AAAA;AAAA;AAAA;AAItB,aAJD,MAIO;AAAE8I,+BAAiB,CAAChM,IAAlB,CAAuB,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWkD,QAAjC,CAAvB;AAAoE;;AAE7E,gBAAI+I,oBAAoB,GAAG,EAA3B;;AACA,gBAAI,KAAKhW,IAAL,CAAUyF,UAAd,EAA0B;AAAA,0DACF,KAAKzF,IAAL,CAAUyF,UADR;AAAA;;AAAA;AACxB,uEAA4C;AAAA,sBAAnCC,SAAmC;AAC1CsQ,sCAAoB,CAACjM,IAArB,CAA0B,IAAI,0DAAJ,CAAgBrE,SAAS,CAACvB,IAA1B,EAAgC,0DAAW8I,QAA3C,CAA1B;AACD;AAHuB;AAAA;AAAA;AAAA;AAAA;AAIzB,aAJD,MAIO;AAAE+I,kCAAoB,CAACjM,IAArB,CAA0B,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWkD,QAAjC,CAA1B;AAAuE;;AAEhF,gBAAIgJ,qBAAqB,GAAG,EAA5B;;AACA,gBAAI,KAAKjW,IAAL,CAAU2F,WAAd,EAA2B;AAAA,0DACF,KAAK3F,IAAL,CAAU2F,WADR;AAAA;;AAAA;AACzB,uEAA8C;AAAA,sBAArCC,UAAqC;AAC5CqQ,uCAAqB,CAAClM,IAAtB,CAA2B,IAAI,0DAAJ,CAAgBnE,UAAU,CAACzB,IAA3B,EAAiC,0DAAW8I,QAA5C,CAA3B;AACD;AAHwB;AAAA;AAAA;AAAA;AAAA;AAI1B,aAJD,MAIO;AAAEgJ,mCAAqB,CAAClM,IAAtB,CAA2B,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWkD,QAAjC,CAA3B;AAAwE;;AAEjF,gBAAIiJ,gBAAgB,GAAG,EAAvB;;AACA,gBAAI,KAAKlW,IAAL,CAAU6F,MAAd,EAAsB;AAAA,0DACF,KAAK7F,IAAL,CAAU6F,MADR;AAAA;;AAAA;AACpB,uEAAoC;AAAA,sBAA3BC,KAA2B;AAClCoQ,kCAAgB,CAACnM,IAAjB,CAAsB,IAAI,0DAAJ,CAAgBjE,KAAK,CAAC3B,IAAtB,EAA4B,0DAAW8I,QAAvC,CAAtB;AACD;AAHmB;AAAA;AAAA;AAAA;AAAA;AAIrB,aAJD,MAIO;AAAEiJ,8BAAgB,CAACnM,IAAjB,CAAsB,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWkD,QAAjC,CAAtB;AAAmE;;AAE5E,gBAAIkJ,eAAe,GAAG,EAAtB;;AACA,gBAAI,KAAKnW,IAAL,CAAU+F,IAAd,EAAoB;AAAA,0DACF,KAAK/F,IAAL,CAAU+F,IADR;AAAA;;AAAA;AAClB,uEAAgC;AAAA,sBAAvBtF,GAAuB;AAC9B0V,iCAAe,CAACpM,IAAhB,CAAqB,IAAI,0DAAJ,CAAgBtJ,GAAG,CAAC0D,IAApB,EAA0B,0DAAW8I,QAArC,CAArB;AACD;AAHiB;AAAA;AAAA;AAAA;AAAA;AAInB,aAJD,MAIO;AAAEkJ,6BAAe,CAACpM,IAAhB,CAAqB,IAAI,0DAAJ,CAAgB,IAAhB,EAAsB,0DAAWkD,QAAjC,CAArB;AAAkE;;AAE3E,iBAAKwI,QAAL,GAAgB,IAAI,wDAAJ,CAAc;AAC5B,qBAAO,IAAI,0DAAJ,CAAgB,KAAKzV,IAAL,CAAUsC,GAA1B,CADqB;AAE5B,sBAAQ,IAAI,0DAAJ,CAAgB,KAAKtC,IAAL,CAAUqE,IAA1B,EAAgC,0DAAW4I,QAA3C,CAFoB;AAG5B,uBAAS,IAAI,0DAAJ,CAAgB,KAAKjN,IAAL,CAAUsE,KAA1B,EAAiC,0DAAW2I,QAA5C,CAHmB;AAI5B,0BAAY,IAAI,0DAAJ,CAAgB,KAAKjN,IAAL,CAAUuE,QAA1B,CAJgB;AAK5B,6BAAe,IAAI,0DAAJ,CAAgB,KAAKvE,IAAL,CAAUwE,WAA1B,CALa;AAM5B,wBAAU,IAAI,wDAAJ,CAAcuR,iBAAd,CANkB;AAO5B,2BAAa,IAAI,wDAAJ,CAAcC,oBAAd,CAPe;AAQ5B,4BAAc,IAAI,wDAAJ,CAAcC,qBAAd,CARc;AAS5B,uBAAS,IAAI,0DAAJ,CAAgB,KAAKjW,IAAL,CAAUyE,KAA1B,EAAiC,0DAAWwI,QAA5C,CATmB;AAU5B,sBAAQ,IAAI,0DAAJ,CAAgB,KAAKjN,IAAL,CAAU0E,IAA1B,EAAgC,CAAC,0DAAW0R,OAAX,CAAmB,QAAnB,CAAD,EACT,0DAAWC,GAAX,CAAe,IAAf,CADS,EAET,0DAAWC,GAAX,CAAgB,IAAI7N,IAAJ,EAAD,CAAa8N,WAAb,EAAf,CAFS,CAAhC,CAVoB;AAa5B,yBAAW,IAAI,0DAAJ,CAAgB,KAAKvW,IAAL,CAAU6E,OAA1B,EAAmC,0DAAWuR,OAAX,CAAmB,MAAnB,CAAnC,CAbiB;AAc5B,4BAAc,IAAI,0DAAJ,CAAgB,KAAKpW,IAAL,CAAU2E,UAA1B,CAdc;AAe5B,wBAAU,IAAI,0DAAJ,CAAgB,KAAK3E,IAAL,CAAU4E,MAA1B,CAfkB;AAgB5B,uBAAS,IAAI,0DAAJ,CAAgB,KAAK5E,IAAL,CAAU8E,KAA1B,EAAiC,0DAAWsR,OAAX,CAAmB,MAAnB,CAAjC,CAhBmB;AAiB5B,oBAAM,IAAI,0DAAJ,CAAgB,KAAKpW,IAAL,CAAU+E,EAA1B,EAA8B,0DAAWqR,OAAX,CAAmB,MAAnB,CAA9B,CAjBsB;AAkB5B,wBAAU,IAAI,0DAAJ,CAAgB,KAAKpW,IAAL,CAAUgF,MAA1B,CAlBkB;AAmB5B,sBAAQ,IAAI,0DAAJ,CAAgB,KAAKhF,IAAL,CAAUkF,IAA1B,CAnBoB;AAoB5B,uBAAS,IAAI,wDAAJ,CAAcgR,gBAAd,CApBmB;AAqB5B,2BAAa,IAAI,0DAAJ,CAAgB,KAAKlW,IAAL,CAAUiF,SAA1B,CArBe;AAsB5B,sBAAQ,IAAI,wDAAJ,CAAckR,eAAd;AAtBoB,aAAd,CAAhB,CAzCiB,CAkEjB;AACD;AAED;;;;;;;;;;;;;;;wCAaW;AACL,iBAAKrI,iBAAL,CAAuB9C,WAAvB;AACL;;;;;;;yBA/MUkK,gB,EAAgB,uH,EAAA,+H,EAAA,mI;AAAA,O;;;cAAhBA,gB;AAAgB,qC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;ACZzB;;AAA6B;AAAA,qBAAY,IAAA1H,QAAA,EAAZ;AAAsB,aAAtB;;AAE3B;;AACE;;AAAmB;;AAAM;;AACzB;;AACA;;AAIA;;AAIF;;AAEA;;AACE;;AAAmB;;AAAM;;AACzB;;AAIA;;AAIF;;AAEA;;AACE;;AAAsB;;AAAS;;AAC/B;;AAIF;;AACA;;AACE;;AAAyB;;AAAS;;AAClC;;AAIA;;AAAA;;AACF;;AAEA;;AACE;;AAAoB;;AAAO;;AAC3B;;AACQ;AAAA,qBAAS,IAAAgJ,WAAA,EAAT;AAAsB,aAAtB;;AACN;;AACF;;AACA;;AASF;;AAEA;;AACE;;AAAuB;;AAAW;;AAClC;;AACQ;AAAA,qBAAS,IAAAC,cAAA,EAAT;AAAyB,aAAzB;;AACN;;AACF;;AACA;;AASF;;AAEA;;AACE;;AAAwB;;AAAQ;;AAChC;;AACQ;AAAA,qBAAS,IAAAC,eAAA,EAAT;AAA0B,aAA1B;;AACN;;AACF;;AACA;;AASF;;AAEA;;AAEE;;AACE;;AAAmB;;AAAO;;AAC1B;;AAIA;;AAIF;;AAEA;;AACE;;AAAkB;;AAAG;;AACrB;;AAIA;;AAOF;;AAEA;;AACE;;AAAqB;;AAAM;;AAC3B;;AAIF;;AACF;;AAGA;;AAEE;;AACE;;AAAwB;;AAAO;;AAC/B;;AAIF;;AAEA;;AACE;;AAAoB;;AAAM;;AAC1B;;AAIF;;AAEA;;AACE;;AAAkB;;AAAO;;AACzB;;AAIA;;AAIF;;AACF;;AAGA;;AAEE;;AACE;;AAAgB;;AAAQ;;AACxB;;AAIF;;AAEA;;AACE;;AAAoB;;AAAO;;AAC3B;;AAIF;;AAEA;;AACE;;AAAkB;;AAAI;;AACtB;;AAIA;;AAIF;;AACF;;AAEA;;AACE;;AAAmB;;AAAK;;AACxB;;AACQ;AAAA,qBAAS,IAAAC,UAAA,EAAT;AAAqB,aAArB;;AACN;;AACF;;AACA;;AAKF;;AAEA;;AACE;;AACE;;AAAuB;;AAAQ;;AAC/B;;AAIF;;AAEF;;AAIA;;AACE;;AAAkB;;AAAS;;AAC3B;;AACQ;AAAA,qBAAS,IAAAC,QAAA,EAAT;AAAmB,aAAnB;;AACN;;AACF;;AACA;;AAKF;;AAGA;;AAEU;;AACV;;AACF;;;;AAhPM;;AAUI;;AAAA;;AAYA;;AAAA;;AA2BmB;;AAAA;;AAiBA;;AAAA;;AAiBA;;AAAA;;AAoBjB;;AAAA;;AAYA;;AAAA;;AA2CA;;AAAA;;AAgCA;;AAAA;;AAYiB;;AAAA;;AA0BA;;AAAA;;AASnB;;AAAA;;;;;;;;;wEDjOD1B,gB,EAAgB;gBAL5B,uDAK4B;iBALlB;AACTjK,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKkB,U;;;;;;;;;AAOiBmK,sBAAY,EAAE,CAAF;kBAAvD,uDAAuD;mBAA7C,c,EAAgB;AAAC,wBAAQ;AAAT,a;AAA6B,WAAE,C;AACpB/P,gBAAM,EAAE,CAAF;kBAA3C,uDAA2C;mBAAjC,Q,EAAU;AAAC,wBAAQ;AAAT,a;AAAuB,WAAE,C;AACJsR,oBAAU,EAAE,CAAF;kBAAnD,uDAAmD;mBAAzC,Y,EAAc;AAAC,wBAAQ;AAAT,a;AAA2B,WAAE;;;;;;;;;;;;;;;;;;;AEtBxD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;ACCE;;AAAyE;;AACrE;;AAAM;;AAAO;;AACb;;AAAG;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAuB;;AAAmC;;AACjE;;;;;;AAFU;;AAAA;;;;;;AAQR;;AACE;;AACF;;;;;;AADiB;;AAAA;;;;;;AAIjB;;AACE;;AACF;;;;;;AADiB;;AAAA;;;;;;;;;;;;;;AA4BH;;AAEM;;AAEI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiC;;AACrC;;AACN;;;;;;AAHU;;AAAA;;AACiC;;AAAA;;;;;;AAS3C;;AAA8D;;AAAiB;;;;;;AAAjB;;AAAA;;;;;;AAK5D;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJJ;;AAEE;;AAA4B;;AAAQ;;AACpC;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AAON;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJJ;;AAEE;;AAA4B;;AAAY;;AACxC;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AAON;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAJJ;;AAEE;;AAA4B;;AAAS;;AACrC;;AAGF;;;;;;AAHQ;;AAAA;;;;;;AAKJ;;AAA+C;;AAAQ;;;;;;AAEvD;;AAA8C;;AAAI;;;;;;AAEtD;;AAEE;;AAC8D;;;;;;AAD9D;;AAAA;;;;;;;;;;;;AAIA;;AACE;;AACmC;;AAAO;;AAC1C;;AACF;;;;;;AAFM;;AAAA;;;;;;;;AA/DpB;;AAEI;AAAA;;AAAA;;AAAA;;AAAA;AAAA,aAA2B,YAA3B,EAA2B;AAAA;;AAAA;;AAAA;;AAAA;AAAA,WAA3B;;AAGA;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACC;;AACG;;AACE;;AAOF;;AAEA;;AAEE;;AAAuB;;AAAa;;AACpC;;AAAqC;;AAAc;;AACnD;;AACA;;AACA;;AAOA;;AAOA;;AAOA;;AACI;;AACA;;AACA;;AACA;;AAAa;;AACjB;;AAIA;;AAEE;;AAMA;;AAEI;;AAAO;;AAAQ;;AACnB;;AACD;;AACH;;AAEA;;AAEH;;AACD;;AACF;;AACJ;;;;;;;;AAxEqC;;AAAA;;AACtB;;AAAA;;AAOG;;AAAA;;AAUiB;;AAAA;;AACc;;AAAA;;AACG;;AAAA;;AAGlC;;AAAA;;AAOA;;AAAA;;AAOA;;AAAA;;AAO0B;;AAAA;;AAC5B;;AAAA;;AAC4B;;AAAA;;AAC5B;;AAAA;;AAEE;;AAAA;;AAKE;;AAAA;;AAOF;;AAAA;;AAMK;;AAAA,+FAA2B,MAA3B,EAA2B,QAA3B;;;;;;AA3EzB;;AACE;;AAgFF;;;;;;AA/EM;;AAAA;;;;UDbGC,iB;AAyBX,mCAAmBrQ,MAAnB,EACoBiF,KADpB,EAEoB/E,WAFpB,EAGoBnG,MAHpB,EAIoB3B,WAJpB,EAI8C;AAAA;;AAJ3B,eAAA4H,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAA/E,WAAA,GAAAA,WAAA;AACA,eAAAnG,MAAA,GAAAA,MAAA;AACA,eAAA3B,WAAA,GAAAA,WAAA;AAxBpB,eAAAkY,MAAA,GAAwC;AAACC,eAAG,EAAE,KAAN;AAAazV,iBAAK,EAAE;AAApB,WAAxC;AACA,eAAA0V,KAAA,GAAkB,EAAlB;AAEA,eAAAlX,QAAA,GAAkB,EAAlB;AACA,eAAAW,IAAA,GAAc,CAAd;AACA,eAAAC,YAAA,GAAsB,EAAtB;AACA,eAAAuW,SAAA,GAAsB,EAAtB;AACA,eAAAC,YAAA,GAAuB,EAAvB;AACA,eAAAtW,SAAA,GAAoB,WAApB;AACA,eAAAC,aAAA,GAAwB,CAAxB;AAgBC;;;;qCAEU;AAAA;;AAET;AAEA,iBAAKsW,aAAL;AAEA,iBAAK5W,MAAL,CAAY8K,kBAAZ,CAA+BlK,SAA/B,CACE,UAAAyK,gBAAgB,EAAI;AAClB,qBAAI,CAACsL,YAAL,GAAoBtL,gBAApB;;AAEA,qBAAI,CAACwL,QAAL,CAAc,OAAI,CAACF,YAAnB,EAAiC,OAAI,CAACD,SAAtC,EACc,CADd,EACiB,OAAI,CAACvW,YADtB,EACoC,KADpC,EAEc,OAAI,CAACE,SAFnB,EAE8B,OAAI,CAACC,aAFnC;AAGD,aAPH;AAUA,iBAAK+F,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CACtB,UAAAiB,IAAI,EAAI;AACN;AACA,qBAAI,CAACA,IAAL,GAAYA,IAAZ;AACD,aAJqB,CAAxB;AAOA,iBAAKiV,oBAAL,GAA4B,KAAK3Q,WAAL,CAAiB5G,QAAjB,CAA0BqB,SAA1B,CAC1B,UAAArB,QAAQ,EAAI;AACV,qBAAI,CAACA,QAAL,GAAgBA,QAAhB;AACD,aAHyB,CAA5B;AAMA,iBAAK+N,iBAAL,GAAyB,KAAKpC,KAAL,CAAWd,WAAX,CAAuBxJ,SAAvB,CACjB,UAAC3C,MAAD,EAAoB;AAChB,kBAAIA,MAAM,CAACgC,GAAX,EACE,OAAI,CAAC8W,WAAL,CAAiB9Y,MAAM,CAACgC,GAAxB;AACL,aAJgB,CAAzB;AAOA,iBAAK0W,YAAL,GAAoB,KAAK3W,MAAL,CAAYqL,gBAAhC;AACA,iBAAKrL,MAAL,CAAY8K,kBAAZ,CAA+BC,IAA/B,CAAoC,KAAK4L,YAAzC;AACD;;;oCAESK,K,EAAO;AAEf;AACA,gBAAIA,KAAK,IAAI,KAAK3W,SAAlB,EAA6B;AAC3B,mBAAKC,aAAL,GAAqB,CAAC,CAAD,GAAK,KAAKA,aAA/B;AACD,aAFD,CAGA;AAHA,iBAIK;AACH,qBAAKA,aAAL,GAAqB,CAArB;AACD;;AAED,iBAAKD,SAAL,GAAiB2W,KAAjB;AACA,iBAAKH,QAAL,CAAc,KAAKF,YAAnB,EAAiC,KAAKD,SAAtC,EACc,CADd,EACiB,KAAKvW,YADtB,EACoC,KADpC,EAEc,KAAKE,SAFnB,EAE8B,KAAKC,aAFnC;AAGD;;;qCAQmC;AAAA,gBAN1BgB,WAM0B,uEANJ,EAMI;AAAA,gBAL1B2V,QAK0B,uEALL,EAKK;AAAA,gBAJ1B/W,IAI0B,uEAJX,CAIW;AAAA,gBAH1BC,YAG0B,uEAHJ,EAGI;AAAA,gBAF1BC,aAE0B,uEAFF,KAEE;AAAA,gBAD1BC,SAC0B,uEADN,WACM;AAAA,gBAA1BC,aAA0B,uEAAF,CAAC,CAAC;AAElC,iBAAK6F,WAAL,CAAiB+Q,WAAjB,CAA6B5V,WAA7B,EAA0C2V,QAA1C,EAAoD/W,IAApD,EAC6BC,YAD7B,EAC2CC,aAD3C,EAC0DC,SAD1D,EAE6BC,aAF7B;AAGD;;;yCAEc6W,E,EAAIV,K,EAAO;AACxB,gBAAIxV,KAAK,GAAGkW,EAAE,CAACpC,aAAH,CAAiBqC,UAA7B;;AAEA,iBAAK,IAAIlC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGjU,KAAK,CAAC8G,MAAN,GAAa,CAAjC,EAAoCmN,CAAC,EAArC,EAAyC;AACvC,kBAAImC,IAAI,GAAGpW,KAAK,CAACiU,CAAD,CAAhB;AAEAuB,mBAAK,CAACvB,CAAD,CAAL,GAAWmC,IAAI,CAACC,qBAAL,GAA6BC,IAAxC;AACD;AACF;;;4CAEiB;AAChB1D,sBAAU,CAAC,KAAK2D,cAAL,CAAoB9Q,IAApB,CAAyB,IAAzB,EAA+B,KAAK+Q,MAApC,EAA4C,KAAKhB,KAAjD,CAAD,EAA0D,IAA1D,CAAV;AACD;;;0CAEY;AACX,gBAAIiB,GAAG,GAAGpM,MAAV;AAAA,gBACIqM,CAAC,GAAGC,QADR;AAAA,gBAEIhH,CAAC,GAAG+G,CAAC,CAACE,eAFV;AAAA,gBAGIC,CAAC,GAAGH,CAAC,CAACI,oBAAF,CAAuB,MAAvB,EAA+B,CAA/B,CAHR;AAAA,gBAIIC,CAAC,GAAGN,GAAG,CAACO,UAJZ;AAAA,gBAKIC,CAAC,GAAGR,GAAG,CAACS,WALZ;AAOE,iBAAKC,YAAL,GAAoBF,CAApB;AACA,iBAAKG,WAAL,GAAmBL,CAAnB;AAGH,W,CAED;AACA;;;;qCACW9C,C,EAAW;AACxBvV,mBAAO,CAAC0B,GAAR,CAAY,OAAZ,EAAqB6T,CAArB;AAEI,iBAAK0B,aAAL;AACA,iBAAKY,cAAL,CAAoB,KAAKC,MAAzB,EAAiC,KAAKhB,KAAtC;AAEA,gBAAI6B,OAAO,GAAG,KAAKC,QAAL,CAAcC,OAAd,GAAwBtD,CAAxB,CAAd,CANoB,CAQpB;;AACA,gBAAIuD,aAAa,GAAGH,OAAO,CAACvD,aAAR,CAAsB2D,OAAtB,CAA8B,kBAA9B,CAApB;AACA,gBAAIC,eAAe,GAAGC,UAAU,CAACtN,MAAM,CAACuN,gBAAP,CAAwBJ,aAAxB,EAAuC,IAAvC,EACAK,gBADA,CACiB,cADjB,CAAD,CAAhC;AAEA,gBAAIC,gBAAgB,GAAGH,UAAU,CAACtN,MAAM,CAACuN,gBAAP,CAAwBJ,aAAxB,EAAuC,IAAvC,EACAK,gBADA,CACiB,eADjB,CAAD,CAAjC,CAZoB,CAepB;;AACA,gBAAIE,QAAQ,GAAGV,OAAO,CAACvD,aAAR,CAAsBkE,WAArC,CAhBoB,CAkBpB;;AACA,gBAAIC,YAAY,GAAGZ,OAAO,CAACvD,aAAR,CAAsB2D,OAAtB,CAA8B,IAA9B,CAAnB;AACA,gBAAI1Q,SAAS,GAAGsD,MAAM,CAACuN,gBAAP,CAAwBK,YAAxB,EAAsC,IAAtC,EACoBJ,gBADpB,CACqC,WADrC,CAAhB;AAGA,gBAAMK,YAAY,GAAGnR,SAAS,CAACoR,KAAV,CAAgB,kBAAhB,EAAoC,CAApC,EAAuCxK,KAAvC,CAA6C,IAA7C,CAArB;AACA,gBAAIyK,KAAK,GAAGT,UAAU,CAACO,YAAY,CAAC,CAAD,CAAb,CAAtB,CAxBoB,CA0BpB;AACA;;AACA,oBAAQ,IAAR;AACE,mBAAM,KAAKd,WAAL,IAAoB,GAA1B;AAAgC;AAAEgB,uBAAK,GAAG,GAAR;AAAa;AAAQ;;AACvD,mBAAM,KAAKhB,WAAL,IAAoB,GAA1B;AAAgC;AAAEgB,uBAAK,GAAG,GAAR;AAAa;AAAQ;AAFzD,aA5BoB,CAkCpB;;;AACA,gBAAIC,cAAc,GAAG,KAAK7C,KAAL,CAAWvB,CAAX,CAArB;AAEA;;;;;;;;;AAUA,gBAAI,CAAC,KAAKqB,MAAL,CAAYC,GAAjB,EAAsB;AACpB,mBAAKD,MAAL,CAAYC,GAAZ,GAAkB,IAAlB;AAEA,mBAAKD,MAAL,CAAYxV,KAAZ,GAAoB,CAAC,KAAKsX,WAAL,GACGiB,cADH,GAEGN,QAAQ,GAAGK,KAFd,IAGIV,eAAe,GAAGI,gBAAlB,GAAqC,CAHzC,CAAD,IAIIM,KAJxB;AAKD,aAvDmB,CAwDpB;;;AAEA,gBAAI,KAAK9C,MAAL,CAAYxV,KAAZ,GAAoB,CAAxB,EAA2B;AAEzB;AAGEuX,qBAAO,CAACvD,aAAR,CAAsBwE,UAAtB,CAAiCA,UAAjC,CAA4CC,KAA5C,CAAkDC,WAAlD,CAA8D,WAA9D,EAC0B,0CAA0C,KAAKlD,MAAL,CAAYxV,KAAtD,GAA8D,KADxF,EALuB,CAQzB;AAED;AACF;;;mCAEQmU,C,EAAW;AAClBvV,mBAAO,CAAC0B,GAAR,CAAY,KAAZ,EAAmB6T,CAAnB;AAEE,gBAAIoD,OAAO,GAAG,KAAKC,QAAL,CAAcC,OAAd,GAAwBtD,CAAxB,CAAd;;AAEA,gBAAI,KAAKqB,MAAL,CAAYC,GAAhB,EAAqB;AAEnB;AAGE8B,qBAAO,CAACvD,aAAR,CAAsBwE,UAAtB,CAAiCA,UAAjC,CAA4CC,KAA5C,CAAkDC,WAAlD,CAA8D,WAA9D,EAA2E,EAA3E;AAEA,mBAAKlD,MAAL,CAAYC,GAAZ,GAAkB,KAAlB;AACA,mBAAKD,MAAL,CAAYxV,KAAZ,GAAoB,CAApB,CARiB,CAUrB;AAEC;AACJ;;;sCAEWd,G,EAAa;AAGvBN,mBAAO,CAAC0B,GAAR,CAAY,aAAZ;;AAEA,gBAAI,KAAKqV,SAAL,CAAevU,OAAf,CAAuBlC,GAAvB,MAAgC,CAAC,CAArC,EAAwC;AACtCN,qBAAO,CAAC0B,GAAR,CAAY,QAAZ;AAEA,mBAAKqV,SAAL,CAAenN,IAAf,CAAoBtJ,GAApB;AACD,aAJD,MAIO;AAAEN,qBAAO,CAAC0B,GAAR,CAAY,YAAZ;AAA4B;;AAErC,iBAAKwV,QAAL,CAAc,KAAKF,YAAnB,EAAiC,KAAKD,SAAtC,EACc,CADd,EACiB,KAAKvW,YADtB,EACoC,KADpC,EAEc,KAAKE,SAFnB,EAE8B,KAAKC,aAFnC;AAGD;;;oCAESmJ,K,EAAe;AAEnB9J,mBAAO,CAAC0B,GAAR,CAAY,WAAZ;AACJ,iBAAKqV,SAAL,CAAe/M,MAAf,CAAsBF,KAAtB,EAA6B,CAA7B;AACA,iBAAKoN,QAAL,CAAc,KAAKF,YAAnB,EAAiC,KAAKD,SAAtC,EACc,CADd,EACiB,KAAKvW,YADtB,EACoC,KADpC,EAEc,KAAKE,SAFnB,EAE8B,KAAKC,aAFnC;AAGD;;;qCAGU;AACT,gBAAI,KAAKf,QAAL,CAAcwI,MAAd,GAAuB,KAAK5B,WAAL,CAAiB7G,UAA5C,EAAwD;AACtD,mBAAKY,IAAL;AACA,mBAAK2W,QAAL,CAAc,KAAKF,YAAnB,EAAiC,KAAKD,SAAtC,EACc,KAAKxW,IADnB,EACyB,KAAKC,YAD9B,EAC4C,IAD5C,EAEc,KAAKE,SAFnB,EAE8B,KAAKC,aAFnC;AAGD;AACF;;;oCAGSgK,I,EAAY;AACpB,gBAAMoP,MAAM,GAAG,KAAK,EAAL,GAAU,EAAV,GAAe,IAA9B,CADoB,CACgB;;AACpC,gBAAMtQ,KAAK,GAAG,IAAInB,IAAJ,EAAd;AACA,gBAAM0R,WAAW,GAAG,IAAI1R,IAAJ,CAASqC,IAAT,CAApB;AAEA,gBAAMsP,IAAI,GAAUC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAAS,CAAC,CAAC3Q,KAAD,GAAS,CAACuQ,WAAX,IAA0BD,MAAnC,CAAX,CAApB;AAEA,mBAAOE,IAAP;AACD;;;wCAEa;AACZ,iBAAKvT,gBAAL,CAAsBmE,WAAtB;AACA,iBAAKsM,oBAAL,CAA0BtM,WAA1B;AACA,iBAAK8C,iBAAL,CAAuB9C,WAAvB,GAHY,CAIZ;AACD;;;;;;;yBAlRU8L,iB,EAAiB,uH,EAAA,+H,EAAA,mI,EAAA,uI,EAAA,mI;AAAA,O;;;cAAjBA,iB;AAAiB,sC;AAAA;AAAA;;;;;;;;;;;;;;;;;;AClB9B;;AACE;;AAIF;;AAEA;;AACE;;AAA2B;;AACzB;;AAAyB;AAAA,qBAAS,IAAA0D,SAAA,CAAU,OAAV,CAAT;AAA2B,aAA3B;;AAA6B;;AAAM;;AAC5D;;AAGA;;AACA;;AAAyB;AAAA,qBAAS,IAAAA,SAAA,CAAU,WAAV,CAAT;AAA+B,aAA/B;;AAAiC;;AAAgB;;AAC1E;;AAGF;;AACF;;AAEA;;AAIY;AAAA,qBAAY,IAAAC,QAAA,EAAZ;AAAsB,aAAtB;;AAGV;;AACE;;AAkFF;;AACF;;;;AA/GO;;AAAA;;AASyB;;AAAA;;AAKA;;AAAA;;AAQpB;;AAAA,mGAA6B,wBAA7B,EAA6B,GAA7B,EAA6B,cAA7B,EAA6B,KAA7B;;AAMJ;;AAAA;;;;;;;;;wEDXK3D,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACT7L,oBAAQ,EAAE,eADD;AAETC,uBAAW,EAAE,4BAFJ;AAGTC,qBAAS,EAAE,CAAC,2BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;AAgBY8M,gBAAM,EAAE,CAAF;kBAA7C,uDAA6C;mBAAnC,Q,EAAU;AAAE,wBAAQ;AAAV,a;AAAyB,WAAE,C;AACvBc,kBAAQ,EAAE,CAAF;kBAAhC,0DAAgC;mBAAnB,S;AAAmB,WAAE;;;;;;;;;;;;;;;;;;;AEnCrC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACUY;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAIA;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAFJ;;AAA+D;;AAC7D;;AAGF;;;;;;AAH2B;;AAAA;;;;;;AA4BzB;;AACE;;AAEA;;AAA4B;;AAAG;;AAAQ;;;;AAEzC;;;;;;;;;AAJE;;AAAA;;AAEuC;;AAAA;;;;;;AAN7C;;AACE;;AACE;;AAA4B;;AAAe;;AAC3C;;AAMF;;AACF;;;;;;AAP4B;;AAAA;;;;;;;;;;;;;;AA1CpC;;AACE;;AACE;;AACE;;AACF;;AACA;;AACI;;AAAwB;;AAAc;;AACtC;;AAA2B;;AAAiB;;AAC5C;;AACE;;AAIA;;AAKF;;AACA;;AACE;;AACE;;AAA4B;;AAAQ;;AACpC;;AACA;;AAA4B;;AAAI;;AAChC;;AACF;;AACF;;AAEA;;AAEA;;AACE;;AACE;;AAA4B;;AAAgB;;AAAQ;;AAEpD;;AAA4B;;AAAG;;AAAQ;;;;AAEzC;;AACF;;AAEA;;AAYA;;AACE;;AACI;;AACmC;;AAAS;;AAChD;;AACA;;AACE;;AACE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiC;;AAAc;;AACnD;;AACF;;AACJ;;AACF;;AACF;;;;;;;;AA5DW;;AAAA;;AAGqB;;AAAA;;AACG;;AAAA;;AAEA;;AAAA;;AAIG;;AAAA;;AAS1B;;AAAA;;AAEA;;AAAA;;AAQoD;;AAAA;;AAEb;;AAAA;;AAKtC;;AAAA;;AAeK;;AAAA;;;;UD7CP2B,iB;AAEX,mCAAoB/M,YAApB,EAAgD;AAAA;;AAA5B,eAAAA,YAAA,GAAAA,YAAA;AAEpB,eAAAgN,QAAA,GAAW,EAAX;AAFmD;;;;qCAI3C;AAENxa,mBAAO,CAAC0B,GAAR,CAAY,mBAAZ;AAEA,iBAAK+Y,YAAL;AAED;;;yCAEsB;AAAA;;AAErB,iBAAKjN,YAAL,CAAkBkN,WAAlB,GACkBzZ,SADlB,CAEsB,UAAAC,IAAI,EAAI;AACN,qBAAI,CAACsZ,QAAL,GAAgBtZ,IAAhB;AACD,aAJvB,EAKsB,UAAAO,GAAG,EAAI;AACLzB,qBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,aAPvB;AAUD;;;uCAEYM,M,EAAc;AAEzB,iBAAKyL,YAAL,CAAkB3D,UAAlB,CAA6B9H,MAA7B;AAEA,gBAAM+H,KAAK,GAAG,KAAK0Q,QAAL,CAAczQ,SAAd,CAAwB,UAAAlK,IAAI;AAAA,qBAAIA,IAAI,CAACsC,GAAL,IAAYJ,MAAhB;AAAA,aAA5B,CAAd;;AAEA,gBAAI+H,KAAK,GAAG,CAAC,CAAb,EAAgB;AACb,mBAAK0Q,QAAL,CAAcxQ,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACF;;AAED,mBAAO,IAAP;AACD;;;oCAGSa,I,EAAY;AACpB,gBAAMoP,MAAM,GAAG,KAAK,EAAL,GAAU,EAAV,GAAe,IAA9B,CADoB,CACgB;;AACpC,gBAAMtQ,KAAK,GAAG,IAAInB,IAAJ,EAAd;AACA,gBAAM0R,WAAW,GAAG,IAAI1R,IAAJ,CAASqC,IAAT,CAApB;AAEA,gBAAMsP,IAAI,GAAUC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAAS,CAAC,CAAC3Q,KAAD,GAAS,CAACuQ,WAAX,IAA0BD,MAAnC,CAAX,CAApB;AAEA,mBAAOE,IAAP;AACD;;;;;;;yBAlDUM,iB,EAAiB,qI;AAAA,O;;;cAAjBA,iB;AAAiB,qC;AAAA,gB;AAAA,e;AAAA,6jB;AAAA;AAAA;ACT5B;;;;AAAK;;;;;;;;;;wEDSMA,iB,EAAiB;gBAL7B,uDAK6B;iBALnB;AACTzP,oBAAQ,EAAE,cADD;AAETC,uBAAW,EAAE,2BAFJ;AAGTC,qBAAS,EAAE,CAAC,0BAAD;AAHF,W;AAKmB,U;;;;;;;;;;;;;;;;;;;;;;AEV9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA,c,CAWA;;;AACA,UAAM3M,WAAW,GAAG;AAClBE,eAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAE,0BAAgB,kBAAlB;AACE,yCAA+B;AADjC,SAAhB;AADS,OAApB;AAKA,UAAMoc,SAAS,GAAG,uCAAlB;AACA,UAAMC,UAAU,GAAG,2CAAnB;AACA,UAAMC,cAAc,GAAG,wCAAvB;AACA,UAAMC,eAAe,GAAG,0CAAxB;AACA,UAAMC,WAAW,GAAG,qCAApB;;UAKaC,W;AAIX,6BAAoBvc,IAApB,EACoB6H,MADpB,EAEoBqL,IAFpB,EAEgC;AAAA;;AAFZ,eAAAlT,IAAA,GAAAA,IAAA;AACA,eAAA6H,MAAA,GAAAA,MAAA;AACA,eAAAqL,IAAA,GAAAA,IAAA;AAJpB,eAAAzP,IAAA,GAAO,IAAI,oDAAJ,CAA0B,IAA1B,CAAP;AAIkC;;;;sCAEtB;AACV,gBAAI8J,OAAJ;AACA,iBAAKmB,KAAL,CAAW,sBAAX,EAAmC,OAAnC,EAA4ClM,SAA5C;AACD;;;gCAEK8L,K,EAAeK,Q,EAAkB;AAAA;;AAErC,mBAAO,KAAK3O,IAAL,CACJwD,IADI,CACe0Y,SADf,EAC0B;AAAE5N,mBAAK,EAAEA,KAAT;AAAgBK,sBAAQ,EAAEA;AAA1B,aAD1B,EAEJxL,IAFI,CAGH,kEAAW,KAAKE,WAAhB,CAHG,EAIH,2DAAI,UAAAmZ,QAAQ,EAAI;AAEdA,sBAAQ,CAAC/Y,IAAT,CAAciR,MAAd,GAAuB8H,QAAQ,CAACC,KAAhC;AACA,kBAAMhZ,IAAI,GAAG,IAAI,uDAAJ,CAAS+Y,QAAQ,CAAC/Y,IAAlB,CAAb;;AAEA,qBAAI,CAACA,IAAL,CAAUf,IAAV,CAAee,IAAf;;AAEA,qBAAI,CAACyP,IAAL,CAAUwJ,OAAV,CAAkB,GAAlB;;AACA,qBAAI,CAACxJ,IAAL,CAAUuC,UAAV,CAAqB,EAArB;;AACA,qBAAI,CAACvC,IAAL,CAAUkB,KAAV;AACD,aAVD,CAJG,CAAP;AAgBD;;;mCAEQ;AAEP,iBAAKlB,IAAL,CAAUyJ,IAAV;AAEA,gBAAMF,KAAK,GAAG,KAAKhZ,IAAL,CAAUd,KAAV,CAAgB8Z,KAA9B;AAEA,iBAAKhZ,IAAL,CAAUf,IAAV,CAAe,IAAf;AAEA,gBAAM9C,WAAW,GAAG;AAClBE,qBAAO,EAAE,IAAI,gEAAJ,CAAgB;AAAC,iCAAiB,YAAY2c;AAA9B,eAAhB;AADS,aAApB;AAIA,mBAAO,KAAKzc,IAAL,CAAUwD,IAAV,CAAe2Y,UAAf,EAA2B,EAA3B,EAA+Bvc,WAA/B,EACUuD,IADV,CACe,kEAAW,KAAKE,WAAhB,CADf,CAAP;AAGD;;;kCAEcI,I,EAAU;AAEvB,mBAAO,KAAKzD,IAAL,CAAUwD,IAAV,CAAqB8Y,WAArB,EAAkC7Y,IAAlC,EAAwC7D,WAAxC,EACUuD,IADV,CACe,kEAAW,KAAKE,WAAhB,CADf,CAAP;AAGD;;;sCAEmBuZ,Q,EAA6B;AAC/C,gBAAIvY,YAAY,GAAG,4BAAnB;;AACA,gBAAI,CAACuY,QAAQ,CAACvb,KAAV,IAAmB,CAACub,QAAQ,CAACvb,KAAT,CAAeA,KAAvC,EAA8C;AAC5C,qBAAO,wDAAWgD,YAAX,CAAP;AACD;;AACD,oBAAQuY,QAAQ,CAACvb,KAAT,CAAeA,KAAvB;AACE,mBAAK,qBAAL;AACEgD,4BAAY,GAAG,uBAAf;AACA;;AACF,mBAAK,iBAAL;AACEA,4BAAY,GAAG,4CAAf;AACA;;AACF,mBAAK,kBAAL;AACEA,4BAAY,GAAG,iBAAf;AACA;;AACF,mBAAK,iBAAL;AACEA,4BAAY,GAAG,oDAAf;AACA;AAZJ;;AAcA,mBAAO,wDAAWA,YAAX,CAAP;AACD;;;2CAEgB;AAAA;;AAEf,mBAAO,KAAKrE,IAAL,CACJwD,IADI,CACyB4Y,cADzB,EAED;AACE1Y,iBAAG,EAAE,KAAKD,IAAL,CAAUd,KAAV,CAAgBe,GADvB;AAEE6B,kBAAI,EAAE,KAAK9B,IAAL,CAAUd,KAAV,CAAgB4C,IAFxB;AAGE+I,mBAAK,EAAE,KAAK7K,IAAL,CAAUd,KAAV,CAAgB2L,KAHzB;AAIEyC,4BAAc,EAAE,KAAKtN,IAAL,CAAUd,KAAV,CAAgBoO,cAJlC;AAKEnN,sBAAQ,EAAE,KAAKH,IAAL,CAAUd,KAAV,CAAgBiB;AAL5B,aAFC,EASJT,IATI,CAUH,kEAAW,KAAKE,WAAhB,CAVG,EAWH,2DAAI,UAAAE,OAAO,EAAI;AACb,qBAAI,CAACE,IAAL,CAAUf,IAAV,CAAe,OAAI,CAACe,IAAL,CAAUd,KAAzB;AACD,aAFD,CAXG,CAAP;AAeD;;;wCAEiB;AAChB,mBAAO,KAAK3C,IAAL,CAAUwD,IAAV,CAA0B6Y,eAA1B,EAC2B;AAAEhN,oBAAM,EAAE,KAAK5L,IAAL,CAAUd,KAAV,CAAgBe;AAA1B,aAD3B,EAE2B9D,WAF3B,CAAP;AAGF;;;4CAEiB0D,M,EAAc;AAE9B;AAEA,gBAAIK,OAAO,GAAG,KAAKF,IAAL,CAAUd,KAAV,CAAgBkI,OAAhB,CAAwBhH,GAAxB,CAA4B,UAAAC,KAAK;AAAA,qBAAIA,KAAK,CAACJ,GAAV;AAAA,aAAjC,CAAd;AACA,mBAAQC,OAAO,CAACI,OAAR,CAAgBT,MAAhB,IAA0B,CAAC,CAA5B,GAAiC,IAAjC,GAAwC,KAA/C;AACD;;;;;;;yBA9GWiZ,W,EAAW,uH,EAAA,8G,EAAA,0G;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW,K;AAAA,oBAFV;;;;;wEAEDA,W,EAAW;gBAHvB,wDAGuB;iBAHZ;AACV3X,sBAAU,EAAE;AADF,W;AAGY,U;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;ACUQ;;AAEM;;AAEI;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAAiC;;AACrC;;AACN;;;;;;AAHU;;AAAA;;AACiC;;AAAA;;;;;;AAYzC;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAHJ;;AACE;;AAA4B;;AAAQ;;AACpC;;AAGF;;;;;;AAH2B;;AAAA;;;;;;AAOzB;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAHJ;;AACE;;AAA4B;;AAAY;;AACxC;;AAGF;;;;;;AAH2B;;AAAA;;;;;;AAOzB;;AACE;;AACF;;;;;;;AADE;;AAAA;;;;;;AAHJ;;AACE;;AAA4B;;AAAS;;AACrC;;AAGF;;;;;;AAH2B;;AAAA;;;;;;AAOvB;;AAA0C;;AAA4B;;AAAQ;;AAAQ;;AAAc;;;;;;AAAd;;AAAA;;;;;;AACtF;;AAAyC;;AAA4B;;AAAI;;AAAQ;;AAAa;;;;;;AAAb;;AAAA;;;;;;AACjF;;AAA4C;;AAA4B;;AAAO;;AAAQ;;AAAgB;;;;;;AAAhB;;AAAA;;;;;;AACvF;;AAA+C;;AAA4B;;AAAQ;;AAAQ;;AAAmB;;;;;;AAAnB;;AAAA;;;;;;AAC3F;;AAA2C;;AAA4B;;AAAO;;AAAQ;;AAAe;;;;;;AAAf;;AAAA;;;;;;AACtF;;AAA0C;;AAA4B;;AAAkB;;AAAQ;;AAAc;;;;;;AAAd;;AAAA;;;;;;AAChG;;AAAyC;;AAA4B;;AAAK;;AAAQ;;AAAa;;;;;;AAAb;;AAAA;;;;;;;;;;;;AAQtF;;AACE;;AACmC;;AAAO;;AAC5C;;;;;;AADM;;AAAA;;;;;;AAUZ;;;;;;AAxEF;;AACE;;AACE;;AACE;;AAEF;;AACA;;AAEE;;AACE;;AAOF;;AAEA;;AACE;;AAAuB;;AAAa;;AACpC;;AAAwB;;AAAc;;AACtC;;AAA2B;;AAAiB;;AAC5C;;AACA;;AAOA;;AAOA;;AAQA;;AACI;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACJ;;AAGA;;AACE;;AACF;;AAEA;;AAIF;;AAEE;;AAEJ;;AACF;;AACA;;AACA;;AACA;;AAEF;;;;;;AAvE+B;;AAAA;;AAOjB;;AAAA;;AASiB;;AAAA;;AACC;;AAAA;;AACG;;AAAA;;AAEtB;;AAAA;;AAOA;;AAAA;;AAOA;;AAAA;;AASK;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AACA;;AAAA;;AAKR;;AAAA;;AAGsB;;AAAA;;AAMX;;AAAA,gGAA4B,MAA5B,EAA4B,WAA5B;;AAML;;AAAA;;;;UDzDHiY,kB;AAUX,oCAAmBhV,MAAnB,EACoBiF,KADpB,EAEoB/E,WAFpB,EAGoB9H,WAHpB,EAG8C;AAAA;;AAH3B,eAAA4H,MAAA,GAAAA,MAAA;AACC,eAAAiF,KAAA,GAAAA,KAAA;AACA,eAAA/E,WAAA,GAAAA,WAAA;AACA,eAAA9H,WAAA,GAAAA,WAAA,CAA0B,CAX9C;;AACA,eAAAmB,IAAA,GAAa,IAAb;AAUiD;;;;qCAEzC;AAAA;;AACN,gBAAIkC,MAAM,GAAG,KAAKwJ,KAAL,CAAWgQ,QAAX,CAAoB9Q,WAApB,CAAgChH,EAA7C;AAEA,iBAAK4I,SAAL,CAAetK,MAAf;AAEA,iBAAK2E,gBAAL,GAAwB,KAAKhI,WAAL,CAAiBwD,IAAjB,CAAsBjB,SAAtB,CAAgC,UAAAiB,IAAI,EAAI;AAC9D,qBAAI,CAACA,IAAL,GAAYA,IAAZ;AACD,aAFuB,CAAxB;AAIA,gBAAI,KAAKqJ,KAAL,CAAWgQ,QAAX,CAAoB7Q,QAApB,KAAiC,UAArC,EACE,KAAK8Q,gBAAL;AACH;;;oCAESzZ,M,EAAgB;AAAA;;AACtB,iBAAKyE,WAAL,CACG6F,SADH,CACatK,MADb,EAEGd,SAFH,CAGI,UAAAC,IAAI,EAAI;AACN,qBAAI,CAACrB,IAAL,GAAYqB,IAAZ;AACD,aALL,EAMI,UAAAO,GAAG,EAAI;AACLzB,qBAAO,CAAC0B,GAAR,CAAYD,GAAZ;AACD,aARL;AAUD;;;yCAGYM,M,EAAgB;AAC7B/B,mBAAO,CAAC0B,GAAR,CAAY,MAAZ,EAAoB,IAApB;AAEA1B,mBAAO,CAAC0B,GAAR,CAAY,kBAAZ,EAAgC,KAAK8E,WAArC;AAEA,iBAAKA,WAAL,CAAiB0D,iBAAjB,CAAmCnI,MAAnC;AACD;;;8CACmBA,M,EAAgB;AAClC,iBAAKyE,WAAL,CAAiB4D,sBAAjB,CAAwCrI,MAAxC;AACD;;;uCAEYA,M,EAAc;AACzB,gBAAI0Z,EAAE,GAAG,KAAKjV,WAAL,CAAiBmD,UAAjB,CAA4B5H,MAA5B,CAAT,CADyB,CAGzB;AACA;;AAEA,mBAAO,IAAP;AACD;;;uCACYA,M,EAAc;AACzB/B,mBAAO,CAAC0B,GAAR,CAAY,QAAZ,EAAsBK,MAAtB;AACA,iBAAKyE,WAAL,CAAiBqD,UAAjB,CAA4B9H,MAA5B,EAFyB,CAIzB;AACA;;AAEA,mBAAO,IAAP;AACD;;;6CAEkBA,M,EAAc;AAC/B,gBAAI0Z,EAAE,GAAG,KAAKjV,WAAL,CAAiB8D,gBAAjB,CAAkCvI,MAAlC,CAAT;AACA,mBAAO,IAAP;AACD;;;6CACkBA,M,EAAc;AAC/B,gBAAI0Z,EAAE,GAAG,KAAKjV,WAAL,CAAiB+D,gBAAjB,CAAkCxI,MAAlC,CAAT;AACA,mBAAO,IAAP;AACD;;;2CAEgBA,M,EAAc;AAC7B,mBAAO,KAAKyE,WAAL,CAAiBkV,gBAAjB,CAAkC3Z,MAAlC,CAAP;AACD;;;yCAEcA,M,EAAc;AAC1B,mBAAO,KAAKyE,WAAL,CAAiBmV,cAAjB,CAAgC5Z,MAAhC,CAAP;AACF;;;wCACaA,M,EAAc;AAC1B,mBAAO,KAAKrD,WAAL,CAAiBoK,iBAAjB,CAAmC/G,MAAnC,CAAP;AACD;;;6CAEkB;AACjBmS,sBAAU,CAAC,YAAM;AACd,kBAAM7O,OAAO,GAAG4S,QAAQ,CAAC2D,cAAT,CAAwB,UAAxB,CAAhB;AACAvW,qBAAO,CAACwW,cAAR,CAAuB;AAAEC,wBAAQ,EAAE;AAAZ,eAAvB;AACF,aAHS,EAGP,GAHO,CAAV;AAID;;;;;;;yBAhGUR,kB,EAAkB,uH,EAAA,+H,EAAA,mI,EAAA,mI;AAAA,O;;;cAAlBA,kB;AAAkB,uC;AAAA;AAAA;;;;;;;;;;;;;;;ACf/B;;;;AAAK;;;;;;;;;wEDeQA,kB,EAAkB;gBAL9B,uDAK8B;iBALpB;AACTxQ,oBAAQ,EAAE,gBADD;AAETC,uBAAW,EAAE,6BAFJ;AAGTC,qBAAS,EAAE,CAAC,4BAAD;AAHF,W;AAKoB,U;;;;;;;;;;;AAOkB+Q,wBAAc,EAAE,CAAF;kBAA5D,uDAA4D;mBAAlD,gB,EAAkB;AAAE,wBAAQ;AAAV,a;AAAgC,WAAE;;;;;;;;;;;;;;;;;;;AEvBjE;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;UAOaC,uB;AAEX,2CAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,uB;AAAuB,O;;;cAAvBA,uB;AAAuB,2C;AAAA,iB;AAAA,e;AAAA,gP;AAAA;AAAA;ACPpC;;AAEE;;AACE;;AACE;;AACE;;AAAiG;;AAAW;;AAC9G;;AACA;;AACE;;AAA4F;;AAAe;;AAC7G;;AACA;;AACE;;AAAiG;;AAAiB;;AACpH;;AACF;;AACF;;AAEA;;AACE;;AACF;;AACF;;;;AAdyC;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;;;;;;;;wEDJ5BA,uB,EAAuB;gBALnC,uDAKmC;iBALzB;AACTlR,oBAAQ,EAAE,oBADD;AAETC,uBAAW,EAAE,iCAFJ;AAGTC,qBAAS,EAAE,CAAC,gCAAD;AAHF,W;AAKyB,U;;;;;;;;;;;;;;;;;;;;AEPpC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAwBA,UAAMiR,MAAM,GAAW,CACnB;AAAEC,YAAI,EAAE,EAAR;AAAYC,iBAAS,EAAE;AAAvB,OADmB,EAEnB;AAAED,YAAI,EAAE,OAAR;AAAiBC,iBAAS,EAAE,gFAA5B;AAA4CC,gBAAQ,EAAE,CAClD;AAAEF,cAAI,EAAE,EAAR;AAAYC,mBAAS,EAAE;AAAvB,SADkD,EAElD;AAAED,cAAI,EAAE,OAAR;AAAiBC,mBAAS,EAAE;AAA5B,SAFkD;AAAtD,OAFmB,EAMnB;AAAED,YAAI,EAAE,MAAR;AAAgBC,iBAAS,EAAE,6EAA3B;AAA0CC,gBAAQ,EAAE,CAChD;AAAEF,cAAI,EAAE,EAAR;AAAYC,mBAAS,EAAE;AAAvB,SADgD,EAEhD;AAAED,cAAI,EAAE,MAAR;AAAgBC,mBAAS,EAAE;AAA3B,SAFgD,EAGhD;AAAED,cAAI,EAAE,MAAR;AAAgBC,mBAAS,EAAE;AAA3B,SAHgD,EAIhD;AAAED,cAAI,EAAE,UAAR;AAAoBC,mBAAS,EAAE;AAA/B,SAJgD,EAKhD;AAAED,cAAI,EAAE,UAAR;AAAoBC,mBAAS,EAAE;AAA/B,SALgD;AAApD,OANmB,EAanB;AAAED,YAAI,EAAE,OAAR;AAAiBC,iBAAS,EAAE,4GAA5B;AAAqDC,gBAAQ,EAAE,CAC3D;AAAEF,cAAI,EAAE,EAAR;AAAYC,mBAAS,EAAE;AAAvB,SAD2D,EAE3D;AAAED,cAAI,EAAE,KAAR;AAAeC,mBAAS,EAAE;AAA1B,SAF2D,EAG3D;AAAED,cAAI,EAAE,UAAR;AAAoBC,mBAAS,EAAE;AAA/B,SAH2D,EAI3D;AAAED,cAAI,EAAE,UAAR;AAAoBC,mBAAS,EAAE,yGAA/B;AAAmDC,kBAAQ,EAAE,CACzD;AAAEF,gBAAI,EAAE,EAAR;AAAYC,qBAAS,EAAE;AAAvB,WADyD,EAEzD;AAAED,gBAAI,EAAE,MAAR;AAAgBC,qBAAS,EAAE;AAA3B,WAFyD;AAA7D,SAJ2D;AAA/D,OAbmB,EAsBnB;AAAED,YAAI,EAAE,MAAR;AAAgBC,iBAAS,EAAE;AAA3B,OAtBmB,EAuBnB;AAAED,YAAI,EAAE,QAAR;AAAkBC,iBAAS,EAAE;AAA7B,OAvBmB,EAwBnB;AAAED,YAAI,EAAE,KAAR;AAAeC,iBAAS,EAAE;AAA1B,OAxBmB,EAyBnB;AAAED,YAAI,EAAE,IAAR;AAAcG,kBAAU,EAAE;AAA1B,OAzBmB,CAAvB;;UAiCaC,gB;;;;;cAAAA;;;;2BAAAA,gB;AAAgB,S;AAAA,kBAHlB,CAAC,6DAAa/I,OAAb,CAAqB0I,MAArB,EAA6B;AAACM,mCAAyB,EAAE;AAA5B,SAA7B,CAAD,CAGkB,EAFjB,4DAEiB;;;;4HAAhBD,gB,EAAgB;AAAA;AAAA,oBAFjB,4DAEiB;AAAA,S;AAFL,O;;;;;wEAEXA,gB,EAAgB;gBAJ5B,sDAI4B;iBAJnB;AACR7I,mBAAO,EAAE,CAAC,6DAAaF,OAAb,CAAqB0I,MAArB,EAA6B;AAACM,uCAAyB,EAAE;AAA5B,aAA7B,CAAD,CADD;AAER/K,mBAAO,EAAE,CAAC,4DAAD;AAFD,W;AAImB,U;;;;;;;;;;;;;;;;;;ACzD7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;UAKagL,a;;;;;;;oCAEDpb,K,EAAgC;AAExC,gBAAIqb,KAAK,GAAGrb,KAAK,CAAC6N,KAAN,CAAY,GAAZ,CAAZ;AACA,gBAAIyN,aAAa,GAAG,EAApB;;AAEA,gBAAID,KAAK,CAACrU,MAAN,GAAe,CAAnB,EAAsB;AACpBsU,2BAAa,GAAGD,KAAK,CAAC,CAAD,CAAL,GAAW,GAAX,GAAiBA,KAAK,CAACA,KAAK,CAACrU,MAAN,GAAe,CAAhB,CAAtC;AACD,aAFD,MAEO;AACLsU,2BAAa,GAAGD,KAAK,CAAC,CAAD,CAArB;AACD;;AAED,gBAAIC,aAAa,CAACtU,MAAd,GAAuB,EAA3B,EAA+B;AAC7BsU,2BAAa,GAAGA,aAAa,CAACC,KAAd,CAAoB,CAApB,EAAuB,EAAvB,IAA6B,KAA7C;AACD;;AAED,mBAAOD,aAAP;AACD;;;;;;;yBAlBUF,a;AAAa,O;;;;cAAbA,a;AAAa;;;;;wEAAbA,a,EAAa;gBAHzB,kDAGyB;iBAHpB;AACJxY,gBAAI,EAAE;AADF,W;AAGoB,U;;;;;;;;;;;;;;;;;;ACL1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;UAOa4Y,a;AAEX,iCAAc;AAAA;AAAG;;;;qCAET,CACP;;;;;;;yBALUA,a;AAAa,O;;;cAAbA,a;AAAa,iC;AAAA,iB;AAAA,e;AAAA,gP;AAAA;AAAA;ACP1B;;AAEE;;AACE;;AACE;;AACE;;AAA4F;;AAAU;;AACxG;;AACA;;AACE;;AAA4F;;AAAW;;AACzG;;AACA;;AACE;;AAAgG;;AAAgB;;AAClH;;AACA;;AACE;;AAAgG;;AAAgB;;AAClH;;AACF;;AACF;;AAEA;;AACE;;AACF;;AACF;;;;AAjByC;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;AAGA;;AAAA;;;;;;;;;wEDP5BA,a,EAAa;gBALzB,uDAKyB;iBALf;AACT9R,oBAAQ,EAAE,UADD;AAETC,uBAAW,EAAE,uBAFJ;AAGTC,qBAAS,EAAE,CAAC,sBAAD;AAHF,W;AAKe,U;;;;;;;;;;;;;;;;;;;;AEP1B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,UAAI,sEAAYwD,UAAhB,EAA4B;AAC1B;AACD;;AAED,kFAAyBqO,eAAzB,CAAyC,yDAAzC,WACS,UAAApb,GAAG;AAAA,eAAIzB,OAAO,CAACF,KAAR,CAAc2B,GAAd,CAAJ;AAAA,OADZ;;;;;;;;;;;;;;;ACVA,eAASqb,wBAAT,CAAkCjM,GAAlC,EAAuC;AACtC;AACA;AACA,eAAOoD,OAAO,CAAC3C,OAAR,GAAkByL,IAAlB,CAAuB,YAAW;AACxC,cAAI9L,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,WAAC,CAAC/M,IAAF,GAAS,kBAAT;AACA,gBAAM+M,CAAN;AACA,SAJM,CAAP;AAKA;;AACD6L,8BAAwB,CAAC3L,IAAzB,GAAgC,YAAW;AAAE,eAAO,EAAP;AAAY,OAAzD;;AACA2L,8BAAwB,CAACxL,OAAzB,GAAmCwL,wBAAnC;AACAvL,YAAM,CAACC,OAAP,GAAiBsL,wBAAjB;AACAA,8BAAwB,CAACrZ,EAAzB,GAA8B,MAA9B","file":"main-es5.js","sourcesContent":["import { Injectable, EventEmitter } from \"@angular/core\";\nimport { throwError, BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { HttpClient, HttpHeaders, HttpErrorResponse, HttpParams } from \"@angular/common/http\";\nimport { catchError, map, tap } from \"rxjs/operators\";\n\nimport { UserService } from './user.service';\n\nimport { Book, Comment, BookList } from \"../models/book.model\";\nimport { WishlistEntry } from \"../models/user.model\";\n\nimport { UserResponse, UpdateUserResponseData } from  '../api.interfaces';\n\n// Set the http options\nconst httpOptions = {\n  params: null,\n  headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                             \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n};\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class BookService {\n\n  urlList = \"http://localhost:5000/api/books/\";\n  urlAdd = \"http://localhost:5000/api/books/add\";\n  urlFetch = \"http://localhost:5000/api/book/\";\n  urlUpdate = \"http://localhost:5000/api/book/\";\n  urlTags = \"http://localhost:5000/api/tags/\";\n  urlAddComment = \"http://localhost:5000/api/book/comment/add\";\n  urlGetComment = \"http://localhost:5000/api/book/comments\";\n  urlDeleteComments = \"http://localhost:5000/api/book/comment/remove/\"\n\n  urlCheckAvailable = \"http://localhost:5000/api/book/available\"\n\n  urlBorrowBook = \"http://localhost:5000/api/book/borrow\"\n  urlReturnBook = \"http://localhost:5000/api/book/return\"\n  urlRenewBook = \"http://localhost:5000/api/book/renew\"\n\n  urlAddToWishList = \"http://localhost:5000/api/book/wish\"\n  urlRemoveFromWishList = \"http://localhost:5000/api/book/unwish\"\n\n  urlEnterWaitingList = \"http://localhost:5000/api/book/wait\"\n  urlLeaveWaitingList = \"http://localhost:5000/api/book/unwait\"\n\n\n  totalBooks: number = 0;\n  bookList = new BehaviorSubject<Book[]>([]);\n  book = new BehaviorSubject<Book>(null);\n\n  constructor(private http: HttpClient,\n              private userService: UserService) {}\n\n  private handleError(error: HttpErrorResponse) {\n    if (error.error instanceof ErrorEvent) {\n      // Client-side or network error\n      console.error(\"An error occurred:\", error.error.message);\n    } else {\n      // Backend error\n      console.error(\n        `Backend returned code ${error.status}, ` + `body was: ${error.error}`\n      );\n    }\n    return throwError(error);\n  }\n\n  private extractData(res: Response) {\n    let body = res;\n    return body || {};\n  }\n\n  public getBookList(search: string, tag: string[],\n                    page: number, booksPerPage:number,\n                    appendResults:boolean, sortField: string,\n                    sortDirection: number): void {\n\n\n                      //console.log(this.getBookList.caller);\n\n    let params = new HttpParams();\n\n    params = params.append('page', page.toString());\n    params = params.append('booksPerPage', booksPerPage.toString());\n    params = params.append('sortField', sortField);\n    params = params.append('sortDirection', sortDirection.toString());\n\n    if (search)\n      params = params.append('search', search);\n    if (tag)\n      params = params.append('tag', JSON.stringify(tag));\n\n    httpOptions.params = params\n\n    this.http.get<BookList>(this.urlList, httpOptions)\n             .subscribe(\n                data => {\n                  if (!appendResults)\n                    this.bookList.next([]);\n\n                  this.bookList.next(this.bookList.value.concat(data.books));\n                  this.totalBooks = data.total.count;\n                },\n                err => {\n                  console.log(err);\n                }\n            );\n  }\n\n  public getBookListByTag(searchInput: string, tag: string): Observable<any> {\n    return this.http.get(this.urlList + searchInput + \"/\" + tag, httpOptions)\n                    .pipe(map(this.extractData),\n                          catchError(this.handleError)\n                    );\n  }\n\n  public fetchBook(bookID: number): Observable<any> {\n      return this.http.get<Book>(this.urlFetch + bookID, httpOptions)\n                      .pipe(catchError(this.handleError),\n                            tap(resData => {\n                              this.book.next(resData);\n                            })\n                      );\n  }\n\n  public addBook(book: Book): Observable<any> {\n\n    return this.http.post<Book>(this.urlAdd, book, httpOptions)\n                    .pipe(catchError(this.handleError)\n    );\n  }\n\n  public getAllTags(): Observable<any> {\n    return this.http.get(this.urlTags, httpOptions)\n                    .pipe(\n                        map(this.extractData),\n                        catchError(this.handleError)\n                    );\n  }\n\n  addBookToWishlist(bookID: number): Observable<any> {\n      let params = new HttpParams();\n      params = params.append('bookID', bookID.toString());\n      params = params.append('userID', this.userService.user.value._id.toString());\n\n      httpOptions.params = params;\n\n      return this.http.get<Book>(this.urlAddToWishList, httpOptions);\n  }\n\n  removeBookFromWishlist(bookID: number): Observable<any> {\n      let params = new HttpParams();\n      params = params.append('bookID', bookID.toString());\n      params = params.append('userID', this.userService.user.value._id.toString());\n\n      httpOptions.params = params;\n\n      return this.http.get<Book>(this.urlRemoveFromWishList, httpOptions)\n  }\n\n  isBookInWishList(bookID: number): boolean {\n\n    var bookIDs = this.userService.user.value.wishlist.map(entry => entry._id);\n\n    //console.log(bookIDs);\n\n    return (bookIDs.indexOf(bookID) > -1) ? true : false;\n  }\n\n  public addComment(comment: Comment) {\n    comment.BookId = this.book.value._id\n    comment.UserId = this.userService.user.value._id;\n\n     this.http\n      .post<Comment>(this.urlAddComment, comment, httpOptions)\n      .subscribe(comment => {\n                        this.book.value.Comments.unshift(comment);\n                        console.log('mmm', this.book.value.Comments);\n\n                        this.book.next(this.book.value);\n                      },\n                      errorMessage => {\n                        console.log(errorMessage);\n                      }\n      );\n  }\n\n  private updateBookData() {\n    return this.http\n      .patch<Book>(this.urlUpdate + this.book.value._id, this.book.value, httpOptions)\n      .pipe(\n        catchError(this.handleError),\n        tap(resData => {\n          console.log(resData);\n        })\n      );\n  }\n\n  public getComments(page: number, commentsPerPage: number) {\n\n    let userObs: Observable<any>;\n\n\n    userObs = this.http.post(this.urlGetComment,\n                            { bookID: this.book.value._id,\n                              page: page,\n                              docsPerPage: commentsPerPage\n                            },\n                            httpOptions)\n                      .pipe(\n                        catchError(this.handleError),\n                        tap()\n      );\n\n    userObs.subscribe(\n      resData => {\n        this.book.value.Comments = this.book.value.Comments.concat(resData);\n      },\n      errorMessage => {\n        console.log(errorMessage);\n      }\n    );\n\n  }\n\n   public removeComment(commentID:string): Observable<any> {\n     console.log('remove2');\n\n     return this.http.delete(this.urlDeleteComments + commentID, httpOptions)\n  }\n\n\n  public borrowBook(bookID: number): Observable<any> {\n\nconsole.log('bookID', bookID);\nconsole.log('this.userService.user.value', this.userService.user.value);\n\n\n    let params = new HttpParams();\n    params = params.append('bookID', bookID.toString());\n    params = params.append('userID', this.userService.user.value._id.toString());\n\n    httpOptions.params = params;\n\n    return this.http.get<Book>(this.urlBorrowBook, httpOptions)\n                    .pipe(\n                      catchError(this.handleError),\n                      tap(book => {\n                        /*console.log('borrowed book', book);\n\n                        let user = this.userService.user.value;\n                        user.borrowing.push(book);\n                        //this.userService.user.next(user);*/\n                      })\n                    )\n  }\n\n  public returnBook(bookID: number): boolean {\n    let params = new HttpParams();\n\n    params = params.append('bookID', bookID.toString());\n    params = params.append('userID', this.userService.user.value._id.toString());\n\n    httpOptions.params = params;\n\n    this.http.get<Book>(this.urlReturnBook, httpOptions)\n                    .pipe(\n                      catchError(this.handleError),\n                      tap(resData => {\n\n                        let user = this.userService.user.value;\n                      })\n                    )\n                    .subscribe();\n\n    return true;\n  }\n\n  public renewBook(bookID: number): Observable<any> {\n    let params = new HttpParams();\n\n    params = params.append('bookID', bookID.toString());\n    params = params.append('userID', this.userService.user.value._id.toString());\n\n    httpOptions.params = params;\n\n    return this.http.get(this.urlRenewBook, httpOptions)\n                    .pipe(\n                      catchError(this.handleError),\n                      tap(resData => {\n                        /*console.log('borrowed book', resData);\n\n                        let user = this.userService.user.value;\n                        user.borrowed.push(resData);\n\n                        this.userService.user.next(user);*/\n                      })\n                    );\n\n  }\n\n\n  public enterWaitingList(bookID: number): Observable<any> {\n    let params = new HttpParams();\n\n    params = params.append('bookID', bookID.toString());\n    params = params.append('userID', this.userService.user.value._id.toString());\n\n    httpOptions.params = params;\n\n    return this.http.get<Book>(this.urlEnterWaitingList, httpOptions);\n  }\n\n\n    public leaveWaitingList(bookID: number): Observable<any> {\n      let params = new HttpParams();\n\n      params = params.append('bookID', bookID.toString());\n      params = params.append('userID', this.userService.user.value._id.toString());\n\n      httpOptions.params = params;\n\n      return this.http.get<Book>(this.urlLeaveWaitingList, httpOptions);\n    }\n\n  isBookBorrowed(bookID: number): boolean {\n    var bookIDs = this.userService.user.value.borrowing.map(entry => entry._id);\n\n    return (bookIDs.indexOf(bookID) > -1) ? true : false;\n  }\n}\n","import { User } from \"./user.model\";\n\nexport class Comment {\n  public _id: number;\n  public comment: string;\n  public BookId: number;\n  public UserId: number;\n}\n\nexport class BookList {\n  public books: Book[];\n  public total: { count: number };\n}\n\nexport class LendingEntry {\n    public _id: number;\n    public lendingEntry: { createdAt: Date, dueDate: Date };\n    public book: Book;\n    public user: User;\n\n    constructor(id, createdAt, dueDate, book?, user?) {\n      this._id = id;\n      this.lendingEntry = { createdAt: createdAt, dueDate: dueDate };\n      this.book = book;\n      this.user = user;\n    }\n}\n\nexport class QueueEntry {\n    public _id: number;\n    public waitingEntry: { createdAt: Date };\n    public book: Book;\n    public user: User;\n\n    constructor(id, createdAt, dueDate, book?, user?) {\n      this._id = id;\n      this.waitingEntry = { createdAt: createdAt };\n      this.book = book;\n      this.user = user;\n    }\n}\n\nclass ListObj {\n  public name: string;\n\n  constructor(name: string) {\n    this.name = name;\n  }\n}\n\nexport class Book {\n  public _id: number;\n  public code: string;\n  public title: string;\n  public subtitle: string;\n  public description: string;\n  public Authors: ListObj[];\n  public Organisers: ListObj[];\n  public Translators: ListObj[];\n  public press: string;\n  public year: number;\n  public collection: string;\n  public volume: string;\n  public Locals: ListObj[];\n  public edition: number;\n  public pages: number;\n  public ex: string;\n  public format: string;\n  public status: string;\n  public condition: string;\n  public isbn: number;\n  public Tags: ListObj[];\n  public coverURL: string;\n  public Comments: Comment[];\n  public total_comments: Number;\n  public createdAt: Date;\n  public queue: QueueEntry[];\n  public lending: LendingEntry[];\n\n  constructor(book?) {\n    if (book) {\n        this._id = book._id;\n        this.code = book.code;\n        this.title = book.title;\n        this.subtitle = book.subtitle;\n        this.description = book.description;\n        this.press = book.press;\n        this.year = book.year;\n        this.collection = book.collection;\n        this.volume = book.volume;\n        this.edition = book.edition;\n        this.pages = book.pages;\n        this.ex = book.ex;\n        this.format = book.format;\n        this.status = book.status;\n        this.condition = book.condition;\n        this.isbn = book.isbn;\n        this.coverURL = book.coverURL;\n        this.Comments = book.comments;\n        this.total_comments = book.total_comments;\n        this.createdAt = book.createdAt;\n\n        this.Authors = book.author.map(element => new ListObj(element));\n        this.Organisers = book.organiser.map(element => new ListObj(element));\n        this.Translators = book.translator.map(element => new ListObj(element));\n        this.Locals = book.local.map(element => new ListObj(element));\n        this.Tags = book.tags.map(element => new ListObj(element));\n\n        this.queue = book.queue;\n        this.lending = book.lending;\n    }\n  }\n}\n","import { Component, OnInit, OnDestroy, Input } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\n\nimport { BookService } from \"../../../services/book.service\";\nimport { UserService } from '../../../services/user.service';\n\nimport { Book } from '../../../models/book.model';\nimport { User, WishlistEntry } from '../../../models/user.model';\n\nclass Action {\n    public link: string;\n    public icon: string;\n    public text: string;\n    public colorClass: string;\n\n    constructor(link, icon, text, colorClass) {\n      this.link = link;\n      this.icon = icon;\n      this.text = text;\n      this.colorClass = colorClass;\n    }\n}\n\n@Component({\n  selector: 'app-actions',\n  templateUrl: './actions.component.html',\n  styleUrls: ['./actions.component.css']\n})\nexport class ActionsComponent implements OnInit {\n\n  @Input() book;\n  @Input() parentClass;\n\n  private userSubscription: Subscription;\n  public user: User;\n  bookActions = [null, null, null, null]\n\n  constructor(private router: Router,\n              private datePipe: DatePipe,\n              private bookService: BookService,\n              private userService: UserService) { }\n\n  ngOnInit(): void {\n\n    this.userSubscription = this.userService.user.subscribe(user => {\n        if (user) {\n          this.user = user;\n          this.defineActions(this.user, this.book)\n        }\n      });\n  }\n\n  private defineActions(user: User, book: Book) {\n\n    const option_BookAvailable = new Action(null, 'fa-check-circle', 'Disponível', 'icon-green');\n    const option_EnterWaitingList = new Action(this.onEnterWaitingList.bind(this), 'fa-list-ol', 'Entrar na fila de espera', '');\n    const option_LeaveWaitingList = new Action(this.onLeaveWaitingList.bind(this), 'fa-list-ol', 'Sair da fila de espera', '');\n    const option_Comments = new Action(this.onOpenComments.bind(this), 'fa-comments', 'Comentários', '');\n    const option_AddToWishlist = new Action(this.onAddToWishist.bind(this), 'fa-clipboard-list', 'Adicionar à minha lista', '');\n    const option_RemoveFromWishlist = new Action(this.onRemoveFromWishist.bind(this), 'fa-trash-alt', 'Remover da minha lista', '');\n    const option_RenewLending = new Action(this.onRenewBook.bind(this), 'fa-undo-alt', 'Renovar empréstimo', '');\n    const option_Due = new Action(null, 'fa-exclamation-triangle', 'Devolução do livro atrasada', 'icon-red');\n    const option_BorrowBook = new Action(this.onBorrowBook.bind(this), 'fa-book', 'Solicitar empréstimo', '');\n    const option_ReturnBook = new Action(this.onReturnBook.bind(this), 'fa-file-signature', 'Devolver livro', '');\n    const option_CannotLendBookMax = new Action(null, 'fa-clone', 'Máximo de 2 livros de cada vez', '');\n    const option_CannotLendBookWait = new Action(null, 'fa-clock', 'Alguém está na fila de espera', '');\n    const option_BookUnavailableQueue = new Action(null, 'fa-times-circle', 'Indisponível. Alguém está na fila de espera.', 'icon-red');\n\n    let   option_DueDate = null;\n    let   option_BookUnavailableUntil = new Action(null, 'fa-times-circle', 'Indisponível ', 'icon-red');\n\n    if (book.lending.length > 0) {\n        option_BookUnavailableUntil.text = option_BookUnavailableUntil.text.concat(' até ' + this.datePipe.transform(new Date(book.lending[0].lendingEntry.dueDate),'dd/MM/yyyy'));\n        option_DueDate = new Action(null, 'fa-calendar-alt', 'Devolver em ' + this.datePipe.transform(new Date(book.lending[0].lendingEntry.dueDate),'dd/MM/yyyy'), '');\n    }\n\n    const bookIsAvailable = this.isBookAvailable(book);\n    const userCanBorrow = this.canUserBorrow(user);\n    const userIsBorrowingBook = this.isUserBorrowingBook(book, user);\n    const userIsWaitingBook = this.isUserWaitingBook(book, user);\n    const bookIsInUserWishlist = this.isBookInUserWishlist(book, user);\n    const bookIsDue = this.isBookDue(book);\n    const anotherUserIsWaitingBook = this.isAnotherUserWaitingBook(book, user);\n\n\n    /*if (book._id == 1 || book._id == 47 ) {\n      console.log('bookIsAvailable', bookIsAvailable);\n      console.log('anotherUserIsWaitingBook', anotherUserIsWaitingBook);\n      console.log('userIsBorrowingBook', userIsBorrowingBook);\n      console.log('bookIsDue', bookIsDue);\n\n    }*/\n\n\n    // FIRST ACTION\n    if (bookIsAvailable && !anotherUserIsWaitingBook) {\n      this.bookActions[0] = option_BookAvailable;\n    }\n\n    if (bookIsAvailable && anotherUserIsWaitingBook) {\n      this.bookActions[0] = option_BookUnavailableQueue;\n    }\n\n    if (!bookIsAvailable && !userIsBorrowingBook) {\n\n      this.bookActions[0] = option_BookUnavailableUntil;\n    }\n\n    if (!bookIsAvailable && userIsBorrowingBook && !bookIsDue) {\n      this.bookActions[0] = option_DueDate;\n    }\n\n    if (!bookIsAvailable && userIsBorrowingBook && bookIsDue && anotherUserIsWaitingBook) {\n      this.bookActions[0] = option_Due;\n    }\n\n    if (!bookIsAvailable  && userIsBorrowingBook && bookIsDue && !anotherUserIsWaitingBook) {\n      this.bookActions[0] = option_RenewLending;\n    }\n\n    // SECOND ACTION\n    if (bookIsAvailable && userCanBorrow && !anotherUserIsWaitingBook) {\n      this.bookActions[1] = option_BorrowBook;\n    }\n    if (bookIsAvailable && userCanBorrow && anotherUserIsWaitingBook && !userIsWaitingBook ) {\n      //this.bookActions[1] = option_CannotLendBookWait;\n      this.bookActions[1] = option_EnterWaitingList;\n    }\n    if (bookIsAvailable && userCanBorrow && anotherUserIsWaitingBook && userIsWaitingBook ) {\n      //this.bookActions[1] = option_CannotLendBookWait;\n      this.bookActions[1] = option_LeaveWaitingList;\n    }\n    if (bookIsAvailable  && !userCanBorrow) {\n      this.bookActions[1] = option_CannotLendBookMax;\n    }\n    if (!bookIsAvailable  && userIsBorrowingBook ) {\n      this.bookActions[1] = option_ReturnBook;\n    }\n    if (!bookIsAvailable  && !userIsBorrowingBook && !userIsWaitingBook) {\n      this.bookActions[1] = option_EnterWaitingList;\n    }\n    if (!bookIsAvailable  && !userIsBorrowingBook && userIsWaitingBook) {\n      this.bookActions[1] = option_LeaveWaitingList;\n    }\n\n    // Third ACTION\n    if (bookIsInUserWishlist) {\n      this.bookActions[2] = option_RemoveFromWishlist;\n    }\n    if (!bookIsInUserWishlist) {\n      this.bookActions[2] = option_AddToWishlist;\n    }\n\n    // Fourth ACTION\n    this.bookActions[3] = option_Comments;\n\n\n  }\n\n\n  private isBookAvailable(book: Book): boolean {\n    return book.lending.length ? false : true;\n  }\n\n  private canUserBorrow(user: User): boolean {\n    return user.borrowing.length < 2;\n  }\n\n  private isUserBorrowingBook(book: Book, user: User): boolean {\n    if (book.lending.length === 0) {\n      return false;\n    } else {\n      return book.lending[0]._id === user._id;\n    }\n  }\n\n  private isUserWaitingBook(book: Book, user: User): boolean {\n    var waitingBookIds = user.waiting.map(entry => entry._id);\n    return (waitingBookIds.indexOf(book._id) > -1) ? true : false;\n  }\n\n  private isBookInUserWishlist(book: Book, user: User): boolean {\n    var wishlishBookIds = user.wishlist.map(entry => entry._id);\n    return (wishlishBookIds.indexOf(book._id) > -1) ? true : false;\n  }\n\n  private isAnotherUserWaitingBook(book: Book, user: User): boolean {\n    var waitingUserIds = book.queue.map(entry => entry._id);\n\n    if (book.queue.length == 0) {\n      return false;\n    } else {\n      if (book.queue[0]._id != user._id)\n        return true;\n    }\n    return false;\n  }\n\n  private isBookDue(book: Book): boolean {\n\n    if (book.lending.length === 0) {\n      return false;\n    } else {\n\n      const today = this.withoutTime(new Date());\n      const dueDate = this.withoutTime(new Date(book.lending[0].lendingEntry.dueDate));\n\n      return dueDate < today;\n    }\n  }\n\n\n\n  //////////\n\n  onBorrowBook(book: Book): boolean {\n\n    var lending = this.bookService.borrowBook(book._id)\n          .subscribe(lending => {\n             book.lending.push(lending.user[0]);\n             this.user.borrowing.push(lending.book[0]);\n\n             this.userService.user.value.borrowing = this.user.borrowing;\n             this.userService.user.next(this.userService.user.value);\n\n           });\n    return true;\n  }\n\n  onReturnBook(book: Book): boolean {\n    this.bookService.returnBook(book._id);\n\n    let index = this.user.borrowing.findIndex(lending => lending._id == book._id);\n    if (index > -1) {\n       this.user.borrowing.splice(index, 1);\n    }\n\n    index = book.lending.findIndex(lending => lending._id == this.user._id);\n    if (index > -1) {\n       book.lending.splice(index, 1);\n    }\n\n    this.userService.user.value.borrowing = this.user.borrowing;\n    this.userService.user.next(this.userService.user.value);\n\n    return true;\n  }\n\n  onRenewBook(book: Book): boolean {\n    this.bookService.renewBook(book._id)\n          .subscribe(lending => {\n\n              book.lending[0].lendingEntry.dueDate = lending.dueDate;\n\n              this.defineActions(this.user, book);\n           });\n\n    return true;\n  }\n\n  onAddToWishist(book: Book): boolean {\n    this.bookService.addBookToWishlist(book._id)\n        .subscribe(wishlist => {\n            const wishlistEntry = new WishlistEntry(wishlist[0].BookId, wishlist[0].createdAt)\n\n            this.user.wishlist.push(wishlistEntry);\n            this.defineActions(this.user, book);\n         });\n\n    return true;\n  }\n\n  onRemoveFromWishist(book: Book): boolean {\n    this.bookService.removeBookFromWishlist(book._id)\n        .subscribe(returnedBook => {\n            let index = this.user.wishlist.findIndex(entry => entry._id == returnedBook._id);\n            if (index > -1) {\n               this.user.wishlist.splice(index, 1);\n            }\n            this.defineActions(this.user, book);\n         });\n\n    return true;\n  }\n\n  onEnterWaitingList(book: Book): boolean {\n    this.bookService.enterWaitingList(book._id)\n        .subscribe(waiting => {\n\n          this.user.waiting.push(waiting.book[0]);\n          book.queue.push(waiting.user[0]);\n\n          this.defineActions(this.user, book);\n         });\n    return true;\n  }\n  onLeaveWaitingList(book: Book): boolean {\n    this.bookService.leaveWaitingList(book._id)\n        .subscribe(returnedBook => {\n            let index = this.user.waiting.findIndex(entry => entry._id == returnedBook._id);\n            if (index > -1) {\n               this.user.waiting.splice(index, 1);\n            }\n\n            index = book.queue.findIndex(entry => entry._id == this.user._id);\n            if (index > -1) {\n               this.user.waiting.splice(index, 1);\n            }\n\n            this.defineActions(this.user, book);\n         });\n\n      return true;\n  }\n\n  onOpenComments(book: Book, user: User, bookService: BookService): boolean {\n    this.router.navigate(['books', 'entry'], { queryParams: { id: book._id }, fragment: 'comments' });\n    return true;\n  };\n\n  withoutTime(date: Date): number {\n    return date.setHours(0, 0, 0, 0);\n  }\n\n  ngOnDestroy() {\n    this.userSubscription.unsubscribe();\n  }\n\n}\n","<div [ngClass]=\"['row', 'book-icons', parentClass]\" *ngIf=\"!!user\">\n\n  <div class=\"col-md-3\" *ngFor=\"let action of bookActions\">\n\n    <div *ngIf=\"!action.link\" >\n      <div class=\"nav-link\">\n        <i class=\"fas\" [ngClass]=\"[action.icon, action.colorClass]\"></i>\n        <br/>\n        <span class=\"icon-label\">{{action.text}}</span>\n      </div>\n\n    </div>\n\n    <div *ngIf=\"action.link\">\n       <a class=\"nav-link\" (click)=\"action.link(book)\">\n         <i class=\"fas\" [ngClass]=\"[action.icon, action.colorClass]\"></i>\n         <br/>\n         <span class=\"icon-label\">{{action.text}}</span>\n       </a>\n    </div>\n\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { SearchService } from \"../../services/search.service\";\n\n@Component({\n  selector: 'app-landing',\n  templateUrl: './landing.component.html',\n  styleUrls: ['./landing.component.css']\n})\nexport class LandingComponent implements OnInit {\n\n  constructor(private router: Router,\n              private search: SearchService,) {\n  }\n\n  ngOnInit(): void {\n    this.search.searchInputUpdated.emit('');\n  }\n\n  enter() {\n    this.router.navigate(['books']);\n  }\n}\n","<div class=\"fill\">\n\n  <div class=\"box\">\n\n    <div class=\"image\">\n      <img src=\"./assets/logocolor.png\" />\n    </div>\n\n    <h2 class=\"color-primary\">O que é?</h2>\n    <p class=\"text-primary\">\n    A biblioteca social do CSA A Gralha é um espaço de construção colectiva que disponibiliza um acervo para estimular o pensamento crítico e a (auto-)reflexão; inspirar práticas de auto-gestão, autonomia e transformação radical; apoiar a criação de conhecimento acessível e o exercício da investigação desde/para a comunidade e os movimentos sociais de base; facilitar o intercâmbio de saberes e fazeres emancipatórios; contribuir para a preservação da memória histórica, entre outros.\n    </p>\n\n    <app-gallery></app-gallery>\n\n    <h2 class=\"color-primary\">Como é que funciona?</h2>\n\n    <h3 class=\"color-primary\">1. Empréstimo:</h3>\n    <p class=\"text-primary\">\n      A biblioteca social disponibiliza para empréstimo a maior parte dos seus materiais (publicações e audiovisuais), exceptuando-se aqueles que apresentam uma etiqueta de cor roxa na lombada. Todos os empréstimos são gratuitos.\n    </p>\n    <p class=\"text-primary\">\n      A requisição, a renovação, a devolução e a reserva podem ser realizadas durante os dias de abertura do centro, das 16h às 20h, através do sistema da biblioteca social que está disponível no piso 0 do CSA A Gralha.\n    </p>\n    <p class=\"text-primary\">\n      É necessário inicialmente criar uma conta de amigue no sistema da biblioteca social, através da qual passarás a auto-gerir os teus empréstimos, a renovação, as devoluções e os pedidos de reserva. Poderás ainda partilhar as tuas experiências de leitura na caixa de comentários.\n    </p>\n    <p class=\"text-primary\">\n      O período máximo de requisição é de 14 dias; o número de empréstimos em simultâneo é de duas publicações/audiovisuais.\n    </p>\n    <p class=\"text-primary\">\n      É possível proceder à renovação do empréstimo, desde que a biblioteca não necessite do material em causa para responder a outros pedidos. Cada empréstimo pode ser renovado até ao limite máximo de seis pedidos sucessivos.\n    </p>\n    <p class=\"text-primary\">\n      A devolução terá de ser feita presencialmente, no termo do prazo definido, no CSA A Gralha.\n    </p>\n    <p class=\"text-primary\">\n      É possível pedir a reserva de materiais da biblioteca, num limite máximo de duas publicações/audiovisuais em simultâneo. Os pedidos mantêm-se válidos durante cinco dias após a disponibilidade da reserva.\n    </p>\n\n\n    <h3 class=\"color-primary\">2. Gestão de doações:</h3>\n    <p class=\"text-primary\">\n      O acervo físico da biblioteca social é construído principalmente através de doações por parte de individualidades, colectivos, editoras, livrarias e centros de documentação.\n    </p>\n    <p class=\"text-primary\">\n      A biblioteca social recebe doações de livros, dvd’s, fanzines, jornais, revistas, posters, postais e folhetos, com base nos seguintes critérios: a adequação dos materiais aos princípios do CSA A Gralha, aos objectivos gerais e eixos temáticos da \tbiblioteca, duplicidade com a colecção actual, estado de conservação e espaço disponível.\n    </p>\n    <p class=\"text-primary\">\n      Para a realização de doações, entra em contacto connosco presencialmente ou através do e-mail <a href=\"mailto:agralhabs@riseup.net\" class=\"color-primary\">agralhabs@riseup.net</a>. Se pretendes fazer uma doação de vários materiais, facilitará o processo de selecção se nos facultares uma lista/breve descrição dos conteúdos.\n    </p>\n    <p class=\"text-primary\">\n      Após a aceitação de uma doação, o GT/Biblioteca.social do CSA A Gralha ficará responsável por gerir o tratamento técnico, a localização e as condições de uso desse material.\n    </p>\n\n    <h3 class=\"color-primary\">3. Ética, usos e cuidados:</h3>\n    <p class=\"text-primary\">\n      A biblioteca social é um dispositivo comunitário cujo funcionamento implica responsabilidade, compromisso e relações de cuidado colectivo. Em caso de perda ou dano de um empréstimo, será necessário substitui-lo por um exemplar em bom estado ou realizar um donativo monetário à biblioteca social para a sua aquisição.\n    </p>\n\n    <h2 class=\"color-primary\">Como é que se organiza?</h2>\n    <p class=\"text-primary\">\n      O GT/Biblioteca.social – um dos grupos de trabalho do CSA A Gralha – é responsável pela realização das tarefas necessárias ao funcionamento da biblioteca (por exemplo, gestão de empréstimos, gestão de doações, catalogação, organização de actividades, difusão, logística, etc.).\n    </p>\n\n\n    <h2 class=\"color-primary\">Como é que podes participar?</h2>\n    <ul class=\"text-primary\">\n      <li>Integrar o GT/Biblioteca.social;</li>\n      <li>Propor a organização de actividades (por exemplo, clubes de leitura, conversas e debates, grupos de tradução, oficinas);</li>\n      <li>Fazer uma doação;</li>\n      <li>Dar contributos para o acervo digital.</li>\n    </ul>\n\n    <h2 class=\"color-primary\">Contactos</h2>\n    <p class=\"text-primary\">\n      Biblioteca social | Email: <a href=\"mailto:agralhabs@riseup.net\" class=\"color-primary\">agralhabs@riseup.net</a><br/>\n      Travessa Anselmo Braamcamp, 74, Bonfim, Porto <br/>\n      CSA A Gralha\n    </p>\n\n    <button type=\"button\" class=\"btn btn-primary btn-lg btn-block bg-primary\"\n            (click)=\"enter();\">Acessar a Biblioteca Social</button>\n  </div>\n\n</div>\n","import { Component, OnInit, OnDestroy, EventEmitter } from '@angular/core';\n\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { UserService } from '../../services/user.service';\nimport { BookService } from '../../services/book.service';\nimport { SearchService } from \"../../services/search.service\";\n\nimport { User } from '../../models/user.model';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n\n  isCollapsed = true;\n  searchInput = '';\n  bookList = [];\n  isAuthenticated = false;\n  error = \"\";\n\n  private userSubscription: Subscription;\n  public user: User;\n\n  constructor(private search: SearchService,\n              public router: Router,\n              private route: ActivatedRoute,\n              private userService: UserService,\n              private bookService: BookService) {\n  }\n\n  ngOnInit(): void {\n    this.userSubscription = this.userService.user.subscribe(user => {\n      this.isAuthenticated = !!user;\n      this.user = user;\n    });\n\n    //this.userService.autologin();\n\n    this.search.searchInputUpdated.subscribe(searchInputValue => {\n      this.searchInput = searchInputValue;\n      this.search.searchInputValue = searchInputValue;\n    })\n\n    window.onbeforeunload = () => this.ngOnDestroy();\n\n  }\n\n  onUpdateSearchInput(event: Event) {\n    console.log('event', event);\n\n    this.searchInput = (<HTMLInputElement>event.target).value;\n\n    this.search.searchInputUpdated.emit(this.searchInput)\n    this.router.navigate(['books']);\n  }\n\n  onLogout() {\n    let authObs: Observable<any>;\n\n    authObs = this.userService.logout();\n\n    authObs.subscribe(\n      resData => {\n        this.isAuthenticated = false;\n        this.router.navigate(['/']);\n      },\n      errorMessage => {\n        this.error = errorMessage;\n      }\n    );\n  }\n\n  ngOnDestroy() {\n    this.userSubscription.unsubscribe();\n    this.search.searchInputUpdated.unsubscribe();\n    this.onLogout();\n  }\n}\n","\n<nav class=\"navbar navbar-expand-lg navbar-dark\" *ngIf=\"this.router.url !== '/'\">\n  <div class=\"navbar-brand text-primary\" routerLink=\"/\">\n      <img src=\"./assets/agralha1.png\" height=\"50\" alt=\"Biblioteca Social CSA A Gralha Centro Social Auto-gerido\">\n  </div>\n  <button class=\"navbar-toggler\" type=\"button\"\n          data-toggle=\"collapse\"\n          data-target=\"#navbarNavDropdown\"\n          aria-controls=\"navbarNavDropdown\"\n          aria-expanded=\"false\"\n          aria-label=\"Toggle navigation\">\n    <span class=\"navbar-toggler-icon\"></span>\n  </button>\n  <div class=\"collapse navbar-collapse\" id=\"navbarNavDropdown\">\n    <ul class=\"navbar-nav mr-auto mt-2 mt-lg-0 separate\">\n\n      <li class=\"nav-item\" routerLinkActive=\"active\">\n        <a class=\"nav-link text-primary\" routerLink=\"/audiovisual\">Audiovisual</a>\n      </li>\n      <li class=\"nav-item active\" routerLinkActive=\"active\">\n        <a class=\"nav-link text-primary\" routerLink=\"/books\">Livros<span class=\"sr-only\">(current)</span></a>\n      </li>\n      <li class=\"nav-item\" routerLinkActive=\"active\">\n        <a class=\"nav-link text-primary\" routerLink=\"/miscelanea\">Miscelânea</a>\n      </li>\n      <li class=\"nav-item\" routerLinkActive=\"active\">\n        <a class=\"nav-link text-primary\" routerLink=\"/revistas\">Revistas</a>\n      </li>\n    </ul>\n\n    <form class=\"form-inline my-2 my-lg-0\" *ngIf=\"this.router.url !== '/books/add'\">\n      <input class=\"form-control mr-sm-2 flex-fill bg-light\" type=\"search\" placeholder=\"Search\"\n        (input)=\"onUpdateSearchInput($event)\">\n    </form>\n\n    <ul class=\"navbar-nav mr-auto mt-2 mt-lg-0 dropdown\" *ngIf=\"this.router.url !== '/auth' && this.router.url !== '/signup'\">\n      <li class=\"nav-item login\" *ngIf=\"!user\">\n        <a class=\"nav-link text-primary \" routerLink=\"/auth\">Acesso</a>\n      </li>\n      <li class=\"nav-item dropdown\"  *ngIf=\"user\">\n\n        <a class=\"nav-link dropdown-toggle text-primary\" id=\"navbarDropdownMenuLink\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n          {{user.name | shortname}}\n        </a>\n        <div class=\"dropdown-menu bg-layer1\" aria-labelledby=\"navbarDropdownMenuLink\">\n          <a class=\"dropdown-item color-primary\" [routerLink]=\"['user', 'data']\">Meus dados</a>\n          <a class=\"dropdown-item color-primary\" [routerLink]=\"['user', 'list']\">Minha lista</a>\n          <a class=\"dropdown-item color-primary\" [routerLink]=\"['user', 'lendings']\">Meus empréstimos</a>\n          <a class=\"dropdown-item color-primary\" [routerLink]=\"['user', 'comments']\">Meus comentários</a>\n          <hr/>\n          <a class=\"dropdown-item color-primary\" (click)=\"onLogout()\">Logout</a>\n\n          <div *ngIf=\"user.administrator\">\n            <hr/>\n            <a class=\"dropdown-item color-primary\" [routerLink]=\"['admin', 'lendings']\">Gestão</a>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n</nav>\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { User } from '../../../models/user.model';\nimport { LendingEntry } from '../../../models/book.model';\n\nimport { UserService } from '../../../services/user.service';\n\nimport { BookService } from \"../../../services/book.service\";\n\n@Component({\n  selector: 'app-lendings',\n  templateUrl: './user-lendings.component.html',\n  styleUrls: ['./user-lendings.component.css']\n})\nexport class UserLendingsComponent implements OnInit {\n\n  private userSubscription: Subscription;\n  public user: User;\n  public borrowing: LendingEntry[] = [];\n\n  constructor(private userService: UserService,\n              private bookService: BookService) { }\n\n  ngOnInit(): void {\n\n    this.userSubscription = this.userService.user.subscribe(user => {\n      if (user) {\n        this.user = user;\n        this.loadLendinglist();\n      }\n    });\n  }\n\n  loadLendinglist() {\n    this.borrowing = [];\n    for (let lendingEntry of this.user.borrowing) {\n      this.bookService.fetchBook(lendingEntry._id)\n                      .subscribe(\n                          book => {\n                            lendingEntry.book = book;\n\n                            this.borrowing.push(lendingEntry);\n                          },\n                          err => {\n                            console.log(err);\n                          }\n                      );\n    }\n  }\n\n  onReturnBook(bookID: number): boolean {\n\n    this.bookService.returnBook(bookID);\n\n    const index = this.borrowing.findIndex(entry => entry._id == bookID);\n    if (index > -1) {\n       this.borrowing.splice(index, 1);\n    }\n\n    this.userService.user.value.borrowing.findIndex(entry => entry._id == bookID);\n    if (index > -1) {\n       this.userService.user.value.borrowing.splice(index, 1);\n    }\n    this.userService.user.next(this.userService.user.value);\n\n    return true;\n  }\n\n}\n","\n<div *ngIf=\"user\">\n  <div *ngFor=\"let entry of borrowing\">\n\n    <div class=\"addedIn d-flex justify-content-start\">\n      <div class=\"col-lg-2\">&nbsp;</div>\n      <span class=\"col-lg-10 text-primary\"><span class=\"color-primary\">emprestado em</span> {{entry.lendingEntry.createdAt | date:'longDate'}}</span>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-2\">\n        <img src=\"{{entry.book.coverURL}}\" default=\"assets/covers/0.jpg\" alt=\"\">\n      </div>\n      <div class=\"info col-lg-7\">\n          <span class=\"bookTitle\">{{entry.book.title}}</span>\n          <span class=\"bookSubtitle\">{{entry.book.subtitle}}</span>\n          <hr/>\n\n          <div *ngIf=\"entry.book.Authors.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Autoria:</span>\n              <span *ngFor=\"let author of entry.book.Authors; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{author.name}}\n              </span>\n            </span>\n          </div>\n          <div *ngIf=\"entry.book.Organisers.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Organização:</span>\n              <span *ngFor=\"let organiser of entry.book.Organisers; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{organiser.name}}\n              </span>\n            </span>\n          </div>\n          <div *ngIf=\"entry.book.Translators.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Tradução:</span>\n              <span *ngFor=\"let translator of entry.book.Translators; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{translator.name}}\n              </span>\n            </span>\n          </div>\n          <div>\n            <span class=\"bookPressYear text-primary\">\n              <span class=\"color-primary\">Editora:</span>\n              {{entry.book.press}}&nbsp;&nbsp;&nbsp;\n              <span class=\"color-primary\">Ano:</span>\n              {{entry.book.year}}\n            </span>\n          </div>\n          <div class=\"list-actions d-flex justify-content-end\">\n            <div class=\"p-2\">\n                <a class=\"color-primary\" routerLink=\"/books/entry\"\n                    [queryParams]=\"{id: entry.book._id}\">Ver livro</a>\n            </div>\n            <div class=\"p-2 text-primary\">|</div>\n            <div class=\"p-2\">\n              <a class=\"color-primary\"\n                (click)=\"onReturnBook(entry.book._id)\">Devolver livro</a>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import {Directive, Input, HostBinding} from '@angular/core'\n@Directive({\n    selector: 'img[default]',\n    host: {\n      '(error)':'updateUrl()',\n      '(load)': 'load()',\n      '[src]':'src'\n     }\n  })\n\n export class ImagePreloadDirective {\n    @Input() src:string;\n    @Input() default:string;\n    @HostBinding('class') className\n\n    updateUrl() {\n      this.src = this.default;\n    }\n    load(){\n      this.className = 'image-loaded';\n    }\n  }\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, FormArray, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\n\nimport { User } from '../../models/user.model';\nimport { UserService } from '../../services/user.service';\n\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.component.html',\n  styleUrls: ['./signup.component.css']\n})\nexport class SignupComponent implements OnInit {\n\n  userForm: FormGroup;\n  public formUpdated: boolean = false;\n  error: string = null;\n\n  constructor(private userService: UserService,\n              public router: Router,\n              private route: ActivatedRoute) { }\n\n  ngOnInit(): void {\n    this.initForm();\n  }\n\n\n  private initForm() {\n    this.userForm = new FormGroup({\n      'name': new FormControl(null, Validators.required),\n      'email': new FormControl(null, [Validators.required, Validators.email]),\n      'password': new FormControl(null, [Validators.required]),\n      'acceptMailling': new FormControl(null),\n    });\n\n  }\n\n  onSubmit() {\n\n    const user = new User(this.userForm.value);\n    user.administrator = false;\n\n    this.userService\n      .addUser(user)\n      .subscribe(newuser => {\n            this.userService.login(user.email, this.userForm.value.password)\n                            .subscribe(\n                                resData => {\n                                  this.router.navigate(['/books']);\n                                },\n                                errorMessage => {\n                                  this.error = errorMessage;\n                                });\n          },\n          errorMessage => {\n            console.log(errorMessage);\n\n            this.error = errorMessage;\n          }\n      );\n  }\n\n  hideAlert() {\n    this.formUpdated = false;\n  }\n\n}\n","\n<div class=\"userForm\">\n\n    <form class=\"\" [formGroup]=\"userForm\" (ngSubmit)=\"onSubmit()\">\n\n      <div class=\"alert alert-danger\" *ngIf=\"error\">\n        <p>{{ error }}</p>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"name\" class=\"text-primary\">Nome</label>\n        <input type=\"text\" id=\"name\"\n                class=\"form-control bg-light\"\n                (click)=\"hideAlert()\"\n                formControlName=\"name\"/>\n        <span class=\"text-muted\"\n              *ngIf=\"!userForm.get('name').valid && userForm.get('name').touched\">\n              Este campo é obrigatório\n        </span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"email\" class=\"text-primary\">Email</label>\n        <input type=\"text\" id=\"email\"\n                class=\"form-control bg-light\"\n                formControlName=\"email\"\n                (click)=\"hideAlert()\"\n                email/>\n        <span\n          *ngIf=\"!userForm.get('email').valid && userForm.get('email').touched\">\n          <span class=\"text-muted\" *ngIf=\"userForm.get('email').errors['email']\">Formato de e-mail inválido</span>\n          <span class=\"text-muted\" *ngIf=\"userForm.get('email').errors['required']\">Este campo é obrigatório</span>\n\n        </span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"password\" class=\"text-primary\">Senha</label>\n        <input type=\"password\" id=\"password\"\n                class=\"form-control bg-light\"\n                (click)=\"hideAlert()\"\n                formControlName=\"password\"/>\n        <span class=\"text-muted\"\n              *ngIf=\"!userForm.get('password').valid && userForm.get('password').touched\">\n              Este campo é obrigatório\n        </span>\n      </div>\n\n      <div class=\"form-row\">\n        <label for=\"email\" class=\"text-primary\">Quero receber notícias da Gralha</label>\n\n        <div class=\"checkboxContainer\">\n          <input type=\"checkbox\" id=\"acceptMailling\"\n                  class=\"form-control checkbox bg-light\"\n                  (click)=\"hideAlert()\"\n                  formControlName=\"acceptMailling\"/>\n        </div>\n      </div>\n\n\n      <div class=\"d-flex justify-content-end\">\n        <button type=\"submit\" class=\"btn btn-primary bg-primary\"\n                [disabled]=\"!userForm.valid\" >\n                  Cadastrar\n        </button>\n      </div>\n\n    </form>\n\n    <div class=\"alert alert-light\" role=\"alert\" *ngIf=\"formUpdated\">\n      Seus dados foram atualizados.\n    </div>\n\n\n\n</div>\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { User } from '../../../../models/user.model';\nimport { AdminService } from \"../../../../services/admin.service\";\n\n@Component({\n  selector: 'app-profiles-list',\n  templateUrl: './profiles-list.component.html',\n  styleUrls: ['./profiles-list.component.css']\n})\nexport class ProfilesListComponent implements OnInit {\n\n\n  letter:string = \"\"\n  users:User[] = []\n  routeSubscription: Subscription;\n\n  constructor(public router: Router,\n              private route: ActivatedRoute,\n              private adminService: AdminService) { }\n\n  ngOnInit(): void {\n    this.routeSubscription = this.route.queryParams.subscribe(\n            (params: Params) => {\n              this.listUserByFirstLetter(params.letter);\n            }\n    );\n  }\n\n  private listUserByFirstLetter(letter: string) {\n      this.adminService.listUsers(letter)\n                       .subscribe(users => {\n                          this.users = users;\n                        });\n  }\n\n  private setAdministrator(userID: number, event) {\n    this.adminService.setAdministrator(userID, event.target.checked)\n                     .subscribe();\n  }\n\n  ngOnDestroy(): void {\n        this.routeSubscription.unsubscribe();\n  }\n\n}\n","\n<table class=\"text-primary\">\n\n  <tr>\n    <th>Código</th>\n    <th>Nome</th>\n    <th>E-mail</th>\n    <th>Perfil de administrador</th>\n  </tr>\n\n  <tr *ngFor=\"let user of users\">\n    <td>{{user._id}}</td>\n    <td>{{user.name}}</td>\n    <td>{{user.email}}</td>\n    <td class=\"center\">\n      <input type=\"checkbox\" value=\"1\"\n            [checked]=\"user.administrator\" (change)=\"setAdministrator(user._id, $event)\">\n    </td>\n  </tr>\n\n</table>\n","import { Injectable, EventEmitter } from \"@angular/core\";\nimport { throwError, BehaviorSubject, Observable, Subscription } from 'rxjs';\nimport { HttpClient, HttpHeaders, HttpErrorResponse, HttpParams } from \"@angular/common/http\";\nimport { catchError, map, tap } from \"rxjs/operators\";\n\nimport { User } from \"../models/user.model\";\nimport { Book } from \"../models/book.model\";\n\nimport { UserService } from './user.service';\n\n// Set the http options\nconst httpOptions = {\n  headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                             \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n};\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AdminService {\n\n  urlLendings = \"http://localhost:5000/api/admin/lendings\"\n  urlReturnBook = \"http://localhost:5000/api/admin/return\"\n  urlListUsers = \"http://localhost:5000/api/admin/users\"\n  urlSetAdmin = \"http://localhost:5000/api/admin/set\"\n\n  constructor(private http: HttpClient,\n              private userService: UserService) { }\n\n  private extractData(res: Response) {\n    let body = res;\n    return body || {};\n  }\n\n  public getLendings(): Observable<any> {\n    return this.http.get(this.urlLendings)\n                    .pipe(map(this.extractData)\n                    );\n  }\n\n\n  public returnBook(bookID: string): boolean {\n    let params = new HttpParams();\n\n    params = params.append('bookID', bookID);\n\n    const par = {\n      params: params,\n      headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                                 \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n    };\n\n    this.http.get<Book>(this.urlReturnBook, par)\n             .subscribe(resData => {\n\n               let user = this.userService.user.value;\n\n               const index = user.borrowing.findIndex(book => book._id == resData._id);\n\n               if (index > -1) {\n                  user.borrowing.splice(index, 1);\n               }\n\n               this.userService.user.next(user);\n             });\n\n    return true;\n  }\n\n\n\n    public listUsers(letter: string): Observable<any> {\n      let params = new HttpParams();\n\n      if (letter)\n        params = params.append('letter', letter);\n\n      const par = {\n        params: params,\n        headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                                   \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n      };\n\n      return this.http.get<User[]>(this.urlListUsers, par);\n    }\n\n    public setAdministrator(userID: number, isAdmin: boolean) {\n\n      let params = new HttpParams();\n\n      params = params.append('userID', userID.toString());\n      params = params.append('isAdmin', isAdmin.toString());\n\n      const par = {\n        params: params,\n        headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                                   \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n      };\n\n      return this.http.get<boolean>(this.urlSetAdmin, par);\n    }\n\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Lightbox } from 'ngx-lightbox';\n\nconst httpOptions = {\n  params: null,\n  headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                             \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n};\n\n\ninterface Photo {\n            src: string,\n            caption: string,\n            thumb: string\n};\n\nconst imagesDir = './assets/gallery/'\nconst imagesUrl = \"http://localhost:5000/api/gallery/list\";\n\n@Component({\n  selector: 'app-gallery',\n  templateUrl: './gallery.component.html',\n  styleUrls: ['./gallery.component.css']\n})\n\nexport class GalleryComponent implements OnInit {\n\n  public album: Array<Photo> = [];\n\n  constructor(private http: HttpClient,\n              private _lightbox: Lightbox) { }\n\n  ngOnInit(): void {\n\n    this.http.get<string[]>(imagesUrl, httpOptions)\n             .subscribe(images => {\n                   for (let image of images) {\n                     const src = imagesDir + image;\n                     const caption = image.split('.')[0];\n                     const thumb = imagesDir + image;\n\n                     const photo = { src: src, caption: caption, thumb: thumb };\n\n                     this.album.push(photo);\n                   }\n               });\n  }\n\n  open(index: number): void {\n    this._lightbox.open(this.album, index);\n  }\n\n  close(): void {\n    this._lightbox.close();\n  }\n\n}\n","<div class=\"row gallery\">\n  <div class=\"col-lg-3 image\" *ngFor=\"let image of album; let i=index\">\n    <img [src]=\"image.thumb\" (click)=\"open(i)\" />\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { FormGroup, FormControl, FormArray, Validators } from '@angular/forms';\n\nimport { User } from '../../../models/user.model';\nimport { UserService } from '../../../services/user.service';\n\n\n@Component({\n  selector: 'app-user-data',\n  templateUrl: './user-data.component.html',\n  styleUrls: ['./user-data.component.css']\n})\nexport class UserDataComponent implements OnInit {\n\n  userForm: FormGroup;\n  private userSubscription: Subscription;\n  public user: User = null;\n  public formUpdated: boolean = false;\n\n  constructor(private userService: UserService) { }\n\n  ngOnInit(): void {\n\n    this.initForm();\n\n    this.userSubscription = this.userService.user.subscribe(user => {\n      if (user) {\n        this.user = user;\n        this.userForm.setValue({\n          name: user.name,\n          email: user.email,\n          acceptMailling: user.acceptMailling\n        })\n      }\n    });\n\n\n  }\n\n  private initForm() {\n    this.userForm = new FormGroup({\n      'name': new FormControl(null, Validators.required),\n      'email': new FormControl(null, [Validators.required, Validators.email]),\n      'acceptMailling': new FormControl(null),\n    });\n\n  }\n\n    onSubmit() {\n\n      this.userService.user.value.name = this.userForm.value.name;\n      this.userService.user.value.email = this.userForm.value.email;\n      this.userService.user.value.acceptMailling = this.userForm.value.acceptMailling;\n\n      this.userService\n          .updateUserData()\n          .subscribe(\n            data => {\n              this.formUpdated = true;\n            },\n            err => {\n              console.log(err);\n            }\n          );\n    }\n\n    hideAlert() {\n      this.formUpdated = false;\n    }\n\n}\n","\n<div class=\"userForm\" *ngIf=\"user\">\n\n    <form class=\"\" [formGroup]=\"userForm\" (ngSubmit)=\"onSubmit()\">\n\n      <div class=\"form-group\">\n        <label for=\"title\" class=\"text-primary\">Nome</label>\n        <input type=\"text\" id=\"title\"\n                class=\"form-control bg-light\"\n                (click)=\"hideAlert()\"\n                formControlName=\"name\"/>\n        <span class=\"text-muted\"\n              *ngIf=\"!userForm.get('name').valid && userForm.get('name').touched\">\n              Este campo é obrigatório\n        </span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"email\" class=\"text-primary\">Email</label>\n        <input type=\"text\" id=\"email\"\n                class=\"form-control bg-light\"\n                formControlName=\"email\"\n                (click)=\"hideAlert()\"\n                email/>\n        <span\n          *ngIf=\"!userForm.get('email').valid && userForm.get('email').touched\" class=\"help-block\">\n          <span *ngIf=\"userForm.get('email').errors['email']\">Formato de e-mail inválido</span>\n          <span *ngIf=\"userForm.get('email').errors['required']\">Este campo é obrigatório</span>\n\n        </span>\n      </div>\n\n      <div class=\"form-row\">\n        <label for=\"email\" class=\"text-primary\">Quero receber notícias da Gralha</label>\n\n        <div class=\"checkboxContainer\">\n          <input type=\"checkbox\" id=\"acceptMailling\"\n                  class=\"form-control checkbox bg-light\"\n                  (click)=\"hideAlert()\"\n                  formControlName=\"acceptMailling\"/>\n        </div>\n      </div>\n\n\n      <div class=\"d-flex justify-content-end\">\n        <button type=\"submit\" class=\"btn btn-primary bg-primary\"\n                [disabled]=\"!userForm.valid\" >\n                  Atualizar meus dados\n        </button>\n      </div>\n\n    </form>\n\n    <div class=\"alert alert-light\" role=\"alert\" *ngIf=\"formUpdated\">\n      Seus dados foram atualizados.\n    </div>\n\n\n\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-books',\n  templateUrl: './books.component.html',\n  styleUrls: ['./books.component.css']\n})\nexport class BooksComponent implements OnInit {\n\n  constructor() {\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"container first-container\">\n  <div class=\"d-flex justify-content-between section\">\n    <span class=\"section-header\">Livros</span>\n  </div>\n\n  <router-outlet></router-outlet>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-profiles',\n  templateUrl: './profiles.component.html',\n  styleUrls: ['./profiles.component.css']\n})\nexport class ProfilesComponent implements OnInit {\n\n  alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');\n\n\n\n\n  constructor() { }\n\n  ngOnInit(): void {\n\n  }\n\n}\n","<div>\n  <ul>\n    <li *ngFor=\"let letter of alphabet\">\n      <a class=\"color-primary\"\n          [routerLink]=\"['/admin', 'profiles', 'list']\"\n          [queryParams]=\"{letter: letter}\"\n          routerLinkActive=\"active\">{{letter | uppercase}}</a>\n    </li>\n    <li>\n      <a class=\"color-primary\"\n          [routerLink]=\"['/admin', 'profiles', 'list']\"\n          routerLinkActive=\"active\">Toda gente</a>\n    </li>\n  </ul>\n</div>\n\n<div>\n  <router-outlet></router-outlet>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { DatePipe} from '@angular/common';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { BookService } from \"../../../../services/book.service\";\nimport { Book, Comment } from \"../../../../models/book.model\";\n\n@Component({\n  selector: 'app-comments',\n  templateUrl: './comments.component.html',\n  styleUrls: ['./comments.component.css']\n})\nexport class CommentsComponent implements OnInit {\n\n  commentForm: FormGroup;\n\n  private bookSubscription: Subscription;\n  public book: Book;\n  public comments = [];\n\n  commentPage: number = 1;\n  commentsPerPage: number = 10;\n\n  constructor(private bookService: BookService,\n              public datepipe: DatePipe) { }\n\n  ngOnInit(): void {\n    this.initForm();\n\n    this.bookSubscription = this.bookService.book.subscribe(book => {\n      this.book = book;\n      this.comments = book.Comments;\n    });\n\n  }\n\n\n  private initForm() {\n    this.commentForm = new FormGroup({\n      'comment': new FormControl(null, Validators.required)\n    });\n  }\n\n\n  onSubmit() {\n    console.log('comment0', this.bookService.book.value);\n    console.log('comment1', this.bookService.book.value.Comments);\n    this.bookService.addComment(this.commentForm.value)\n    \n    this.commentForm.reset()\n\n  }\n\n  formatCommentDate(commentDate) {\n    let date = new Date(commentDate);\n\n    return this.datepipe.transform(date, \"dd 'de' MMMM 'de' yyyy 'às' HH'h'mm\");\n  }\n\n\n  descendingSort( a, b ) {\n    if ( a.date < b.date ){\n      return 1;\n    }\n    if ( a.date > b.date ){\n      return -1;\n    }\n    return 0;\n  }\n\n  sortedComments(comments:Comment[]) {\n\n    if (comments)\n      return comments.sort(this.descendingSort);\n\n    return [];\n  }\n\n  loadMoreComments() {\n\n    let comments = this.bookService.getComments(this.commentPage, this.commentsPerPage);\n    this.commentPage++;\n  }\n\n}\n","<div class=\"comment-section\">\n  <h2>Comentários</h2>\n\n  <form [formGroup]=\"commentForm\" (ngSubmit)=\"onSubmit()\">\n    <textarea rows=\"4\" id=\"comment\"\n              class=\"form-control\"\n              placeholder=\"Escreva um comentário\"\n              formControlName=\"comment\">\n    </textarea>\n    <button type=\"submit\" class=\"btn btn-primary float-right bg-primary\"\n            [disabled]=\"!commentForm.valid\" >\n              inserir comentário\n    </button>\n  </form>\n\n  <div class=\"comment-list\">\n    <div class=\"comment-entry\" *ngFor=\"let comment of book.Comments\">\n\n        <span class=\"comment-text\">\n          <span class=\"comment-user\">{{comment.User.name}}</span>\n          {{comment.comment}}\n        </span>\n        <span class=\"comment-date float-right\">{{comment.createdAt | date:'longDate'}}</span>\n    </div>\n\n  </div>\n\n  <div class=\"d-flex justify-content-center loadmore\" *ngIf=\"book.total_comments > commentPage * commentsPerPage\">\n    <a (click)=\"loadMoreComments();\">Carregar mais 10 comentários</a>\n  </div>\n</div>\n","import { Injectable, EventEmitter } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NavigateService {\n\n  navigateToPage = new EventEmitter<string>();\n\n  constructor() { }\n\n}\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bm\": \"p/rL\",\n\t\"./bm.js\": \"p/rL\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn-bd\": \"loYQ\",\n\t\"./bn-bd.js\": \"loYQ\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-il\": \"czMo\",\n\t\"./en-il.js\": \"czMo\",\n\t\"./en-in\": \"7C5Q\",\n\t\"./en-in.js\": \"7C5Q\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./en-sg\": \"t+mt\",\n\t\"./en-sg.js\": \"t+mt\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es-mx\": \"tbfe\",\n\t\"./es-mx.js\": \"tbfe\",\n\t\"./es-us\": \"Vclq\",\n\t\"./es-us.js\": \"Vclq\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fil\": \"1ppg\",\n\t\"./fil.js\": \"1ppg\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./ga\": \"USCx\",\n\t\"./ga.js\": \"USCx\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-deva\": \"qvJo\",\n\t\"./gom-deva.js\": \"qvJo\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./gu\": \"4MV3\",\n\t\"./gu.js\": \"4MV3\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it-ch\": \"bxKX\",\n\t\"./it-ch.js\": \"bxKX\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ku\": \"JCF/\",\n\t\"./ku.js\": \"JCF/\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mn\": \"lYtQ\",\n\t\"./mn.js\": \"lYtQ\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./mt\": \"G0Uy\",\n\t\"./mt.js\": \"G0Uy\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./oc-lnc\": \"Fnuy\",\n\t\"./oc-lnc.js\": \"Fnuy\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./tg\": \"Oxv6\",\n\t\"./tg.js\": \"Oxv6\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tk\": \"Wv91\",\n\t\"./tk.js\": \"Wv91\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./ug-cn\": \"YRex\",\n\t\"./ug-cn.js\": \"YRex\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-mo\": \"OmwH\",\n\t\"./zh-mo.js\": \"OmwH\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","import { Component, ViewChild, TemplateRef, ElementRef, AfterViewInit } from '@angular/core';\nimport { NavigateService } from \"./services/navigate.service\";\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { Idle, DEFAULT_INTERRUPTSOURCES } from '@ng-idle/core';\nimport { Keepalive } from '@ng-idle/keepalive';\n\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { ModalDirective } from 'ngx-bootstrap/modal';\n//import { AppService } from './_services/app.service';\n\nimport { UserService } from './services/user.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  loadedFeature = 'book-create';\n\n  idleState = 'Not started.';\n  lastPing?: Date = null;\n  title = 'angular-idle-timeout';\n\n  public modalRef: BsModalRef;\n\n  @ViewChild('childModal', { static: false }) childModal: ModalDirective;\n\n  constructor(private navigation: NavigateService,\n              private router: Router,\n              private route: ActivatedRoute,\n              private idle: Idle,\n              private keepalive: Keepalive,\n              private modalService: BsModalService,\n              private userService: UserService) {\n\n      this.navigation.navigateToPage.subscribe( (feature) => this.onNavigate(feature) );\n\n    //idle.setIdle(2);\n    //idle.setTimeout(5);\n\n    idle.setInterrupts(DEFAULT_INTERRUPTSOURCES);\n\n    idle.onIdleEnd.subscribe(() => {\n      this.reset();\n    });\n\n    idle.onTimeout.subscribe(() => {\n      this.logout();\n    });\n\n    idle.onIdleStart.subscribe(() => {\n      this.childModal.show();\n    });\n\n    idle.onTimeoutWarning.subscribe((countdown) => {\n      this.idleState = 'Teu acesso irá expirar em ' + countdown + \" segundos. Se não quiseres deixar o acervo físico da biblioteca social, pressione 'continuar'.\"\n    });\n\n    keepalive.interval(15);\n    keepalive.onPing.subscribe(() => this.lastPing = new Date());\n\n    this.reset();\n  }\n\n  reset() {\n    this.idle.watch();\n  }\n\n  hideChildModal(): void {\n    this.childModal.hide();\n  }\n\n  stay() {\n    this.childModal.hide();\n    this.reset();\n  }\n\n  logout() {\n   this.childModal.hide();\n\n   this.userService.logout();\n   this.router.navigate(['/']);\n }\n\n  onNavigate(feature: string) {\n    this.loadedFeature = feature;\n  }\n}\n","<app-header (navigateToPage)=\"onNavigate($event)\"></app-header>\n\n<router-outlet></router-outlet>\n\n<div bsModal #childModal=\"bs-modal\" class=\"modal fade\" tabindex=\"-1\"\n     role=\"dialog\" aria-labelledby=\"dialog-child-name\">\n  <div class=\"modal-dialog modal-md\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h4 id=\"dialog-child-name\" class=\"modal-title pull-left\">Tens estado inativo!</h4>\n        <button type=\"button\" class=\"close pull-right\" aria-label=\"Close\" (click)=\"hideChildModal()\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n         {{idleState}}\n        <div class=\"d-flex justify-content-around mrgbtm\">\n          <div >\n              <button type=\"button\" (click)=\"logout()\" class=\"btn btn-danger\">Sair</button>\n          </div>\n          <div>\n              <button type=\"button\" (click)=\"stay()\" class=\"btn btn-success\">Continuar</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Book, LendingEntry, QueueEntry } from \"./book.model\";\n\nexport class WishlistEntry {\n    public _id: number;\n    public wishlistEntry: { createdAt: Date };\n    public book: Book;\n\n    constructor(id, createdAt, book?) {\n      this._id = id;\n      this.wishlistEntry = { createdAt: createdAt };\n      this.book = book;\n    }\n}\n\nexport class User {\n  public _id: number;\n  public email: string;\n  public name: string;\n  public acceptMailling: boolean;\n  public administrator: boolean;\n  public wishlist: WishlistEntry[];\n  public borrowing: LendingEntry[];\n  public waiting: QueueEntry[];\n  private _token: string;\n  private password: string;\n\n  constructor(user?) {\n    if (user) {\n      this._id = user._id;\n      this.email = user.email;\n      this.name = user.name;\n      this.acceptMailling = user.acceptMailling;\n      this.administrator = user.administrator;\n      this.wishlist = user.wishlist;\n      this.borrowing = user.borrowing;\n      this.waiting = user.waiting;\n      this._token = user._token;\n      this.password = user.password;\n    }\n  }\n\n  get token() {\n    return this._token;\n  }\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { AppRoutingModule } from './app-routing.module';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n\nimport { DatePipe, registerLocaleData } from '@angular/common';\nimport { LOCALE_ID } from '@angular/core';\nimport localePtPt from '@angular/common/locales/pt-PT';\nregisterLocaleData(localePtPt);\n\nimport { InfiniteScrollModule } from 'ngx-infinite-scroll';\n\nimport { AppComponent } from './app.component';\n\nimport { LandingComponent } from './components/landing/landing.component'\nimport { HeaderComponent } from './components/header/header.component';\nimport { PageNotFoundComponent } from './components/pagenotfound/pagenotfound.component';\n\nimport { BooksComponent } from './components/books/books.component';\nimport { BookListComponent } from './components/books/book-list/book-list.component';\nimport { BookEntryComponent } from './components/books/book-entry/book-entry.component';\nimport { CommentsComponent } from './components/books/book-entry/comments/comments.component';\n\nimport { AuthenticationComponent } from './components/authentication/authentication.component';\nimport { UserComponent } from './components/user/user.component';\nimport { UserListComponent } from './components/user/list/user-list.component';\nimport { UserLendingsComponent } from './components/user/lendings/user-lendings.component';\nimport { UserDataComponent } from './components/user/user-data/user-data.component';\nimport { UserCommentsComponent } from './components/user/user-comments/user-comments.component';\n\nimport { AdministrationComponent } from './components/administration/administration.component';\nimport { BookAddComponent } from './components/administration/book-add/book-add.component';\nimport { LendingsComponent } from './components/administration/lendings/lendings.component';\n\nimport { SpinnerComponent } from './components/spinner/spinner.component';\nimport { ShortnamePipe } from './pipes/shortname.pipe';\nimport { ImagePreloadDirective } from './directives/image-preload.directive';\nimport { ProfilesComponent } from './components/administration/profiles/profiles.component';\nimport { ProfilesListComponent } from './components/administration/profiles/list/profiles-list.component';\nimport { ActionsComponent } from './components/books/actions/actions.component';\nimport { GalleryComponent } from './components/landing/gallery/gallery.component';\nimport { LightboxModule } from 'ngx-lightbox';\nimport { SignupComponent } from './components/signup/signup.component';\n\nimport { NgIdleKeepaliveModule } from '@ng-idle/keepalive';\nimport { MomentModule } from 'angular2-moment';\nimport { ModalModule } from 'ngx-bootstrap/modal';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    BookListComponent,\n    HeaderComponent,\n    PageNotFoundComponent,\n    BooksComponent,\n    LandingComponent,\n    SpinnerComponent,\n    AuthenticationComponent,\n    BookEntryComponent,\n    CommentsComponent,\n    UserComponent,\n    UserListComponent,\n    UserDataComponent,\n    UserCommentsComponent,\n    ShortnamePipe,\n    UserLendingsComponent,\n    AdministrationComponent,\n    BookAddComponent,\n    LendingsComponent,\n    ImagePreloadDirective,\n    ProfilesComponent,\n    ProfilesListComponent,\n    ActionsComponent,\n    GalleryComponent,\n    SignupComponent\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    AppRoutingModule,\n    NgbModule,\n    BrowserAnimationsModule,\n    InfiniteScrollModule,\n    LightboxModule,\n    NgIdleKeepaliveModule.forRoot(),\n    MomentModule,\n    ModalModule.forRoot()\n  ],\n  providers: [{ provide: LOCALE_ID, useValue: \"pt-PT\" },\n              DatePipe],\n  bootstrap: [AppComponent]\n})\n\nexport class AppModule { }\n","\n<div class=\"row d-flex justify-content-center loginform\">\n  <div class=\"col-xs-12 col-md-6 col-md-offset-3\">\n    <div class=\"alert alert-danger\" *ngIf=\"error\">\n      <p>{{ error }}</p>\n    </div>\n    <div *ngIf=\"isLoading\" style=\"text-align: center;\">\n      <app-spinner></app-spinner>\n    </div>\n    <form #authForm=\"ngForm\" (ngSubmit)=\"onSubmit(authForm)\" *ngIf=\"!isLoading\">\n      <div class=\"form-group\">\n        <label class=\"text-primary\" for=\"email\">E-mail</label>\n        <input type=\"email\" id=\"email\" name=\"email\"\n          class=\"form-control\"\n          ngModel required email\n        />\n      </div>\n      <div class=\"form-group\">\n        <label class=\"text-primary\" for=\"password\">Senha</label>\n        <input\n          type=\"password\"\n          id=\"password\"\n          class=\"form-control\"\n          ngModel\n          name=\"password\"\n          required\n          minlength=\"4\"/>\n      </div>\n      <div class=\"sendButton\">\n        <button\n          class=\"btn btn-primary bg-primary\"\n          type=\"submit\"\n          [disabled]=\"!authForm.valid\">\n          Login\n        </button>\n      </div>\n\n      <hr style=\"border-color: #FFFFFF\">\n\n      <div class=\"text-primary\">\n        <a routerLink=\"/signup\" class=\"color-primary\">Clica aqui</a> caso ainda não tenhas cadastro na Biblioteca Social CSA A Gralha.\n      </div>\n\n    </form>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Observable } from 'rxjs';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\n\nimport { UserService } from '../../services/user.service';\nimport { UserResponse } from '../../api.interfaces';\n\n\n@Component({\n  selector: 'app-authentication',\n  templateUrl: './authentication.component.html',\n  styleUrls: ['./authentication.component.css']\n})\n\nexport class AuthenticationComponent {\n\n  isLoginMode = true;\n  isLoading = false;\n  error: string = null;\n  wait = ms => new Promise(res => setTimeout(res, ms));\n\n  constructor(private userService: UserService,\n              public router: Router,\n              private route: ActivatedRoute) {}\n\n  onSwitchMode() {\n    this.isLoginMode = !this.isLoginMode;\n  }\n\n  async onSubmit(form: NgForm) {\n\n    if (!form.valid) {\n      return;\n    }\n    const email = form.value.email;\n    const password = form.value.password;\n\n    let authObs: Observable<UserResponse>;\n\n    this.isLoading = true;\n\n    await this.wait(2000);\n\n\n    this.userService.login(email, password)\n                    .subscribe(\n                        resData => {\n                          this.isLoading = false;\n                          this.router.navigate(['/books']);\n                        },\n                        errorMessage => {\n                          console.log(errorMessage);\n                          this.error = errorMessage;\n                          this.isLoading = false;\n                        });\n\n    form.reset();\n\n  }\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-pagenotfound',\n  templateUrl: './pagenotfound.component.html',\n  styleUrls: ['./pagenotfound.component.css']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<p>pagenotfound works!</p>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-spinner',\n  templateUrl: './spinner.component.html',\n  styleUrls: ['./spinner.component.css']\n})\nexport class SpinnerComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"lds-hourglass\"></div>\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\n\nimport { Book } from '../../../models/book.model';\nimport { BookService } from '../../../services/book.service';\n\nimport { User, WishlistEntry } from '../../../models/user.model';\nimport { UserService } from '../../../services/user.service';\n\n@Component({\n  selector: 'app-user-list',\n  templateUrl: './user-list.component.html',\n  styleUrls: ['./user-list.component.css']\n})\nexport class UserListComponent implements OnInit {\n\n  private userSubscription: Subscription;\n  public user: User;\n  public wishlist: WishlistEntry[] = [];\n\n  constructor(private userService: UserService,\n              private bookService: BookService) { }\n\n  ngOnInit(): void {\n    this.userSubscription = this.userService.user.subscribe(user => {\n      if (user) {\n        this.user = user;\n        this.loadWishlist();\n      }\n    });\n  }\n\n  loadWishlist() {\n    this.wishlist = [];\n    for (let wishlistEntry of this.user.wishlist) {\n      this.bookService.fetchBook(wishlistEntry._id)\n                      .subscribe(\n                          book => {\n                            wishlistEntry.book = book;\n\n                            this.wishlist.push(wishlistEntry);\n                            this.sortWishlist(this.wishlist);\n\n                            this.userService.user.value.wishlist = this.wishlist;\n                          },\n                          err => {\n                            console.log(err);\n                          }\n                      );\n    }\n  }\n\n  onRemoveFromWishist(bookID: number) {\n    this.bookService\n      .removeBookFromWishlist(bookID)\n      .subscribe(returnedBook => {\n        let index = this.wishlist.findIndex(entry => entry._id == returnedBook._id);\n        if (index > -1) {\n           this.wishlist.splice(index, 1);\n\n           this.userService.user.value.wishlist.findIndex(entry => entry._id == returnedBook._id);\n           if (index > -1) {\n              this.userService.user.value.wishlist.splice(index, 1);\n           }\n           this.userService.user.next(this.userService.user.value);\n        }\n     });\n     return true;\n  }\n\n  ascendingSort( a, b ) {\n    if ( a.wishlistEntry.createdAt > b.wishlistEntry.createdAt ){\n      return 1;\n    }\n    if ( a.wishlistEntry.createdAt < b.wishlistEntry.createdAt ){\n      return -1;\n    }\n    return 0;\n  }\n\n  sortWishlist(wishlist:WishlistEntry[]) {\n    return wishlist.sort(this.ascendingSort);\n  }\n}\n","\n<div *ngIf=\"user\">\n  <div *ngFor=\"let entry of wishlist\">\n    <div class=\"addedIn d-flex justify-content-start\">\n      <div class=\"col-lg-2\">&nbsp;</div>\n      <span class=\"col-lg-10 text-primary\"><span class=\"color-primary\">adicionado à lista em</span> {{entry.book.createdAt | date:'longDate'}}</span>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-2\">\n        <img src=\"{{entry.book.coverURL}}\" default=\"assets/covers/0.jpg\" alt=\"\">\n      </div>\n      <div class=\"info col-lg-7\">\n          <span class=\"bookTitle\">{{entry.book.title}}</span>\n          <span class=\"bookSubtitle\">{{entry.book.subtitle}}</span>\n          <hr/>\n\n          <div *ngIf=\"entry.book.Authors.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Autoria:</span>\n              <span *ngFor=\"let author of entry.book.Authors; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{author.name}}\n              </span>\n            </span>\n          </div>\n          <div *ngIf=\"entry.book.Organisers.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Organização:</span>\n              <span *ngFor=\"let organiser of entry.book.Organisers; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{organiser.name}}\n              </span>\n            </span>\n          </div>\n          <div *ngIf=\"entry.book.Translators.length > 0\">\n            <span class=\"bookAuthor text-primary\" >\n              <span class=\"color-primary\">Tradução:</span>\n              <span *ngFor=\"let translator of entry.book.Translators; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{translator.name}}\n              </span>\n            </span>\n          </div>\n          <div>\n            <span class=\"bookPressYear text-primary\">\n              <span class=\"color-primary\">Editora:</span>\n              {{entry.book.press}}&nbsp;&nbsp;&nbsp;\n              <span class=\"color-primary\">Ano:</span>\n              {{entry.book.year}}\n            </span>\n          </div>\n          <div class=\"list-actions d-flex justify-content-end\">\n            <div class=\"p-2\">\n                <a class=\"color-primary\" routerLink=\"/books/entry\"\n                    [queryParams]=\"{id: entry.book._id}\">Ver livro</a>\n            </div>\n            <div class=\"p-2 text-primary\">|</div>\n            <div class=\"p-2\">\n              <a class=\"color-primary\"\n                (click)=\"onRemoveFromWishist(entry.book._id)\">Remover da minha lista</a>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Injectable, EventEmitter } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchService {\n\n  searchInputValue: string = \"\";\n  searchInputUpdated = new EventEmitter();\n\n  constructor() { }\n\n}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Observable, Subscription, BehaviorSubject } from 'rxjs';\nimport { catchError, map, tap } from \"rxjs/operators\";\n\nimport { Book } from '../../../models/book.model';\nimport { User } from '../../../models/user.model';\n\nimport { UserService } from \"../../../services/user.service\";\nimport { BookService } from '../../../services/book.service';\n\n@Component({\n  selector: 'app-user-comments',\n  templateUrl: './user-comments.component.html',\n  styleUrls: ['./user-comments.component.css']\n})\nexport class UserCommentsComponent implements OnInit, OnDestroy {\n\n  private userSubscription = new Subscription();\n  public book: Book;\n  public comments = []\n\n  constructor(private userService: UserService,\n              private bookService: BookService) { }\n\n  ngOnInit(): void {\n    this.userSubscription = this.userService.user.subscribe(user => {\n      if (user) {\n        this.loadComments();\n      }\n    });\n\n    this.userService.user.next(this.userService.user.value);\n  }\n\n  private loadComments() {\n    this.userService.getComments()\n                    .subscribe(\n                        comments => {\n                          this.comments = comments\n                        },\n                        errorMessage => {\n                          console.log(errorMessage);\n                        }\n                    );\n  };\n\n  private removeComment(commentID) {\n    this.bookService.removeComment(commentID)\n                    .subscribe( commentID => {\n                      const index = this.comments.findIndex(comment => comment._id == commentID);\n\n                      if (index > -1) {\n                         this.comments.splice(index, 1);\n                      }\n                    });\n  };\n\n  ngOnDestroy(): void {\n    this.userSubscription.unsubscribe();\n  };\n}\n","<div *ngIf=\"comments\">\n  <div class=\"comment-entry \" *ngFor=\"let comment of comments\">\n    <div class=\"comment-date d-flex justify-content-start\">\n      <div class=\"col-lg-2\">&nbsp;</div>\n      <span class=\"col-lg-10 text-primary\"><span class=\"color-primary\">comentário feito em</span>\n      {{comment.createdAt | date:'longDate'}} às  {{comment.createdAt | date:'shortTime'}}</span>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-lg-2\">\n        <img src=\"{{comment.Book.coverURL}}\" alt=\"\">\n      </div>\n      <div class=\"info col-lg-7\">\n        <div class=\"comment-text text-primary\">{{comment.comment}}</div>\n\n        <div class=\"comment-links d-flex justify-content-end\">\n          <span>\n            <a routerLink=\"/books/entry\"\n                [queryParams]=\"{id: comment.Book._id}\"\n                [fragment]=\"'comments'\">\n                <span class=\"color-primary\">ver no contexto</span>\n            </a>\n           </span>\n           <span>\n             <a [routerLink]=\"\" (click)=\"removeComment(comment._id)\">\n                 <span class=\"color-primary\">remover comentário</span>\n             </a>\n            </span>\n      </div>\n      </div>\n    </div>\n\n  </div>\n\n</div>\n","import { Component, OnInit, OnDestroy, ElementRef, ViewChild } from '@angular/core';\nimport { FormGroup, FormControl, FormArray, Validators } from '@angular/forms';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { Subscription } from 'rxjs';\n\nimport { BookService } from \"../../../services/book.service\";\nimport { Book } from \"../../../models/book.model\";\n\n@Component({\n  selector: 'app-book-add',\n  templateUrl: './book-add.component.html',\n  styleUrls: ['./book-add.component.css']\n})\nexport class BookAddComponent implements OnInit {\n\n  apiUrl = \"http://localhost:5000/api/books\";\n  bookForm: FormGroup;\n  editMode = false;\n  routeSubscription: Subscription;\n\n  @ViewChild('bookCoverImg', {static: false}) bookCoverImg: ElementRef;\n  @ViewChild('author', {static: false}) author: ElementRef;\n  @ViewChild('authorList', {static: false}) authorList: ElementRef;\n\n  bookAuthors: string[] = [];\n  book: Book = new Book();\n\n  constructor(public router: Router,\n              private route: ActivatedRoute,\n              private bookService: BookService) { }\n\n  ngOnInit(): void {\n\n    this.routeSubscription = this.route.queryParams.subscribe(\n            (params: Params) => {\n                if (params.id)\n                  this.bookService\n                    .fetchBook(params.id)\n                    .subscribe(\n                      book => {\n                        this.book = book;\n                        this.initForm();\n                      },\n                      err => {\n                        console.log(err);\n                      }\n                  );;\n            }\n    );\n\n    this.initForm();\n  }\n\n  fillImage(event) {\n    this.bookCoverImg.nativeElement.src = event.target.value;\n  }\n\n  onAddAuthor() {\n    const control = new FormControl(null, Validators.required);\n    (<FormArray>this.bookForm.get('author')).push(control);\n  }\n  onRemoveAuthor(i: number) {\n    (<FormArray>this.bookForm.get('author')).removeAt(i);\n  }\n  getAuthorControls() {\n    return (<FormArray>this.bookForm.get('author')).controls;\n  }\n\n  onAddOrganiser() {\n    const control = new FormControl(null);\n    (<FormArray>this.bookForm.get('organiser')).push(control);\n  }\n  onRemoveOrganiser(i: number) {\n    (<FormArray>this.bookForm.get('organiser')).removeAt(i);\n  }\n  getOrganiserControls() {\n    return (<FormArray>this.bookForm.get('organiser')).controls;\n  }\n\n  onAddTranslator() {\n    const control = new FormControl(null);\n    (<FormArray>this.bookForm.get('translator')).push(control);\n  }\n  onRemoveTranslator(i: number) {\n    (<FormArray>this.bookForm.get('translator')).removeAt(i);\n  }\n  getTranslatorControls() {\n    return (<FormArray>this.bookForm.get('translator')).controls;\n  }\n\n  onAddLocal() {\n    const control = new FormControl(null);\n    (<FormArray>this.bookForm.get('local')).push(control);\n  }\n  onRemoveLocal(i: number) {\n    (<FormArray>this.bookForm.get('local')).removeAt(i);\n  }\n  getLocalControls() {\n    return (<FormArray>this.bookForm.get('local')).controls;\n  }\n\n  onAddTag() {\n    const control = new FormControl(null);\n    (<FormArray>this.bookForm.get('tags')).push(control);\n  }\n  onRemoveTag(i: number) {\n    (<FormArray>this.bookForm.get('tags')).removeAt(i);\n  }\n  getTagsControls() {\n    return (<FormArray>this.bookForm.get('tags')).controls;\n  }\n\n  onSubmit() {\n\n    const book = new Book(this.bookForm.value);\n\n    this.bookService\n      .addBook(book)\n      .subscribe(\n        book => {\n          console.log('aqui', book);\n\n          this.router.navigate(['books', 'entry'], { queryParams: { id: book._id } });\n        },\n        err => {\n          console.log(err);\n        }\n      );\n\n    //this.bookForm.reset()\n\n  }\n  //addTag(event) {\n    //this.selectedTags = event;\n  //}\n\n  private initForm() {\n    let urlReg = '(https?://)?([\\\\da-z.-]+)\\\\.([a-z.]{2,6})[/\\\\w .-~,_]*/?';\n\n    console.log('this.bookw', this.book);\n\n\n    let authorControlList = [];\n    if (this.book.Authors) {\n      for (let author of this.book.Authors) {\n        authorControlList.push(new FormControl(author.name, Validators.required))\n      }\n    } else { authorControlList.push(new FormControl(null, Validators.required)) }\n\n    let organiserControlList = [];\n    if (this.book.Organisers) {\n      for (let organiser of this.book.Organisers) {\n        organiserControlList.push(new FormControl(organiser.name, Validators.required))\n      }\n    } else { organiserControlList.push(new FormControl(null, Validators.required)) }\n\n    let translatorControlList = [];\n    if (this.book.Translators) {\n      for (let translator of this.book.Translators) {\n        translatorControlList.push(new FormControl(translator.name, Validators.required))\n      }\n    } else { translatorControlList.push(new FormControl(null, Validators.required)) }\n\n    let localControlList = [];\n    if (this.book.Locals) {\n      for (let local of this.book.Locals) {\n        localControlList.push(new FormControl(local.name, Validators.required))\n      }\n    } else { localControlList.push(new FormControl(null, Validators.required)) }\n\n    let tagsControlList = [];\n    if (this.book.Tags) {\n      for (let tag of this.book.Tags) {\n        tagsControlList.push(new FormControl(tag.name, Validators.required))\n      }\n    } else { tagsControlList.push(new FormControl(null, Validators.required)) }\n\n    this.bookForm = new FormGroup({\n      '_id': new FormControl(this.book._id),\n      'code': new FormControl(this.book.code, Validators.required),\n      'title': new FormControl(this.book.title, Validators.required),\n      'subtitle': new FormControl(this.book.subtitle),\n      'description': new FormControl(this.book.description),\n      'author': new FormArray(authorControlList),\n      'organiser': new FormArray(organiserControlList),\n      'translator': new FormArray(translatorControlList),\n      'press': new FormControl(this.book.press, Validators.required),\n      'year': new FormControl(this.book.year, [Validators.pattern(\"\\\\d{4}\"),\n                                     Validators.min(1000),\n                                     Validators.max((new Date()).getFullYear())]),\n      'edition': new FormControl(this.book.edition, Validators.pattern(\"\\\\d*\")),\n      'collection': new FormControl(this.book.collection),\n      'volume': new FormControl(this.book.volume),\n      'pages': new FormControl(this.book.pages, Validators.pattern(\"\\\\d*\")),\n      'ex': new FormControl(this.book.ex, Validators.pattern(\"\\\\d*\")),\n      'format': new FormControl(this.book.format),\n      'isbn': new FormControl(this.book.isbn),\n      'local': new FormArray(localControlList),\n      'condition': new FormControl(this.book.condition),\n      'tags': new FormArray(tagsControlList),\n    });\n\n    //this.populateTags();\n  }\n\n  /*populateTags() {\n    this.bookService\n      .getAllTags()\n      .subscribe(\n        data => {\n          this.autoCompleteTags = data;\n        },\n        err => {\n          console.log(err);\n        }\n      );\n  }*/\n\n  ngOnDestroy(): void {\n        this.routeSubscription.unsubscribe();\n  }\n}\n","\n    <form [formGroup]=\"bookForm\" (ngSubmit)=\"onSubmit()\">\n\n      <div class=\"form-group\">\n        <label for=\"title\">Código</label>\n        <input type=\"hidden\" id=\"_id\" formControlName=\"_id\">\n        <input type=\"text\" id=\"code\"\n                class=\"form-control\"\n                placeholder=\"Insira o código\"\n                formControlName=\"code\">\n        <span class=\"text-muted\"\n              *ngIf=\"!bookForm.get('code').valid && bookForm.get('code').touched\">\n              Este campo é obrigatório\n        </span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"title\">Título</label>\n        <input type=\"text\" id=\"title\"\n                class=\"form-control\"\n                placeholder=\"Insira o título\"\n                formControlName=\"title\">\n        <span class=\"text-muted\"\n              *ngIf=\"!bookForm.get('title').valid && bookForm.get('title').touched\">\n              Este campo é obrigatório\n        </span>\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"subtitle\">Subtítulo</label>\n        <input type=\"text\" id=\"subtitle\"\n                class=\"form-control\"\n                placeholder=\"Insira o subtítulo\"\n                formControlName=\"subtitle\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"description\">Descrição</label>\n        <textarea rows=\"4\" id=\"description\"\n                  class=\"form-control\"\n                  placeholder=\"Insira a descrição\"\n                  formControlName=\"description\">\n        </textarea>\n      </div>\n\n      <div class=\"form-group\" formArrayName=\"author\">\n        <label for=\"author\">Autoria</label>\n        <button type=\"button\" class=\"btn btn-primary bg-primary btn-sm add\" id=\"addAuthor\"\n                (click)=\"onAddAuthor()\">\n          <i class=\"fa fa-plus\"></i>\n        </button>\n        <div class=\"add-control\" *ngFor=\"let authorControl of getAuthorControls(); let i = index\">\n          <input type=\"text\" class=\"form-control\"\n                  [formControlName]=\"i\">\n          <a class=\"color-primary\" (click)=\"onRemoveAuthor(i)\">Remover</a>\n          <span class=\"text-muted\"\n                *ngIf=\"!getAuthorControls()[i].valid && getAuthorControls()[i].touched\">\n                Este campo é obrigatório\n          </span>\n        </div>\n      </div>\n\n      <div class=\"form-group\" formArrayName=\"organiser\">\n        <label for=\"organiser\">Organização</label>\n        <button type=\"button\" class=\"btn btn-primary bg-primary btn-sm add\" id=\"addOrganiser\"\n                (click)=\"onAddOrganiser()\">\n          <i class=\"fa fa-plus\"></i>\n        </button>\n        <div class=\"add-control\" *ngFor=\"let organiserControl of getOrganiserControls(); let i = index\">\n          <input type=\"text\" class=\"form-control\"\n                  [formControlName]=\"i\">\n          <a class=\"color-primary\" (click)=\"onRemoveOrganiser(i)\">Remover</a>\n          <span class=\"text-muted\"\n                *ngIf=\"!getOrganiserControls()[i].valid && getOrganiserControls()[i].touched\">\n                Este campo é obrigatório\n          </span>\n        </div>\n      </div>\n\n      <div class=\"form-group\" formArrayName=\"translator\">\n        <label for=\"translator\">Tradução</label>\n        <button type=\"button\" class=\"btn btn-primary bg-primary btn-sm add\" id=\"addTranslator\"\n                (click)=\"onAddTranslator()\">\n          <i class=\"fa fa-plus\"></i>\n        </button>\n        <div class=\"add-control\" *ngFor=\"let translatorControl of getTranslatorControls(); let i = index\">\n          <input type=\"text\" class=\"form-control\"\n                  [formControlName]=\"i\">\n          <a class=\"color-primary\" (click)=\"onRemoveTranslator(i)\">Remover</a>\n          <span class=\"text-muted\"\n                *ngIf=\"!getTranslatorControls()[i].valid && getTranslatorControls()[i].touched\">\n                Este campo é obrigatório\n          </span>\n        </div>\n      </div>\n\n      <div class=\"form-row\">\n\n        <div class=\"form-group col-md-5\">\n          <label for=\"press\">Editora</label>\n          <input type=\"text\" id=\"press\"\n                  class=\"form-control\"\n                  placeholder=\"Nome da editora\"\n                  formControlName=\"press\">\n          <span class=\"text-muted\"\n                *ngIf=\"!bookForm.get('press').valid && bookForm.get('press').touched\">\n                Este campo é obrigatório\n          </span>\n        </div>\n\n        <div class=\"form-group col-md-2\">\n          <label for=\"year\">Ano</label>\n          <input type=\"text\" id=\"year\"\n                  class=\"form-control\"\n                  placeholder=\"YYYY\"\n                  formControlName=\"year\">\n          <div class=\"text-muted\"\n                *ngIf=\"!bookForm.get('year').valid && bookForm.get('year').touched\">\n                <span *ngIf=\"bookForm.get('year').errors['required']\">Este campo é obrigatório</span>\n                <span *ngIf=\"bookForm.get('year').errors['min'] ||\n                             bookForm.get('year').errors['max'] ||\n                             bookForm.get('year').errors['pattern']\">O ano está inválido</span>\n          </div>\n        </div>\n\n        <div class=\"form-group col-md-5\">\n          <label for=\"edition\">Edição</label>\n          <input type=\"text\" id=\"edition\"\n                  class=\"form-control\"\n                  placeholder=\"Insira a Edição\"\n                  formControlName=\"edition\">\n        </div>\n      </div>\n\n\n      <div class=\"form-row\">\n\n        <div class=\"form-group col-md-5\">\n          <label for=\"collection\">Coleção</label>\n          <input type=\"text\" id=\"collection\"\n                  class=\"form-control\"\n                  placeholder=\"Insira a Coleção\"\n                  formControlName=\"collection\">\n        </div>\n\n        <div class=\"form-group col-md-5\">\n          <label for=\"volume\">Volume</label>\n          <input type=\"text\" id=\"volume\"\n                  class=\"form-control\"\n                  placeholder=\"Insira o volume\"\n                  formControlName=\"volume\">\n        </div>\n\n        <div class=\"form-group col-md-2\">\n          <label for=\"year\">Páginas</label>\n          <input type=\"text\" id=\"pages\"\n                  class=\"form-control\"\n                  placeholder=\"Insira o numero de páginas\"\n                  formControlName=\"pages\">\n          <div class=\"text-muted\"\n                *ngIf=\"!bookForm.get('pages').valid && bookForm.get('pages').touched\">\n                <span *ngIf=\"bookForm.get('pages').errors['required']\">Este campo deve ser númerico</span>\n          </div>\n        </div>\n      </div>\n\n\n      <div class=\"form-row\">\n\n        <div class=\"form-group col-md-4\">\n          <label for=\"ex\">Exemplar</label>\n          <input type=\"text\" id=\"ex\"\n                  class=\"form-control\"\n                  placeholder=\"Insira o número de exemplares\"\n                  formControlName=\"ex\">\n        </div>\n\n        <div class=\"form-group col-md-4\">\n          <label for=\"format\">Formato</label>\n          <input type=\"text\" id=\"format\"\n                  class=\"form-control\"\n                  placeholder=\"Insira o Formato\"\n                  formControlName=\"format\">\n        </div>\n\n        <div class=\"form-group col-md-4\">\n          <label for=\"isbn\">ISBN</label>\n          <input type=\"text\" id=\"isbn\"\n                  class=\"form-control\"\n                  placeholder=\"Insira o ISBN\"\n                  formControlName=\"isbn\">\n          <span class=\"text-muted\"\n                *ngIf=\"!bookForm.get('isbn').valid && bookForm.get('isbn').touched\">\n                O ISBN está inválido\n          </span>\n        </div>\n      </div>\n\n      <div class=\"form-group\" formArrayName=\"local\">\n        <label for=\"local\">Local</label>\n        <button type=\"button\" class=\"btn btn-primary bg-primary btn-sm add\" id=\"addLocal\"\n                (click)=\"onAddLocal()\">\n          <i class=\"fa fa-plus\"></i>\n        </button>\n        <div class=\"add-control\" *ngFor=\"let localControl of getLocalControls(); let i = index\">\n          <input type=\"text\" class=\"form-control\"\n                  [formControlName]=\"i\">\n          <a class=\"color-primary\" (click)=\"onRemoveLocal(i)\">Remover</a>\n        </div>\n      </div>\n\n      <div class=\"form-row\">\n        <div class=\"form-group col-md-12\">\n          <label for=\"condition\">Condição</label>\n          <input type=\"text\" id=\"condition\"\n                  class=\"form-control\"\n                  placeholder=\"Insira a condição\"\n                  formControlName=\"condition\">\n        </div>\n\n      </div>\n\n\n\n      <div class=\"form-group\" formArrayName=\"tags\">\n        <label for=\"tags\">Etiquetas</label>\n        <button type=\"button\" class=\"btn btn-primary bg-primary btn-sm add\" id=\"addTags\"\n                (click)=\"onAddTag()\">\n          <i class=\"fa fa-plus\"></i>\n        </button>\n        <div class=\"add-control\" *ngFor=\"let tagsControl of getTagsControls(); let i = index\">\n          <input type=\"text\" class=\"form-control\"\n                  [formControlName]=\"i\">\n          <a class=\"color-primary\" (click)=\"onRemoveTag(i)\">Remover</a>\n        </div>\n      </div>\n\n\n      <button type=\"submit\" class=\"btn btn-primary bg-primary float-right\"\n              [disabled]=\"!bookForm.valid\" >\n                Cadastrar livro\n      </button>\n    </form>\n","import { Component, OnInit, OnDestroy, ViewChild,\n         ViewChildren, ElementRef, QueryList } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\nimport { Subscription, Observable } from 'rxjs';\n\nimport { Book } from '../../../models/book.model';\nimport { BookService } from \"../../../services/book.service\";\n\nimport { SearchService } from \"../../../services/search.service\";\n\nimport { UserService } from '../../../services/user.service';\nimport { User, WishlistEntry } from '../../../models/user.model';\n\n@Component({\n  selector: 'app-book-list',\n  templateUrl: './book-list.component.html',\n  styleUrls: ['./book-list.component.css']\n})\nexport class BookListComponent implements OnInit {\n\n  screenHeight: number;\n  screenWidth: number;\n\n  offset: {has: boolean, value: number} = {has: false, value: 0};\n  lefts: number[] = [];\n\n  bookList:Book[] = [];\n  page:number = 0;\n  booksPerPage:number = 30;\n  filterTag: string[] = [];\n  filterSearch: string = '';\n  sortField: string = 'createdAt';\n  sortDirection: number = 1;\n\n  @ViewChild('bookUl', { static: false }) bookUl: ElementRef;\n  @ViewChildren('bookDiv') bookDivs: QueryList<ElementRef>;\n\n  //isAuthenticated = false;\n  private userSubscription: Subscription;\n  private bookListSubscription: Subscription;\n  private routeSubscription: Subscription;\n  public user: User;\n\n  constructor(public router: Router,\n              private route: ActivatedRoute,\n              private bookService: BookService,\n              private search: SearchService,\n              private userService: UserService) {\n  }\n\n  ngOnInit() {\n\n    //this.getBooks();\n\n    this.getScreenSize();\n\n    this.search.searchInputUpdated.subscribe(\n      searchInputValue => {\n        this.filterSearch = searchInputValue;\n\n        this.getBooks(this.filterSearch, this.filterTag,\n                      0, this.booksPerPage, false,\n                      this.sortField, this.sortDirection);\n      }\n    );\n\n    this.userSubscription = this.userService.user.subscribe(\n      user => {\n        //this.isAuthenticated = !!user;\n        this.user = user;\n      }\n    );\n\n    this.bookListSubscription = this.bookService.bookList.subscribe(\n      bookList => {\n        this.bookList = bookList;\n      }\n    );\n\n    this.routeSubscription = this.route.queryParams.subscribe(\n            (params: Params) => {\n                if (params.tag)\n                  this.filterByTag(params.tag);\n            }\n    );\n\n    this.filterSearch = this.search.searchInputValue;\n    this.search.searchInputUpdated.emit(this.filterSearch)\n  }\n\n  sortOrder(field) {\n\n    //if its the same field, reverse order\n    if (field == this.sortField) {\n      this.sortDirection = -1 * this.sortDirection;\n    }\n    // otherwise, set to default\n    else {\n      this.sortDirection = 1;\n    }\n\n    this.sortField = field;\n    this.getBooks(this.filterSearch, this.filterTag,\n                  0, this.booksPerPage, false,\n                  this.sortField, this.sortDirection);\n  }\n\n  getBooks( searchInput: string = '',\n            tagInput: string[] = [],\n            page: number = 0,\n            booksPerPage:number = 30,\n            appendResults:boolean = false,\n            sortField: string = \"createdAt\",\n            sortDirection: number = -1\n          ) {\n    this.bookService.getBookList(searchInput, tagInput, page,\n                                 booksPerPage, appendResults, sortField,\n                                 sortDirection);\n  }\n\n  calculateLefts(Ul, lefts) {\n    var books = Ul.nativeElement.childNodes;\n\n    for (var i = 0; i < books.length-1; i++) {\n      var item = books[i];\n\n      lefts[i] = item.getBoundingClientRect().left;\n    }\n  }\n\n  ngAfterViewInit() {\n    setTimeout(this.calculateLefts.bind(null, this.bookUl, this.lefts), 1000);\n  }\n\n  getScreenSize(): any {\n    let win = window,\n        d = document,\n        e = d.documentElement,\n        g = d.getElementsByTagName('body')[0],\n        w = win.innerWidth,\n        h = win.innerHeight;\n\n      this.screenHeight = h;\n      this.screenWidth = w;\n\n\n  }\n\n  //function that calculates the offset of the floating box to prevent\n  // it to going off-screen\n  mouseEnter(i: number) {\nconsole.log('enter', i);\n\n    this.getScreenSize();\n    this.calculateLefts(this.bookUl, this.lefts);\n\n    let bookDiv = this.bookDivs.toArray()[i];\n\n    //Getting the margin and padding of the container div\n    let container_div = bookDiv.nativeElement.closest('.first-container');\n    let containerMargin = parseFloat(window.getComputedStyle(container_div, null)\n                                    .getPropertyValue('margin-right'));\n    let containerPadding = parseFloat(window.getComputedStyle(container_div, null)\n                                     .getPropertyValue('padding-right'));\n\n    //The original size of the div\n    var divWidth = bookDiv.nativeElement.offsetWidth;\n\n    //The % of increase of the div size given by the transformation\n    let container_li = bookDiv.nativeElement.closest('li');\n    let transform = window.getComputedStyle(container_li, null)\n                                       .getPropertyValue('transform');\n\n    const matrixValues = transform.match(/matrix.*\\((.+)\\)/)[1].split(', ')\n    let scale = parseFloat(matrixValues[0]);\n\n    /////temp\n    //console.log(scale);\n    switch (true) {\n      case (this.screenWidth >= 768): { scale = 1.5; break; }\n      case (this.screenWidth >= 576): { scale = 1.1; break; }\n    }\n\n\n    //The original position of the div\n    var myOriginalLeft = this.lefts[i];\n\n    /*\n    var rect = bookDiv.nativeElement.getBoundingClientRect();\n    var divLeft = rect.left\n    var divPaddingL = parseFloat(window.getComputedStyle(bookDiv.nativeElement, null)\n                                .getPropertyValue('padding-left'));\n    var divPaddingR = parseFloat(window.getComputedStyle(bookDiv.nativeElement, null)\n                                .getPropertyValue('padding-right'));\n                        */\n\n\n    if (!this.offset.has) {\n      this.offset.has = true;\n\n      this.offset.value = (this.screenWidth\n                            - myOriginalLeft\n                            - divWidth * scale\n                            - (containerMargin + containerPadding + 7)\n                          ) / scale;\n    }\n    //console.log(this.offset.value);\n\n    if (this.offset.value < 0) {\n\n      //setTimeout(() => {\n\n\n        bookDiv.nativeElement.parentNode.parentNode.style.setProperty('transform',\n                                  'scale(1) translateY(20px) translateX(' + this.offset.value + 'px)');\n\n      //}, 500);\n\n    }\n  }\n\n  mouseOut(i: number) {\n    console.log('out', i);\n\n      var bookDiv = this.bookDivs.toArray()[i];\n\n      if (this.offset.has) {\n\n        //setTimeout(() => {\n\n\n          bookDiv.nativeElement.parentNode.parentNode.style.setProperty('transform', '');\n\n          this.offset.has = false;\n          this.offset.value = 0;\n\n      //  }, 500);\n\n      }\n  }\n\n  filterByTag(tag: string) {\n\n\n    console.log('filterByTag');\n\n    if (this.filterTag.indexOf(tag) === -1) {\n      console.log('entrei');\n\n      this.filterTag.push(tag);\n    } else { console.log('não entrei'); }\n\n    this.getBooks(this.filterSearch, this.filterTag,\n                  0, this.booksPerPage, false,\n                  this.sortField, this.sortDirection);\n  }\n\n  removeTag(index: number) {\n\n        console.log('removeTag');\n    this.filterTag.splice(index, 1);\n    this.getBooks(this.filterSearch, this.filterTag,\n                  0, this.booksPerPage, false,\n                  this.sortField, this.sortDirection);\n  }\n\n\n  onScroll() {\n    if (this.bookList.length < this.bookService.totalBooks) {\n      this.page++;\n      this.getBooks(this.filterSearch, this.filterTag,\n                    this.page, this.booksPerPage, true,\n                    this.sortField, this.sortDirection);\n    }\n  }\n\n\n  daysSince(date: string): number {\n    const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\n    const today = new Date();\n    const lendingDate = new Date(date);\n\n    const days:number = Math.round(Math.abs((+today - +lendingDate) / oneDay));\n\n    return days;\n  }\n\n  ngOnDestroy() {\n    this.userSubscription.unsubscribe();\n    this.bookListSubscription.unsubscribe();\n    this.routeSubscription.unsubscribe();\n    //this.search.searchInputUpdated.unsubscribe();\n  }\n\n}\n","<div class=\"row tag-list\">\n  <div *ngFor=\"let tag of this.filterTag; let i = index;\" class=\"tag-chip\"> \n      <span>{{tag}}</span>\n      <a (click)=\"removeTag(i)\"><i class=\"far fa-times-circle\"></i></a>\n  </div>\n</div>\n\n<div class=\"d-flex justify-content-end list-order\">\n  <span class=\"text-primary\">ordernar livros por\n    <a class=\"color-primary\" (click)=\"sortOrder('title')\">Título</a>\n    <span class=\"color-primary\" *ngIf=\"sortField === 'title'\">\n      <i class=\"fas\" [ngClass]=\"(sortDirection === -1)? 'fa-sort-down':'fa-sort-up'\"></i>\n    </span>\n    |\n    <a class=\"color-primary\" (click)=\"sortOrder('createdAt')\">Data de cadastro</a>\n    <span class=\"color-primary\" *ngIf=\"sortField === 'createdAt'\">\n      <i class=\"fas\" [ngClass]=\"(sortDirection === -1)? 'fa-sort-down':'fa-sort-up'\"></i>\n    </span>\n  </span>\n</div>\n\n<div class=\"infinite-scroll\"\n            infiniteScroll\n            [infiniteScrollDistance]=\"20\"\n            [infiniteScrollThrottle]=\"500\"\n            (scrolled)=\"onScroll()\"\n            [scrollWindow]=\"false\">\n\n  <div class=\"container\">\n    <ul *ngIf=\"bookList\" class=\"items row\" #bookUl>\n      <li class=\"col-12 col-sm-4 col-md-3 col-lg-2\"\n          *ngFor=\"let book of bookList; let i = index;\"\n          (mouseover)=\"mouseEnter(i)\"\n          (mouseleave)=\"mouseOut(i)\">\n\n          <div class=\"bookdiv justify-content-center\">\n            <div class=\"bg-img\">\n              <a routerLink=\"/books/entry\" [queryParams]=\"{id: book._id}\">\n                <img src=\"{{book.coverURL}}\" default=\"assets/covers/0.jpg\">\n              </a>\n            </div>\n            <div class=\"info book-list\">\n            \t<div class=\"content\" #bookDiv>\n                <div class=\"tags-wrapper\">\n                  <span class=\"tag-chip bg-primary\"\n                        *ngFor=\"let tag of book.Tags; let j = index;\">\n                        <a routerLink=\"/books\"\n                            [queryParams]=\"{tag: tag.name}\"\n                            (click)=\"filterByTag(tag.name)\"> {{tag.name}}\n                        </a>\n                  </span>\n                </div>\n\n                <div class=\"book-info\">\n\n                  <span class=\"bookCode\">{{book.code}}</span>\n                  <span class=\"bookTitle text-primary\">{{book.title}}</span>\n                  <span class=\"bookSubtitle text-primary\" *ngIf=\"book.subtitle\">{{book.subtitle}}</span>\n                  <hr/>\n                  <div class=\"authors bookAuthor text-primary\"\n                        *ngIf=\"book.Authors.length > 0\">\n                    <span class=\"color-primary\">Autoria:</span>\n                    <span *ngFor=\"let author of book.Authors; let i = index;\">\n                      {{ i > 0 ? '|' : ''}} {{author.name}}&nbsp;\n                    </span>\n                  </div>\n                  <div class=\"authors text-primary\"\n                        *ngIf=\"book.Organisers.length > 0\">\n                    <span class=\"color-primary\">Organização:</span>\n                    <span *ngFor=\"let organiser of book.Organisers; let i = index;\">\n                      {{ i > 0 ? '|' : ''}} {{organiser.name}}&nbsp;\n                    </span>\n                  </div>\n                  <div class=\"authors text-primary\"\n                        *ngIf=\"book.Translators.length > 0\">\n                    <span class=\"color-primary\">Tradução:</span>\n                    <span *ngFor=\"let translator of book.Translators; let i = index;\">\n                      {{ i > 0 ? '|' : ''}} {{translator.name}}&nbsp;\n                    </span>\n                  </div>\n                  <span class=\"bookPress text-primary\">\n                      <span class=\"color-primary\" *ngIf=\"book.press\">Editora:</span>\n                      {{book.press}}&nbsp;&nbsp;&nbsp;\n                      <span class=\"color-primary\" *ngIf=\"book.year\">Ano:</span>\n                      {{book.year}}</span>\n                  <span class=\"bookDescription text-primary\"\n                        *ngIf=\"book.description\">\n                    {{(book.description.length <= 300) ? book.description :\n                      book.description.substring(book.description, 300) + '...'}} </span>\n                  <div class=\"bookMore\">\n\n                    <span *ngIf=\"user && user.administrator\">\n                      <a class=\"color-primary\" routerLink=\"/admin/add\"\n                          [queryParams]=\"{id: book._id}\">alterar</a>\n                      &nbsp;&nbsp;|&nbsp;&nbsp;\n                    </span>\n\n                    <a class=\"color-primary\" routerLink=\"/books/entry\"\n                        [queryParams]=\"{id: book._id}\">\n                        <span >ver mais</span>\n                    </a>\n                   </div>\n                </div>\n\n                <app-actions [parentClass]=\"'book-list'\" [book]=\"book\"></app-actions>\n\n            \t</div>\n            </div>\n          </div>\n      </li>\n    </ul>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\nimport { Book } from '../../../models/book.model';\nimport { AdminService } from \"../../../services/admin.service\";\n\n@Component({\n  selector: 'app-lendings',\n  templateUrl: './lendings.component.html',\n  styleUrls: ['./lendings.component.css']\n})\nexport class LendingsComponent implements OnInit {\n\n  constructor(private adminService: AdminService) { }\n\n  lendings = [];\n\n  ngOnInit(): void {\n\n    console.log('LendingsComponent');\n\n    this.loadLendings();\n\n  }\n\n  private loadLendings() {\n\n    this.adminService.getLendings()\n                     .subscribe(\n                          data => {\n                            this.lendings = data;\n                          },\n                          err => {\n                            console.log(err);\n                          }\n                        );\n\n  }\n\n  onReturnBook(bookID: string): boolean {\n\n    this.adminService.returnBook(bookID);\n\n    const index = this.lendings.findIndex(book => book._id == bookID);\n\n    if (index > -1) {\n       this.lendings.splice(index, 1);\n    }\n\n    return true;\n  }\n\n\n  daysSince(date: string): number {\n    const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds\n    const today = new Date();\n    const lendingDate = new Date(date);\n\n    const days:number = Math.round(Math.abs((+today - +lendingDate) / oneDay));\n\n    return days;\n  }\n\n}\n","\n  <div *ngFor=\"let book of lendings\">\n    <div class=\"row\">\n      <div class=\"col-lg-2\">\n        <img src=\"{{book.coverURL}}\" alt=\"\">\n      </div>\n      <div class=\"info col-lg-7\">\n          <span class=\"bookTitle\">{{book.title}}</span>\n          <span class=\"bookSubtitle\">{{book.subtitle}}</span>\n          <div>\n            <span class=\"bookAuthor\" *ngFor=\"let author of book.Authors; let i = index;\">\n              {{ i > 0 ? '|' : ''}} {{author.name}}\n            </span>\n\n            <span class=\"color-primary\" *ngIf=\"book.Organisers.length > 0\">Organização:\n              <span class=\"bookAuthor\" *ngFor=\"let organiser of book.Organisers; let i = index;\">\n                {{ i > 0 ? '|' : ''}} {{organiser.name}}\n              </span>\n            </span>\n          </div>\n          <div>\n            <span class=\"bookPressYear text-primary\">\n              <span class=\"color-primary\">Editora:</span>\n              {{book.press}}&nbsp;&nbsp;&nbsp;\n              <span class=\"color-primary\">Ano:</span>\n              {{book.year}}\n            </span>\n          </div>\n\n          <hr/>\n\n          <div>\n            <span class=\"bookPressYear text-primary\">\n              <span class=\"color-primary\">Emprestado para:</span> {{book.lending[0].name}} ({{book.lending[0].email}})\n                &nbsp;&nbsp;&nbsp;\n              <span class=\"color-primary\">em:</span> {{book.lending[0].lendingEntry.createdAt  | date:'longDate'}}\n                ({{daysSince(book.lending[0].lendingEntry.createdAt)}} dias)\n            </span>\n          </div>\n\n          <div *ngIf=\"book.queue.length > 0\">\n            <span class=\"bookPressYear text-primary\">\n              <span class=\"color-primary\">Fila de espera:</span>\n              <div class=\"watingList\" *ngFor=\"let person of book.queue; let i = index;\">\n                {{i + 1}}. {{person.name}} ({{person.email}})\n                  &nbsp;&nbsp;&nbsp;\n                <span class=\"color-primary\">em:</span> {{person.waitingEntry.createdAt  | date:'longDate'}}\n                  ({{daysSince(person.waitingEntry.createdAt)}} dias)\n              </div>\n            </span>\n          </div>\n\n          <div class=\"list-actions d-flex justify-content-end\">\n            <div class=\"p-2\">\n                <a class=\"color-primary\" routerLink=\"/books/entry\"\n                    [queryParams]=\"{id: book._id}\">Ver livro</a>\n            </div>\n            <div class=\"p-2\">\n              <a class=\"color-primary\"\n                (click)=\"onReturnBook(book._id)\">Devolver livro</a>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { catchError, map, tap, flatMap } from 'rxjs/operators';\nimport { throwError, BehaviorSubject, Observable } from 'rxjs';\nimport { Idle, DEFAULT_INTERRUPTSOURCES } from '@ng-idle/core';\n\nimport { Book } from '../models/book.model';\nimport { User, WishlistEntry } from '../models/user.model';\nimport { UserResponse, UpdateUserResponseData } from  '../api.interfaces';\n\n// Set the http options\nconst httpOptions = {\n  headers: new HttpHeaders({ \"Content-Type\": \"application/json\",\n                             \"Access-Control-Allow-Origin\": \"*,Origin, X-Requested-With, Content-Type, Accept\" })\n};\n\nconst URL_login = \"http://localhost:5000/api/users/login\";\nconst URL_logout = \"http://localhost:5000/api/users/me/logout\";\nconst URL_updateUser = \"http://localhost:5000/api/users/update\";\nconst URL_getComments = \"http://localhost:5000/api/users/comments\";\nconst URL_AddUser = \"http://localhost:5000/api/users/add\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n\n  user = new BehaviorSubject<User>(null);\n\n  constructor(private http: HttpClient,\n              private router: Router,\n              private idle: Idle) {}\n\n  autologin() {\n    let authObs: Observable<any>;\n    this.login('den.duarte@gmail.com', 'senha').subscribe();\n  }\n\n  login(email: string, password: string) {\n\n    return this.http\n      .post<UserResponse>(URL_login, { email: email, password: password})\n      .pipe(\n        catchError(this.handleError),\n        tap(response => {\n\n          response.user._token = response.token;\n          const user = new User(response.user);\n\n          this.user.next(user);\n\n          this.idle.setIdle(120);\n          this.idle.setTimeout(30);\n          this.idle.watch();\n        })\n      );\n  }\n\n  logout() {\n\n    this.idle.stop();\n\n    const token = this.user.value.token;\n\n    this.user.next(null);\n\n    const httpOptions = {\n      headers: new HttpHeaders({\"Authorization\": \"Bearer \" + token })\n    };\n\n    return this.http.post(URL_logout, {}, httpOptions)\n                    .pipe(catchError(this.handleError)\n    );\n  }\n\n  public addUser(user: User): Observable<any> {\n\n    return this.http.post<User>(URL_AddUser, user, httpOptions)\n                    .pipe(catchError(this.handleError)\n    );\n  }\n\n  private handleError(errorRes: HttpErrorResponse) {\n    let errorMessage = 'An unknown error occurred!';\n    if (!errorRes.error || !errorRes.error.error) {\n      return throwError(errorMessage);\n    }\n    switch (errorRes.error.error) {\n      case 'INVALID_CREDENTIALS':\n        errorMessage = 'Credenciais inválidas';\n        break;\n      case 'EMAIL_NOT_FOUND':\n        errorMessage = 'O endereço de e-mail informado não existe.';\n        break;\n      case 'INVALID_PASSWORD':\n        errorMessage = 'Senha inválida.';\n        break;\n      case 'DUPLICATED_MAIL':\n        errorMessage = 'O endereço de e-mail informado já está cadastrado.';\n        break;\n    }\n    return throwError(errorMessage);\n  }\n\n  updateUserData() {\n\n    return this.http\n      .post<UpdateUserResponseData>(URL_updateUser,\n          {\n            _id: this.user.value._id,\n            name: this.user.value.name,\n            email: this.user.value.email,\n            acceptMailling: this.user.value.acceptMailling,\n            wishlist: this.user.value.wishlist\n          })\n      .pipe(\n        catchError(this.handleError),\n        tap(resData => {\n          this.user.next(this.user.value);\n        })\n      );\n  }\n\n  public getComments(): Observable<Comment[]> {\n    return this.http.post<Comment[]>(URL_getComments,\n                                      { userID: this.user.value._id },\n                                      httpOptions);\n }\n\n isUserWaitingBook(bookID: number): boolean {\n\n   //console.log('waittt', this.user.value.waiting);\n\n   var bookIDs = this.user.value.waiting.map(entry => entry._id);\n   return (bookIDs.indexOf(bookID) > -1) ? true : false;\n }\n\n\n\n}\n","import { Component, OnInit, Input, ElementRef, ViewChild } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { BookService } from \"../../../services/book.service\";\nimport { UserService } from '../../../services/user.service';\n\nimport { Book } from '../../../models/book.model';\nimport { User } from '../../../models/user.model';\n\n\n@Component({\n  selector: 'app-book-entry',\n  templateUrl: './book-entry.component.html',\n  styleUrls: ['./book-entry.component.css']\n})\nexport class BookEntryComponent implements OnInit {\n\n  //books: Book[]  = [];\n  book: Book = null;\n  private userSubscription: Subscription;\n  public user: User;\n\n  @ViewChild('commentSection', { static: true }) commentSection: ElementRef;\n\n\n  constructor(public router: Router,\n              private route: ActivatedRoute,\n              private bookService: BookService,\n              private userService: UserService) { }\n\n  ngOnInit(): void {\n    let bookID = this.route.snapshot.queryParams.id;\n\n    this.fetchBook(bookID);\n\n    this.userSubscription = this.userService.user.subscribe(user => {\n      this.user = user;\n    });\n\n    if (this.route.snapshot.fragment === \"comments\")\n      this.scrollToComments();\n  }\n\n  fetchBook(bookID: number) {\n      this.bookService\n        .fetchBook(bookID)\n        .subscribe(\n          data => {\n            this.book = data;\n          },\n          err => {\n            console.log(err);\n          }\n        );\n    }\n\n\n  onAddToWishist(bookID: number) {\n    console.log('this', this);\n\n    console.log('this.bookService', this.bookService);\n\n    this.bookService.addBookToWishlist(bookID);\n  }\n  onRemoveFromWishist(bookID: number) {\n    this.bookService.removeBookFromWishlist(bookID);\n  }\n\n  onBorrowBook(bookID: number): boolean {\n    var ok = this.bookService.borrowBook(bookID);\n\n    //const index = this.bookList.findIndex(book => book._id == bookID);\n    //this.bookList[index].isAvailable = false;\n\n    return true;\n  }\n  onReturnBook(bookID: number): boolean {\n    console.log('return', bookID);\n    this.bookService.returnBook(bookID);\n\n    //const index = this.bookList.findIndex(book => book._id == bookID);\n    //this.bookList[index].isAvailable = true;\n\n    return true;\n  }\n\n  onEnterWaitingList(bookID: number): boolean {\n    var ok = this.bookService.enterWaitingList(bookID);\n    return true;\n  }\n  onLeaveWaitingList(bookID: number): boolean {\n    var ok = this.bookService.leaveWaitingList(bookID);\n    return true;\n  }\n\n  isBookInWishList(bookID: number): boolean {\n    return this.bookService.isBookInWishList(bookID);\n  }\n\n  isBookBorrowed(bookID: number): boolean {\n     return this.bookService.isBookBorrowed(bookID);\n  }\n  isWaitingBook(bookID: number): boolean {\n    return this.userService.isUserWaitingBook(bookID);\n  }\n\n  scrollToComments() {\n    setTimeout(() => {\n       const element = document.getElementById('comments');\n       element.scrollIntoView({ behavior: 'smooth' });\n    }, 500);\n  }\n\n}\n","\n<div *ngIf=\"book\">\n  <div class=\"row\">\n    <div class=\"col-lg-4\">\n      <img style=\"width: 100%\" src=\"{{book.coverURL}}\"\n           default=\"assets/covers/0.jpg\" alt=\"\">\n    </div>\n    <div class=\"info col-lg-8\">\n\n      <div class=\"tags-wrapper\">\n        <span class=\"tag-chip bg-primary\"\n              *ngFor=\"let tag of book.Tags; let j = index;\">\n              <a routerLink=\"/books\"\n                  [queryParams]=\"{tag: tag.name}\"\n                  (click)=\"filterByTag(tag.name)\"> {{tag.name}}\n              </a>\n        </span>\n      </div>\n\n      <div class=\"book-info\">\n        <span class=\"bookCode\">{{book.code}}</span>\n        <span class=\"bookTitle\">{{book.title}}</span>\n        <span class=\"bookSubtitle\">{{book.subtitle}}</span>\n        <hr/>\n        <div *ngIf=\"book.Authors\">\n          <span class=\"color-primary\">Autoria:</span>\n          <span class=\"bookAuthor\" *ngFor=\"let author of book.Authors; let i = index;\">\n            {{ i > 0 ? '|' : ''}} {{author.name}}\n          </span>\n        </div>\n\n        <div *ngIf=\"book.Organisers.length\">\n          <span class=\"color-primary\">Organização:</span>\n          <span class=\"bookAuthor\" *ngFor=\"let organiser of book.Organisers; let i = index;\">\n            {{ i > 0 ? '|' : ''}} {{organiser.name}}\n          </span>\n        </div>\n\n        <div *ngIf=\"book.Translators.length\">\n          <span class=\"color-primary\">Tradução:</span>\n          <span class=\"bookAuthor\" *ngFor=\"let translator of book.Translators; let i = index;\">\n            {{ i > 0 ? '|' : ''}} {{translator.name}}\n          </span>\n        </div>\n\n\n        <div class=\"otherinfo row\">\n            <span *ngIf=\"book.press\" class=\"col-sm-6\"><span class=\"color-primary\">Editora:</span> {{book.press}}</span>\n            <span *ngIf=\"book.year\" class=\"col-sm-6\"><span class=\"color-primary\">Ano:</span> {{book.year}}</span>\n            <span *ngIf=\"book.edition\" class=\"col-sm-6\"><span class=\"color-primary\">Edição:</span> {{book.edition}}</span>\n            <span *ngIf=\"book.collection\" class=\"col-sm-6\"><span class=\"color-primary\">Coleção:</span> {{book.collection}}</span>\n            <span *ngIf=\"book.volume\" class=\"col-sm-6\"><span class=\"color-primary\">Volume:</span> {{book.volume}}</span>\n            <span *ngIf=\"book.pages\" class=\"col-sm-6\"><span class=\"color-primary\">Número de Páginas:</span> {{book.pages}}</span>\n            <span *ngIf=\"book.isbn\" class=\"col-sm-6\"><span class=\"color-primary\">ISBN:</span> {{book.isbn}}</span>\n        </div>\n\n\n        <span class=\"bookDescription\">\n          {{book.description}}\n        </span>\n\n        <span class=\"bookEdit\"  *ngIf=\"user && user.administrator\">\n          <a class=\"color-primary\" routerLink=\"/admin/add\"\n              [queryParams]=\"{id: book._id}\">Alterar</a>\n        </span>\n      </div>\n\n        <app-actions [parentClass]=\"'book-entry'\" [book]=\"book\"></app-actions>\n\n    </div>\n  </div>\n  <hr>\n  <a name=\"comments\" id=\"comments\" #commentSection> </a>\n  <app-comments *ngIf=\"user\"></app-comments>\n\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-administration',\n  templateUrl: './administration.component.html',\n  styleUrls: ['./administration.component.css']\n})\nexport class AdministrationComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"row\">\n\n  <div class=\"nav col-lg-2 user-menu bg-layer1\">\n    <ul class=\"nav flex-column\">\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/admin', 'lendings']\" routerLinkActive=\"active\">Empréstimos</a>\n      </li>\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/admin', 'add']\" routerLinkActive=\"active\">Adicionar Livro</a>\n      </li>\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/admin', 'profiles']\" routerLinkActive=\"active\">Perfis de usuário</a>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"nav col-lg-10\">\n    <router-outlet></router-outlet>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LandingComponent } from './components/landing/landing.component'\nimport { PageNotFoundComponent } from './components/pagenotfound/pagenotfound.component';\nimport { AuthenticationComponent } from './components/authentication/authentication.component';\nimport { SignupComponent } from './components/signup/signup.component';\n\nimport { BooksComponent } from './components/books/books.component';\nimport { BookListComponent } from './components/books/book-list/book-list.component';\nimport { BookEntryComponent } from './components/books/book-entry/book-entry.component';\n\nimport { UserComponent } from './components/user/user.component';\nimport { UserListComponent } from './components/user/list/user-list.component';\nimport { UserLendingsComponent } from './components/user/lendings/user-lendings.component';\nimport { UserDataComponent } from './components/user/user-data/user-data.component';\nimport { UserCommentsComponent } from './components/user/user-comments/user-comments.component';\n\nimport { AdministrationComponent } from './components/administration/administration.component';\nimport { LendingsComponent } from './components/administration/lendings/lendings.component';\nimport { BookAddComponent } from './components/administration/book-add/book-add.component';\nimport { ProfilesComponent } from './components/administration/profiles/profiles.component';\nimport { ProfilesListComponent } from './components/administration/profiles/list/profiles-list.component';\n\nconst routes: Routes = [\n    { path: '', component: LandingComponent },\n    { path: 'books', component: BooksComponent, children: [\n        { path: '', component: BookListComponent },\n        { path: 'entry', component: BookEntryComponent }\n    ]},\n    { path: 'user', component: UserComponent, children: [\n        { path: '', component: UserListComponent },\n        { path: 'data', component: UserDataComponent },\n        { path: 'list', component: UserListComponent },\n        { path: 'comments', component: UserCommentsComponent },\n        { path: 'lendings', component: UserLendingsComponent }\n    ]},\n    { path: 'admin', component: AdministrationComponent, children: [\n        { path: '', component: LendingsComponent },\n        { path: 'add', component: BookAddComponent },\n        { path: 'lendings', component: LendingsComponent },\n        { path: 'profiles', component: ProfilesComponent , children: [\n            { path: '', component: ProfilesListComponent },\n            { path: 'list', component: ProfilesListComponent }\n        ]},\n    ]},\n    { path: 'auth', component: AuthenticationComponent },\n    { path: 'signup', component: SignupComponent },\n    { path: '404', component: PageNotFoundComponent },\n    { path: '**', redirectTo: '/404' }\n\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, {scrollPositionRestoration: 'enabled'})],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'shortname'\n})\nexport class ShortnamePipe implements PipeTransform {\n\n  transform(value: string, ...args: number[]): string {\n\n    let names = value.split(' ');\n    let shortenedName = '';\n\n    if (names.length > 1) {\n      shortenedName = names[0] + ' ' + names[names.length - 1];\n    } else {\n      shortenedName = names[0];\n    }\n\n    if (shortenedName.length > 20) {\n      shortenedName = shortenedName.slice(0, 17) + '...';\n    }\n\n    return shortenedName;\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-user',\n  templateUrl: './user.component.html',\n  styleUrls: ['./user.component.css']\n})\nexport class UserComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"row\">\n\n  <div class=\"nav col-lg-2 user-menu bg-layer1\">\n    <ul class=\"nav flex-column\">\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/user', 'data']\" routerLinkActive=\"active\">Meus dados</a>\n      </li>\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/user', 'list']\" routerLinkActive=\"active\">Minha lista</a>\n      </li>\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/user', 'lendings']\" routerLinkActive=\"active\">Meus emprestimos</a>\n      </li>\n      <li class=\"nav-item bg-layer4\">\n        <a class=\"nav-link text-primary\" [routerLink]=\"['/user', 'comments']\" routerLinkActive=\"active\">Meus comentários</a>\n      </li>\n    </ul>\n  </div>\n\n  <div class=\"nav col-lg-10\">\n    <router-outlet></router-outlet>\n  </div>\n</div>\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}